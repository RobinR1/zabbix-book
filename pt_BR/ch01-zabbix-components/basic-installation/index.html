
<!doctype html>
<html lang="pt" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Step‑by‑step guide to install Zabbix with MariaDB or PostgreSQL, setup server
& frontend on Ubuntu or Rocky Linux, including security & repo configuration.
">
      
      
        <meta name="author" content="The Monitoring Penmasters">
      
      
        <link rel="canonical" href="https://thezabbixbook.com/pt_BR/ch01-zabbix-components/basic-installation/">
      
      
        <link rel="prev" href="../chapter/">
      
      
        <link rel="next" href="../ha-setup/">
      
      
        
          <link rel="alternate" href="../../../fr/ch01-zabbix-components/basic-installation/" hreflang="fr">
        
          <link rel="alternate" href="../../../nl/ch01-zabbix-components/basic-installation/" hreflang="nl">
        
          <link rel="alternate" href="./" hreflang="pt_BR">
        
          <link rel="alternate" href="../../../ru/ch01-zabbix-components/basic-installation/" hreflang="ru">
        
          <link rel="alternate" href="../../../ch01-zabbix-components/basic-installation/" hreflang="en">
        
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>Basic Installation - Zabbix Book</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        
        <link rel="stylesheet" href="../../../assets/external/fonts.googleapis.com/css.af67bdb9.css">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Nunito"}</style>
      
    
    
      <link rel="stylesheet" href="../../../stylesheets/extra.css">
    
      <link rel="stylesheet" href="../../../stylesheets/linewrap.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
    
    

    <meta property="og:title" content="Basic Installation">
    <meta property="og:description" content="Step‑by‑step guide to install Zabbix with MariaDB or PostgreSQL, setup server &amp; frontend on Ubuntu or Rocky Linux, including security &amp; repo configuration.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://thezabbixbook.com/pt_BR/ch01-zabbix-components/basic-installation/">
    <meta property="og:image" content="https://www.thezabbixbook.com/assets/social-card.jpg">

    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Basic Installation">
    <meta name="twitter:description" content="Step‑by‑step guide to install Zabbix with MariaDB or PostgreSQL, setup server &amp; frontend on Ubuntu or Rocky Linux, including security &amp; repo configuration.">
    <meta name="twitter:image" content="https://www.thezabbixbook.com/assets/social-card.jpg">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="627">

  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="blue">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#instalacao-basica" class="md-skip">
          Pular para conteúdo
        </a>
      
    </div>
    <div data-md-component="announce">
      
        <aside class="md-banner">
          <div class="md-banner__inner md-grid md-typeset">
            
            
    
    
    
    
    <script>
        const gGMC_SELECT_VERSION = "Selecione a versão";
        const gGMC_TRANSLATE_CTA = "Ajude-nos a traduzir!";
        const gGMC_PAGE_LOCALE = "pt_BR";
        const gGMC_FILE_LOCALE = "pt_BR";
        const gGMC_TRANSLATE_SVG = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.5 12c0-.68-.06-1.34-.14-2h3.38c.16.64.26 1.31.26 2 0 .37-.03.73-.08 1.08.69.1 1.33.32 1.92.64.1-.56.16-1.13.16-1.72 0-5.5-4.5-10-10-10C6.47 2 2 6.5 2 12s4.5 10 10 10c.59 0 1.16-.06 1.72-.16A5.9 5.9 0 0 1 13 19c0-.29.03-.57.07-.85-.32.63-.67 1.24-1.07 1.81-.83-1.2-1.5-2.53-1.91-3.96h3.72a5.95 5.95 0 0 1 2.59-2.4c.06-.53.1-1.06.1-1.6M12 4.03c.83 1.2 1.5 2.54 1.91 3.97h-3.82c.41-1.43 1.08-2.77 1.91-3.97M4.26 14C4.1 13.36 4 12.69 4 12s.1-1.36.26-2h3.38c-.08.66-.14 1.32-.14 2s.06 1.34.14 2zm.82 2H8c.35 1.25.8 2.45 1.4 3.56A8 8 0 0 1 5.08 16M8 8H5.08A7.92 7.92 0 0 1 9.4 4.44C8.8 5.55 8.35 6.75 8 8m6.34 6H9.66c-.1-.66-.16-1.32-.16-2s.06-1.35.16-2h4.68c.09.65.16 1.32.16 2s-.07 1.34-.16 2m.25-9.56c1.84.63 3.37 1.9 4.33 3.56h-2.95a15.7 15.7 0 0 0-1.38-3.56M23 18v2h-3v3h-2v-3h-3v-2h3v-3h2v3z"/></svg>';
    </script>
    
    

          </div>
          
        </aside>
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Cabeçalho">
    <a href="../../" title="Zabbix Book" class="md-header__button md-logo" aria-label="Zabbix Book" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Zabbix Book
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Basic Installation
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="blue"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6m0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4M7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="light-blue" data-md-color-accent="light-blue"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
      <div class="md-header__option">
  <div class="md-select">
    
    <button class="md-header__button md-icon" aria-label="Selecione o idioma">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m12.87 15.07-2.54-2.51.03-.03A17.5 17.5 0 0 0 14.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2zm-2.62 7 1.62-4.33L19.12 17z"/></svg>
    </button>
    <div class="md-select__inner">
      <ul class="md-select__list">
        
          <li class="md-select__item">
            <a href="../../../fr/ch01-zabbix-components/basic-installation/" hreflang="fr" class="md-select__link">
              Français
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="../../../nl/ch01-zabbix-components/basic-installation/" hreflang="nl" class="md-select__link">
              Nederlands
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="./" hreflang="pt_BR" class="md-select__link">
              Brazillian Portugese
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="../../../ru/ch01-zabbix-components/basic-installation/" hreflang="ru" class="md-select__link">
              Russian
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="../../../ch01-zabbix-components/basic-installation/" hreflang="en" class="md-select__link">
              English
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</div>
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Buscar" placeholder="Buscar" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Pesquisar">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Compartilhar" aria-label="Compartilhar" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Limpar" aria-label="Limpar" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Inicializando busca
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/penmasters/zabbix-book" title="Ir para repositório" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    penmasters
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navegação" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../" title="Zabbix Book" class="md-nav__button md-logo" aria-label="Zabbix Book" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Zabbix Book
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/penmasters/zabbix-book" title="Ir para repositório" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    penmasters
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Welcome
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Guidelines/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Guidelines
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tags/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Book Tags
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Supporters-Contributors/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Supporters and contributors
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
    
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../ch00-getting-started/initial-steps/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    
  
    Getting started
  

    
  </span>
  
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" checked>
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Chapter 01 : Zabbix components
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    Chapter 01 : Zabbix components
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Zabbix components
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    Basic Installation
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Basic Installation
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Índice">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Índice
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#instalando-o-banco-de-dados-mariadb" class="md-nav__link">
    <span class="md-ellipsis">
      
        Instalando o banco de dados MariaDB
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Instalando o banco de dados MariaDB">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adicione-o-repositorio-mariadb" class="md-nav__link">
    <span class="md-ellipsis">
      
        Adicione o repositório MariaDB
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#instalar-o-banco-de-dados-mariadb" class="md-nav__link">
    <span class="md-ellipsis">
      
        Instalar o banco de dados MariaDB
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#protegendo-o-banco-de-dados-mariadb" class="md-nav__link">
    <span class="md-ellipsis">
      
        Protegendo o banco de dados MariaDB
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#criar-o-banco-de-dados-zabbix" class="md-nav__link">
    <span class="md-ellipsis">
      
        Criar o banco de dados Zabbix
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#preencher-o-banco-de-dados-do-zabbix-maria" class="md-nav__link">
    <span class="md-ellipsis">
      
        Preencher o banco de dados do Zabbix Maria
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#instalacao-do-banco-de-dados-postgresql" class="md-nav__link">
    <span class="md-ellipsis">
      
        Instalação do banco de dados PostgreSQL
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Instalação do banco de dados PostgreSQL">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adicionar-o-repositorio-postgresql" class="md-nav__link">
    <span class="md-ellipsis">
      
        Adicionar o repositório PostgreSQL
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#instalar-os-bancos-de-dados-postgresql" class="md-nav__link">
    <span class="md-ellipsis">
      
        Instalar os bancos de dados PostgreSQL
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#protegendo-o-banco-de-dados-postgresql" class="md-nav__link">
    <span class="md-ellipsis">
      
        Protegendo o banco de dados PostgreSQL
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#criar-o-banco-de-dados-do-zabbix-com-o-postgresql" class="md-nav__link">
    <span class="md-ellipsis">
      
        Criar o banco de dados do Zabbix com o PostgreSQL
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#preencher-o-banco-de-dados-postgresql-do-zabbix" class="md-nav__link">
    <span class="md-ellipsis">
      
        Preencher o banco de dados PostgreSQL do Zabbix
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#instalando-o-servidor-zabbix-para-mariadbmysql" class="md-nav__link">
    <span class="md-ellipsis">
      
        Instalando o servidor Zabbix para MariaDB/Mysql
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Instalando o servidor Zabbix para MariaDB/Mysql">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adicionando-o-repositorio-zabbix" class="md-nav__link">
    <span class="md-ellipsis">
      
        Adicionando o repositório Zabbix
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuracao-do-servidor-zabbix-para-mysqlmariadb" class="md-nav__link">
    <span class="md-ellipsis">
      
        Configuração do servidor Zabbix para MySQL/MariaDB
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#instalando-o-servidor-zabbix-para-postgresql" class="md-nav__link">
    <span class="md-ellipsis">
      
        Instalando o servidor Zabbix para PostgreSQL
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Instalando o servidor Zabbix para PostgreSQL">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adicionando-o-repositorio-zabbix_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Adicionando o repositório Zabbix
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuracao-do-servidor-zabbix-para-postgresql" class="md-nav__link">
    <span class="md-ellipsis">
      
        Configuração do servidor Zabbix para PostgreSQL
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#instalando-o-front-end" class="md-nav__link">
    <span class="md-ellipsis">
      
        Instalando o front-end
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Instalando o front-end">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#instalando-o-front-end-com-o-nginx" class="md-nav__link">
    <span class="md-ellipsis">
      
        Instalando o front-end com o NGINX
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conclusao" class="md-nav__link">
    <span class="md-ellipsis">
      
        Conclusão
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#perguntas" class="md-nav__link">
    <span class="md-ellipsis">
      
        Perguntas
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#urls-uteis" class="md-nav__link">
    <span class="md-ellipsis">
      
        URLs úteis
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ha-setup/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    HA Setup
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../ch02-zabbix-installation/chapter/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    
  
    Chapter 02 : Installation
  

    
  </span>
  
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../ch03-zabbix-proxies/chapter/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    
  
    Chapter 03 : Proxies and Webcomponents
  

    
  </span>
  
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../ch04-zabbix-collecting-data/chapter/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    
  
    Chapter 04 : Collecting data 
  

    
  </span>
  
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../ch05-zabbix-triggers/chapter/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    
  
    Chapter 05 : Triggers
  

    
  </span>
  
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
    
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../ch06-zabbix-templates/chapter/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    
  
    Chapter 06 : Templates
  

    
  </span>
  
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../ch07-zabbix-alerts/chapter/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    
  
    Chapter 07 : Alerting
  

    
  </span>
  
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../ch08-zabbix-lld/chapter/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    
  
    Chapter 08 : LLD
  

    
  </span>
  
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../ch09-zabbix-extending/chapter/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    
  
    Chapter 09 : Extending Zabbix
  

    
  </span>
  
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
    
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../ch10-zabbix-discovery/chapter/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    
  
    Chapter 10 : Discovery
  

    
  </span>
  
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
    
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../ch11-zabbix-visualisation/chapter/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    
  
    Chapter 11 : Visualisation
  

    
  </span>
  
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
    
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../ch12-zabbix-api/chapter/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    
  
    Chapter 12 : Zabbix API
  

    
  </span>
  
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../ch13-advanced-security/chapter/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    
  
    Chapter 13 : Advanced set up and security
  

    
  </span>
  
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../ch14-zabbix-maintenance/chapter/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    
  
    Chapter 14 : Maintenance
  

    
  </span>
  
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
    
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../ch15-zabbix-real-world-examples/chapter/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    
  
    Chapter 15 : Real world examples
  

    
  </span>
  
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../print_page/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Print Site
  

    
  </span>
  
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Índice">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Índice
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#instalando-o-banco-de-dados-mariadb" class="md-nav__link">
    <span class="md-ellipsis">
      
        Instalando o banco de dados MariaDB
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Instalando o banco de dados MariaDB">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adicione-o-repositorio-mariadb" class="md-nav__link">
    <span class="md-ellipsis">
      
        Adicione o repositório MariaDB
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#instalar-o-banco-de-dados-mariadb" class="md-nav__link">
    <span class="md-ellipsis">
      
        Instalar o banco de dados MariaDB
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#protegendo-o-banco-de-dados-mariadb" class="md-nav__link">
    <span class="md-ellipsis">
      
        Protegendo o banco de dados MariaDB
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#criar-o-banco-de-dados-zabbix" class="md-nav__link">
    <span class="md-ellipsis">
      
        Criar o banco de dados Zabbix
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#preencher-o-banco-de-dados-do-zabbix-maria" class="md-nav__link">
    <span class="md-ellipsis">
      
        Preencher o banco de dados do Zabbix Maria
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#instalacao-do-banco-de-dados-postgresql" class="md-nav__link">
    <span class="md-ellipsis">
      
        Instalação do banco de dados PostgreSQL
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Instalação do banco de dados PostgreSQL">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adicionar-o-repositorio-postgresql" class="md-nav__link">
    <span class="md-ellipsis">
      
        Adicionar o repositório PostgreSQL
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#instalar-os-bancos-de-dados-postgresql" class="md-nav__link">
    <span class="md-ellipsis">
      
        Instalar os bancos de dados PostgreSQL
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#protegendo-o-banco-de-dados-postgresql" class="md-nav__link">
    <span class="md-ellipsis">
      
        Protegendo o banco de dados PostgreSQL
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#criar-o-banco-de-dados-do-zabbix-com-o-postgresql" class="md-nav__link">
    <span class="md-ellipsis">
      
        Criar o banco de dados do Zabbix com o PostgreSQL
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#preencher-o-banco-de-dados-postgresql-do-zabbix" class="md-nav__link">
    <span class="md-ellipsis">
      
        Preencher o banco de dados PostgreSQL do Zabbix
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#instalando-o-servidor-zabbix-para-mariadbmysql" class="md-nav__link">
    <span class="md-ellipsis">
      
        Instalando o servidor Zabbix para MariaDB/Mysql
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Instalando o servidor Zabbix para MariaDB/Mysql">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adicionando-o-repositorio-zabbix" class="md-nav__link">
    <span class="md-ellipsis">
      
        Adicionando o repositório Zabbix
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuracao-do-servidor-zabbix-para-mysqlmariadb" class="md-nav__link">
    <span class="md-ellipsis">
      
        Configuração do servidor Zabbix para MySQL/MariaDB
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#instalando-o-servidor-zabbix-para-postgresql" class="md-nav__link">
    <span class="md-ellipsis">
      
        Instalando o servidor Zabbix para PostgreSQL
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Instalando o servidor Zabbix para PostgreSQL">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adicionando-o-repositorio-zabbix_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Adicionando o repositório Zabbix
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuracao-do-servidor-zabbix-para-postgresql" class="md-nav__link">
    <span class="md-ellipsis">
      
        Configuração do servidor Zabbix para PostgreSQL
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#instalando-o-front-end" class="md-nav__link">
    <span class="md-ellipsis">
      
        Instalando o front-end
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Instalando o front-end">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#instalando-o-front-end-com-o-nginx" class="md-nav__link">
    <span class="md-ellipsis">
      
        Instalando o front-end com o NGINX
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conclusao" class="md-nav__link">
    <span class="md-ellipsis">
      
        Conclusão
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#perguntas" class="md-nav__link">
    <span class="md-ellipsis">
      
        Perguntas
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#urls-uteis" class="md-nav__link">
    <span class="md-ellipsis">
      
        URLs úteis
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
                



  


  <nav class="md-path" aria-label="Navegação" >
    <ol class="md-path__list">
      
        
  
  
    <li class="md-path__item">
      <a href="../../" class="md-path__link">
        
  <span class="md-ellipsis">
    Welcome
  </span>

      </a>
    </li>
  

      
      
        
  
  
    
    
      <li class="md-path__item">
        <a href="../chapter/" class="md-path__link">
          
  <span class="md-ellipsis">
    Chapter 01 : Zabbix components
  </span>

        </a>
      </li>
    
  

      
    </ol>
  </nav>

              
              <article class="md-content__inner md-typeset">
                


    <a href="../../../print_page/" title="Print Site" class="md-content__button md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 3H6v4h12m1 5a1 1 0 0 1-1-1 1 1 0 0 1 1-1 1 1 0 0 1 1 1 1 1 0 0 1-1 1m-3 7H8v-5h8m3-6H5a3 3 0 0 0-3 3v6h4v4h12v-4h4v-6a3 3 0 0 0-3-3"/></svg>
    </a>



                  







<nav class="md-tags">
  
    
    <span class="md-tag md-tag-icon" data-tag="beginner">
      Iniciante
    </span>
  
</nav>



  
  
    
      
    
    <a href="https://github.com/penmasters/zabbix-book/raw/main/docs/pt_BR/ch01-zabbix-components/basic-installation.md" title="Exibir fonte desta página" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 18c.56 0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5M9.27 20H6V4h7v5h5v4.07c.7.08 1.36.25 2 .49V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4.5a8.2 8.2 0 0 1-1.23-2"/></svg>
    </a>
  


<h1 id="instalacao-basica">Instalação básica</h1>
<p>Neste capítulo, discorreremos sobre o processo de instalação do Zabbix Server.
Há diversas maneiras de configurar um Zabbix Server. Abordaremos as
configurações mais comuns com o MariaDB e o PostgreSQL no Ubuntu e no Rocky
Linux.</p>
<p>Antes de iniciar a instalação, é importante entender a arquitetura do Zabbix. O
Zabbix Server é estruturado de forma modular, composto por três componentes
principais, que discutiremos em detalhes.</p>
<ul>
<li>O Zabbix Server</li>
<li>O servidor web Zabbix (Frontend)</li>
<li>O banco de dados do Zabbix</li>
</ul>
<div class="admonition info">
<p class="admonition-title">Criação de Usuários do Banco de Dados</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="l l-Scalar l-Scalar-Plain">In our setup we will create 2 DB users `zabbix-web` and `zabbix-srv`. The</span><span class="w"> </span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="l l-Scalar l-Scalar-Plain">zabbix-web user will be used for the frontend to connect to our zabbix database.</span>
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="l l-Scalar l-Scalar-Plain">The zabbix-srv user will be used by our zabbix server to connect to the database.</span>
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="l l-Scalar l-Scalar-Plain">This allows us to limit the permissions for every user to only what is strictly</span>
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="l l-Scalar l-Scalar-Plain">needed.</span>
</span></code></pre></div>
</div>
<p><img align="left" alt="overview" src="../../../ch01-zabbix-components/basic-installation/ch01-basic-installation-zabbixserver.png" /></p>
<p><em>1.1 Instalação da divisão básica do Zabbix</em></p>
<p>Todos esses componentes podem ser instalados em um único servidor ou
distribuídos em três servidores separados. O núcleo do sistema é o Zabbix
Server, geralmente chamado de "cérebro". Esse componente é responsável pelo
processamento de cálculos de acionamento e pelo envio de alertas. O banco de
dados serve como armazenamento da configuração do servidor Zabbix e de todos os
dados que ele coleta. O servidor Web fornece a interface do usuário (front-end)
para interagir com o sistema. É importante observar que a API do Zabbix faz
parte do componente front-end, e não do próprio servidor Zabbix.</p>
<p>Esses componentes devem funcionar juntos de forma integrada, conforme ilustrado
no diagrama acima. O Zabbix Server deve ler as configurações e armazenar os
dados de monitoramento no banco de dados, enquanto o front-end precisa ter
acesso para ler e gravar os dados de configuração. Além disso, o front-end deve
ser capaz de verificar o status do Zabbix Server e recuperar informações
adicionais necessárias para garantir uma operação tranquila.</p>
<p>Para nossa configuração, usaremos duas máquinas virtuais (VMs): uma VM hospedará
o Zabbix Server e o Frontend, enquanto a segunda VM hospedará o banco de dados
do Zabbix.</p>
<details class="nota" open="open">
<summary>Nota</summary>
<p>It's perfect possible to install all components on 1 single VM or every component
on a separate VM.
Reason we split the DB as an example is because the database will probably be
the first component giving you performance headaches. It's also the component
that needs some extra attention when we split it so for this reason we have
chosen in this example to split the database from the rest of the setup.</p>
</details>
<details class="nota" open="open">
<summary>Nota</summary>
<p>A crucial consideration for those managing Zabbix installations is the database
back-end. Zabbix 7.0 marks the final release to offer support for Oracle Database.
Consequently, systems running Zabbix 7.0 or any prior version must undertake
a database migration to either PostgreSQL, MySQL, or a compatible fork such
as MariaDB before upgrading to a later Zabbix release. This migration is a
mandatory step to ensure continued functionality and compatibility with future
Zabbix versions.</p>
</details>
<p>Abordaremos os seguintes tópicos:</p>
<ul>
<li>Instale nosso banco de dados baseado no MariaDB.</li>
<li>Instale nosso banco de dados baseado no PostgreSQL.</li>
<li>Instalando o Zabbix Server.</li>
<li>Instale o front-end.</li>
</ul>
<h2 id="instalando-o-banco-de-dados-mariadb">Instalando o banco de dados MariaDB</h2>
<p>Para iniciar o processo de instalação do servidor MariaDB, a primeira etapa
envolve a criação manual de um arquivo de configuração do repositório. Esse
arquivo, mariadb.repo no Rocky, deve ser colocado no diretório
/etc/yum.repos.d/. O arquivo de repositório permitirá que seu gerenciador de
pacotes localize e instale os componentes necessários do MariaDB. Para o Ubuntu,
precisamos importar as chaves do repositório e criar um arquivo, por exemplo,
'/etc/apt/sources.list.d/mariadb.sources'.</p>
<h3 id="adicione-o-repositorio-mariadb">Adicione o repositório MariaDB</h3>
<p>Para criar o arquivo de repositório do MariaDB, execute o seguinte comando em
seu terminal:</p>
<div class="admonition info">
<p class="admonition-title">criar repositório mariadb</p>
<p>Red Hat
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="l l-Scalar l-Scalar-Plain">vi /etc/yum.repos.d/mariadb.repo</span>
</span></code></pre></div></p>
<p>Ubuntu
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="l l-Scalar l-Scalar-Plain">sudo apt install apt-transport-https curl</span>
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="l l-Scalar l-Scalar-Plain">sudo mkdir -p /etc/apt/keyrings</span>
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="l l-Scalar l-Scalar-Plain">sudo curl -o /etc/apt/keyrings/mariadb-keyring.pgp &#39;https://mariadb.org/mariadb_release_signing_key.pgp&#39;</span>
</span><span id="__span-2-4"><a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a>
</span><span id="__span-2-5"><a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a><span class="l l-Scalar l-Scalar-Plain">sudo vi /etc/apt/sources.list.d/mariadb.sources</span>
</span></code></pre></div></p>
</div>
<p>Isso abrirá um editor de texto no qual você poderá inserir os detalhes de
configuração do repositório. Depois que o repositório estiver configurado, você
poderá prosseguir com a instalação do MariaDB usando o gerenciador de pacotes.</p>
<details class="dica" open="open">
<summary>Dica</summary>
<p>Always check Zabbix documentation for the latest supported versions.</p>
</details>
<p>A configuração mais recente pode ser encontrada aqui:
<a href="https://mariadb.org/download/?t=repo-config">https://mariadb.org/download/?t=repo-config</a></p>
<p>Aqui está a configuração que você precisa adicionar ao arquivo:</p>
<div class="admonition info">
<p class="admonition-title">Repositório Mariadb</p>
<p>Red Hat
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="c1"># MariaDB 11.4 RedHatEnterpriseLinux repository list - created 2025-02-21 10:15 UTC</span>
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="c1"># https://mariadb.org/download/</span>
</span><span id="__span-3-3"><a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a><span class="p p-Indicator">[</span><span class="nv">mariadb</span><span class="p p-Indicator">]</span>
</span><span id="__span-3-4"><a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a><span class="l l-Scalar l-Scalar-Plain">name = MariaDB</span>
</span><span id="__span-3-5"><a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a><span class="l l-Scalar l-Scalar-Plain"># rpm.mariadb.org is a dynamic mirror if your preferred mirror goes offline. See https://mariadb.org/mirrorbits/ for details.</span>
</span><span id="__span-3-6"><a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a><span class="l l-Scalar l-Scalar-Plain"># baseurl = https://rpm.mariadb.org/11.4/rhel/$releasever/$basearch</span>
</span><span id="__span-3-7"><a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a><span class="l l-Scalar l-Scalar-Plain">baseurl = https://mirror.bouwhuis.network/mariadb/yum/11.4/rhel/$releasever/$basearch</span>
</span><span id="__span-3-8"><a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a><span class="l l-Scalar l-Scalar-Plain"># gpgkey = https://rpm.mariadb.org/RPM-GPG-KEY-MariaDB</span>
</span><span id="__span-3-9"><a id="__codelineno-3-9" name="__codelineno-3-9" href="#__codelineno-3-9"></a><span class="l l-Scalar l-Scalar-Plain">gpgkey = https://mirror.bouwhuis.network/mariadb/yum/RPM-GPG-KEY-MariaDB</span>
</span><span id="__span-3-10"><a id="__codelineno-3-10" name="__codelineno-3-10" href="#__codelineno-3-10"></a><span class="l l-Scalar l-Scalar-Plain">gpgcheck = 1</span>
</span></code></pre></div></p>
<p>Ubuntu
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="c1"># MariaDB 11.4 repository list - created 2025-02-21 11:42 UTC</span>
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="c1"># https://mariadb.org/download/</span>
</span><span id="__span-4-3"><a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a><span class="nt">X-Repolib-Name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">MariaDB</span>
</span><span id="__span-4-4"><a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a><span class="nt">Types</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">deb</span>
</span><span id="__span-4-5"><a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a><span class="c1"># deb.mariadb.org is a dynamic mirror if your preferred mirror goes offline. See https://mariadb.org/mirrorbits/ for details.</span>
</span><span id="__span-4-6"><a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a><span class="c1"># URIs: https://deb.mariadb.org/11.4/ubuntu</span>
</span><span id="__span-4-7"><a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a><span class="nt">URIs</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">https://mirror.bouwhuis.network/mariadb/repo/11.4/ubuntu</span>
</span><span id="__span-4-8"><a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a><span class="nt">Suites</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">noble</span>
</span><span id="__span-4-9"><a id="__codelineno-4-9" name="__codelineno-4-9" href="#__codelineno-4-9"></a><span class="nt">Components</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">main main/debug</span>
</span><span id="__span-4-10"><a id="__codelineno-4-10" name="__codelineno-4-10" href="#__codelineno-4-10"></a><span class="nt">Signed-By</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/etc/apt/keyrings/mariadb-keyring.pgp</span>
</span></code></pre></div></p>
</div>
<p>Depois de salvar o arquivo, verifique se tudo está devidamente configurado, e se
a versão do MariaDB é compatível com a versão do Zabbix, para evitar possíveis
problemas de integração.</p>
<p>Antes de prosseguir com a instalação do MariaDB, é uma prática recomendada
garantir que seu sistema operacional esteja atualizado com os patches e as
correções de segurança mais recentes. Isso ajudará a manter a estabilidade e a
compatibilidade do sistema com o software que você está prestes a instalar.</p>
<p>Para atualizar seu sistema operacional, execute o seguinte comando:</p>
<div class="admonition info">
<p class="admonition-title">Atualizar sistema operacional</p>
<p>Red Hat
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="l l-Scalar l-Scalar-Plain">dnf update</span>
</span></code></pre></div></p>
<p>Ubuntu
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="l l-Scalar l-Scalar-Plain">sudo apt update &amp;&amp; sudo apt upgrade</span>
</span></code></pre></div></p>
</div>
<p>Esse comando buscará e instalará automaticamente as atualizações mais recentes
disponíveis para seu sistema, aplicando patches de segurança, melhorias de
desempenho e correções de bugs. Quando o processo de atualização estiver
concluído, você poderá prosseguir com a instalação do MariaDB.</p>
<hr />
<h3 id="instalar-o-banco-de-dados-mariadb">Instalar o banco de dados MariaDB</h3>
<p>Com o sistema operacional atualizado e o repositório do MariaDB configurado,
agora você está pronto para instalar os pacotes do servidor e do cliente
MariaDB. Isso fornecerá os componentes necessários para executar e administrar a
sua base de dados.</p>
<p>Para instalar o servidor e o cliente MariaDB, execute o seguinte comando:</p>
<div class="admonition info">
<p class="admonition-title">Instalar o Mariadb</p>
<p>Red Hat
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="l l-Scalar l-Scalar-Plain">dnf install MariaDB-server</span>
</span></code></pre></div></p>
<p>Ubuntu
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="l l-Scalar l-Scalar-Plain">sudo apt install mariadb-server</span>
</span></code></pre></div></p>
</div>
<p>Esse comando realizará o download e instalará os pacotes do servidor e do
cliente, permitindo que você defina, configure e interaja com o banco de dados
MariaDB. Quando a instalação estiver concluída, você poderá iniciar e configurar
o serviço MariaDB.</p>
<p>Agora que o MariaDB está instalado, precisamos habilitar o serviço para iniciar
automaticamente na inicialização do sistema operacional, assim como iniciá-lo
imediatamente. Utilize o seguinte comando para realizar isso:</p>
<div class="admonition info">
<p class="admonition-title">Habilitar o serviço mariadb</p>
<p>Red Hat
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="l l-Scalar l-Scalar-Plain">systemctl enable mariadb --now</span>
</span></code></pre></div></p>
</div>
<p>Esse comando habilitará e iniciará o serviço MariaDB. Quando o serviço estiver
em execução, você poderá verificar se a instalação foi bem-sucedida verificando
a versão do MariaDB usando o seguinte comando:</p>
<div class="admonition info">
<p class="admonition-title">Verificar versão do Mariadb</p>
<p>Red Hat and Ubuntu
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="l l-Scalar l-Scalar-Plain">sudo mariadb -V</span>
</span></code></pre></div></p>
</div>
<p>A saída esperada deve ser similar a esta:</p>
<div class="admonition informações">
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="l l-Scalar l-Scalar-Plain">mariadb from 11.4.5-MariaDB, client 15.2 for Linux (aarch64) using EditLine wrapper</span>
</span></code></pre></div>
</div>
<p>Para garantir que o serviço do MariaDB esteja funcionando corretamente, você
pode verificar o status com o seguinte comando:</p>
<div class="admonition info">
<p class="admonition-title">Obter status do mariadb</p>
<p>Red Hat and Ubuntu
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="l l-Scalar l-Scalar-Plain">sudo systemctl status mariadb</span>
</span></code></pre></div></p>
</div>
<p>Você deverá ver um resultado semelhante a este, indicando que o serviço MariaDB
está ativo e em execução:</p>
<p>!!! info "mariadb service status example" (exemplo de status do serviço
mariadb")</p>
<div class="language-text highlight"><pre><span></span><code>```yaml
 mariadb.service - MariaDB 11.4.5 database server
      Loaded: loaded (/usr/lib/systemd/system/mariadb.service; enabled; preset: disabled)
     Drop-In: /etc/systemd/system/mariadb.service.d
              └─migrated-from-my.cnf-settings.conf
      Active: active (running) since Fri 2025-02-21 11:22:59 CET; 2min 8s ago
        Docs: man:mariadbd(8)
              https://mariadb.com/kb/en/library/systemd/
     Process: 23147 ExecStartPre=/bin/sh -c systemctl unset-environment _WSREP_START_POSITION (code=exited, status=0/SUCCESS)
     Process: 23148 ExecStartPre=/bin/sh -c [ ! -e /usr/bin/galera_recovery ] &amp;&amp; VAR= ||   VAR=`/usr/bin/galera_recovery`; [ $? -eq 0 ] &amp;&amp; systemctl set-enviro&gt;
Process: 23168 ExecStartPost=/bin/sh -c systemctl unset-environment \_WSREP_START_POSITION (code=exited, status=0/SUCCESS)
Main PID: 23156 (mariadbd)
Status: &quot;Taking your SQL requests now...&quot;
Tasks: 7 (limit: 30620)
Memory: 281.7M
CPU: 319ms
CGroup: /system.slice/mariadb.service
└─23156 /usr/sbin/mariadbd

Feb 21 11:22:58 localhost.localdomain mariadbd[23156]: 2025-02-21 11:22:58 0 [Note] InnoDB: Loading buffer pool(s) from /var/lib/mysql/ib_buffer_pool
Feb 21 11:22:58 localhost.localdomain mariadbd[23156]: 2025-02-21 11:22:58 0 [Note] Plugin &#39;FEEDBACK&#39; is disabled.
Feb 21 11:22:58 localhost.localdomain mariadbd[23156]: 2025-02-21 11:22:58 0 [Note] Plugin &#39;wsrep-provider&#39; is disabled.
Feb 21 11:22:58 localhost.localdomain mariadbd[23156]: 2025-02-21 11:22:58 0 [Note] InnoDB: Buffer pool(s) load completed at 250221 11:22:58
Feb 21 11:22:58 localhost.localdomain mariadbd[23156]: 2025-02-21 11:22:58 0 [Note] Server socket created on IP: &#39;0.0.0.0&#39;.
Feb 21 11:22:58 localhost.localdomain mariadbd[23156]: 2025-02-21 11:22:58 0 [Note] Server socket created on IP: &#39;::&#39;.
Feb 21 11:22:58 localhost.localdomain mariadbd[23156]: 2025-02-21 11:22:58 0 [Note] mariadbd: Event Scheduler: Loaded 0 events
Feb 21 11:22:58 localhost.localdomain mariadbd[23156]: 2025-02-21 11:22:58 0 [Note] /usr/sbin/mariadbd: ready for connections.
Feb 21 11:22:58 localhost.localdomain mariadbd[23156]: Version: &#39;11.4.5-MariaDB&#39;  socket: &#39;/var/lib/mysql/mysql.sock&#39;  port: 3306  MariaDB Server
Feb 21 11:22:59 localhost.localdomain systemd[1]: Started MariaDB 11.4.5 database server.
```
</code></pre></div>
<p>Isso confirma que seu servidor MariaDB está funcionando e pronto para outras
configurações.</p>
<h3 id="protegendo-o-banco-de-dados-mariadb">Protegendo o banco de dados MariaDB</h3>
<p>Para aumentar a segurança do seu servidor MariaDB, é essencial remover bancos de
dados de teste desnecessários, usuários anônimos e definir uma senha de raiz.
Isso pode ser feito usando o script mariadb-secure-installation, que fornece um
guia passo a passo para proteger seu banco de dados.</p>
<p>Execute o seguinte comando:</p>
<div class="admonition info">
<p class="admonition-title">Configuração segura do Mariadb</p>
<p>Red Hat and Ubuntu
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-14-1"><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">sudo mariadb-secure-installation</span>
</span></code></pre></div></p>
</div>
<div class="admonition informações">
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-15-1"><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a><span class="nt">NOTE</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">RUNNING ALL PARTS OF THIS SCRIPT IS RECOMMENDED FOR ALL MariaDB</span>
</span><span id="__span-15-2"><a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a><span class="w">      </span><span class="l l-Scalar l-Scalar-Plain">SERVERS IN PRODUCTION USE!  PLEASE READ EACH STEP CAREFULLY!</span>
</span><span id="__span-15-3"><a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a>
</span><span id="__span-15-4"><a id="__codelineno-15-4" name="__codelineno-15-4" href="#__codelineno-15-4"></a><span class="l l-Scalar l-Scalar-Plain">In order to log into MariaDB to secure it, we&#39;ll need the current</span>
</span><span id="__span-15-5"><a id="__codelineno-15-5" name="__codelineno-15-5" href="#__codelineno-15-5"></a><span class="l l-Scalar l-Scalar-Plain">password for the root user. If you&#39;ve just installed MariaDB, and</span>
</span><span id="__span-15-6"><a id="__codelineno-15-6" name="__codelineno-15-6" href="#__codelineno-15-6"></a><span class="l l-Scalar l-Scalar-Plain">haven&#39;t set the root password yet, you should just press enter here.</span>
</span><span id="__span-15-7"><a id="__codelineno-15-7" name="__codelineno-15-7" href="#__codelineno-15-7"></a>
</span><span id="__span-15-8"><a id="__codelineno-15-8" name="__codelineno-15-8" href="#__codelineno-15-8"></a><span class="nt">Enter current password for root (enter for none)</span><span class="p">:</span>
</span><span id="__span-15-9"><a id="__codelineno-15-9" name="__codelineno-15-9" href="#__codelineno-15-9"></a><span class="l l-Scalar l-Scalar-Plain">OK, successfully used password, moving on...</span>
</span><span id="__span-15-10"><a id="__codelineno-15-10" name="__codelineno-15-10" href="#__codelineno-15-10"></a>
</span><span id="__span-15-11"><a id="__codelineno-15-11" name="__codelineno-15-11" href="#__codelineno-15-11"></a><span class="l l-Scalar l-Scalar-Plain">Setting the root password or using the unix_socket ensures that nobody</span>
</span><span id="__span-15-12"><a id="__codelineno-15-12" name="__codelineno-15-12" href="#__codelineno-15-12"></a><span class="l l-Scalar l-Scalar-Plain">can log into the MariaDB root user without the proper authorisation.</span>
</span><span id="__span-15-13"><a id="__codelineno-15-13" name="__codelineno-15-13" href="#__codelineno-15-13"></a>
</span><span id="__span-15-14"><a id="__codelineno-15-14" name="__codelineno-15-14" href="#__codelineno-15-14"></a><span class="l l-Scalar l-Scalar-Plain">You already have your root account protected, so you can safely answer &#39;n&#39;.</span>
</span><span id="__span-15-15"><a id="__codelineno-15-15" name="__codelineno-15-15" href="#__codelineno-15-15"></a>
</span><span id="__span-15-16"><a id="__codelineno-15-16" name="__codelineno-15-16" href="#__codelineno-15-16"></a><span class="l l-Scalar l-Scalar-Plain">Switch to unix_socket authentication [Y/n] n</span>
</span><span id="__span-15-17"><a id="__codelineno-15-17" name="__codelineno-15-17" href="#__codelineno-15-17"></a><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">... skipping.</span>
</span><span id="__span-15-18"><a id="__codelineno-15-18" name="__codelineno-15-18" href="#__codelineno-15-18"></a>
</span><span id="__span-15-19"><a id="__codelineno-15-19" name="__codelineno-15-19" href="#__codelineno-15-19"></a><span class="l l-Scalar l-Scalar-Plain">You already have your root account protected, so you can safely answer &#39;n&#39;.</span>
</span><span id="__span-15-20"><a id="__codelineno-15-20" name="__codelineno-15-20" href="#__codelineno-15-20"></a>
</span><span id="__span-15-21"><a id="__codelineno-15-21" name="__codelineno-15-21" href="#__codelineno-15-21"></a><span class="l l-Scalar l-Scalar-Plain">Change the root password? [Y/n] y</span>
</span><span id="__span-15-22"><a id="__codelineno-15-22" name="__codelineno-15-22" href="#__codelineno-15-22"></a><span class="nt">New password</span><span class="p">:</span>
</span><span id="__span-15-23"><a id="__codelineno-15-23" name="__codelineno-15-23" href="#__codelineno-15-23"></a><span class="nt">Re-enter new password</span><span class="p">:</span>
</span><span id="__span-15-24"><a id="__codelineno-15-24" name="__codelineno-15-24" href="#__codelineno-15-24"></a><span class="l l-Scalar l-Scalar-Plain">Password updated successfully!</span>
</span><span id="__span-15-25"><a id="__codelineno-15-25" name="__codelineno-15-25" href="#__codelineno-15-25"></a><span class="l l-Scalar l-Scalar-Plain">Reloading privilege tables..</span>
</span><span id="__span-15-26"><a id="__codelineno-15-26" name="__codelineno-15-26" href="#__codelineno-15-26"></a><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">... Success!</span>
</span><span id="__span-15-27"><a id="__codelineno-15-27" name="__codelineno-15-27" href="#__codelineno-15-27"></a>
</span><span id="__span-15-28"><a id="__codelineno-15-28" name="__codelineno-15-28" href="#__codelineno-15-28"></a>
</span><span id="__span-15-29"><a id="__codelineno-15-29" name="__codelineno-15-29" href="#__codelineno-15-29"></a><span class="l l-Scalar l-Scalar-Plain">By default, a MariaDB installation has an anonymous user, allowing anyone</span>
</span><span id="__span-15-30"><a id="__codelineno-15-30" name="__codelineno-15-30" href="#__codelineno-15-30"></a><span class="l l-Scalar l-Scalar-Plain">to log into MariaDB without having to have a user account created for</span>
</span><span id="__span-15-31"><a id="__codelineno-15-31" name="__codelineno-15-31" href="#__codelineno-15-31"></a><span class="l l-Scalar l-Scalar-Plain">them.  This is intended only for testing, and to make the installation</span>
</span><span id="__span-15-32"><a id="__codelineno-15-32" name="__codelineno-15-32" href="#__codelineno-15-32"></a><span class="l l-Scalar l-Scalar-Plain">go a bit smoother.  You should remove them before moving into a</span>
</span><span id="__span-15-33"><a id="__codelineno-15-33" name="__codelineno-15-33" href="#__codelineno-15-33"></a><span class="l l-Scalar l-Scalar-Plain">production environment.</span>
</span><span id="__span-15-34"><a id="__codelineno-15-34" name="__codelineno-15-34" href="#__codelineno-15-34"></a>
</span><span id="__span-15-35"><a id="__codelineno-15-35" name="__codelineno-15-35" href="#__codelineno-15-35"></a><span class="l l-Scalar l-Scalar-Plain">Remove anonymous users? [Y/n] y</span>
</span><span id="__span-15-36"><a id="__codelineno-15-36" name="__codelineno-15-36" href="#__codelineno-15-36"></a><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">... Success!</span>
</span><span id="__span-15-37"><a id="__codelineno-15-37" name="__codelineno-15-37" href="#__codelineno-15-37"></a>
</span><span id="__span-15-38"><a id="__codelineno-15-38" name="__codelineno-15-38" href="#__codelineno-15-38"></a><span class="l l-Scalar l-Scalar-Plain">Normally, root should only be allowed to connect from &#39;localhost&#39;.  This</span>
</span><span id="__span-15-39"><a id="__codelineno-15-39" name="__codelineno-15-39" href="#__codelineno-15-39"></a><span class="l l-Scalar l-Scalar-Plain">ensures that someone cannot guess at the root password from the network.</span>
</span><span id="__span-15-40"><a id="__codelineno-15-40" name="__codelineno-15-40" href="#__codelineno-15-40"></a>
</span><span id="__span-15-41"><a id="__codelineno-15-41" name="__codelineno-15-41" href="#__codelineno-15-41"></a><span class="l l-Scalar l-Scalar-Plain">Disallow root login remotely? [Y/n] y</span>
</span><span id="__span-15-42"><a id="__codelineno-15-42" name="__codelineno-15-42" href="#__codelineno-15-42"></a><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">... Success!</span>
</span><span id="__span-15-43"><a id="__codelineno-15-43" name="__codelineno-15-43" href="#__codelineno-15-43"></a>
</span><span id="__span-15-44"><a id="__codelineno-15-44" name="__codelineno-15-44" href="#__codelineno-15-44"></a><span class="l l-Scalar l-Scalar-Plain">By default, MariaDB comes with a database named &#39;test&#39; that anyone can</span>
</span><span id="__span-15-45"><a id="__codelineno-15-45" name="__codelineno-15-45" href="#__codelineno-15-45"></a><span class="l l-Scalar l-Scalar-Plain">access.  This is also intended only for testing, and should be removed</span>
</span><span id="__span-15-46"><a id="__codelineno-15-46" name="__codelineno-15-46" href="#__codelineno-15-46"></a><span class="l l-Scalar l-Scalar-Plain">before moving into a production environment.</span>
</span><span id="__span-15-47"><a id="__codelineno-15-47" name="__codelineno-15-47" href="#__codelineno-15-47"></a>
</span><span id="__span-15-48"><a id="__codelineno-15-48" name="__codelineno-15-48" href="#__codelineno-15-48"></a><span class="l l-Scalar l-Scalar-Plain">Remove test database and access to it? [Y/n] y</span>
</span><span id="__span-15-49"><a id="__codelineno-15-49" name="__codelineno-15-49" href="#__codelineno-15-49"></a><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">- Dropping test database...</span>
</span><span id="__span-15-50"><a id="__codelineno-15-50" name="__codelineno-15-50" href="#__codelineno-15-50"></a><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">... Success!</span>
</span><span id="__span-15-51"><a id="__codelineno-15-51" name="__codelineno-15-51" href="#__codelineno-15-51"></a><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">- Removing privileges on test database...</span>
</span><span id="__span-15-52"><a id="__codelineno-15-52" name="__codelineno-15-52" href="#__codelineno-15-52"></a><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">... Success!</span>
</span><span id="__span-15-53"><a id="__codelineno-15-53" name="__codelineno-15-53" href="#__codelineno-15-53"></a>
</span><span id="__span-15-54"><a id="__codelineno-15-54" name="__codelineno-15-54" href="#__codelineno-15-54"></a><span class="l l-Scalar l-Scalar-Plain">Reloading the privilege tables will ensure that all changes made so far</span>
</span><span id="__span-15-55"><a id="__codelineno-15-55" name="__codelineno-15-55" href="#__codelineno-15-55"></a><span class="l l-Scalar l-Scalar-Plain">will take effect immediately.</span>
</span><span id="__span-15-56"><a id="__codelineno-15-56" name="__codelineno-15-56" href="#__codelineno-15-56"></a>
</span><span id="__span-15-57"><a id="__codelineno-15-57" name="__codelineno-15-57" href="#__codelineno-15-57"></a><span class="l l-Scalar l-Scalar-Plain">Reload privilege tables now? [Y/n] y</span>
</span><span id="__span-15-58"><a id="__codelineno-15-58" name="__codelineno-15-58" href="#__codelineno-15-58"></a><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">... Success!</span>
</span><span id="__span-15-59"><a id="__codelineno-15-59" name="__codelineno-15-59" href="#__codelineno-15-59"></a>
</span><span id="__span-15-60"><a id="__codelineno-15-60" name="__codelineno-15-60" href="#__codelineno-15-60"></a><span class="l l-Scalar l-Scalar-Plain">Cleaning up...</span>
</span><span id="__span-15-61"><a id="__codelineno-15-61" name="__codelineno-15-61" href="#__codelineno-15-61"></a>
</span><span id="__span-15-62"><a id="__codelineno-15-62" name="__codelineno-15-62" href="#__codelineno-15-62"></a><span class="l l-Scalar l-Scalar-Plain">All done!  If you&#39;ve completed all of the above steps, your MariaDB</span>
</span><span id="__span-15-63"><a id="__codelineno-15-63" name="__codelineno-15-63" href="#__codelineno-15-63"></a><span class="l l-Scalar l-Scalar-Plain">installation should now be secure.</span>
</span><span id="__span-15-64"><a id="__codelineno-15-64" name="__codelineno-15-64" href="#__codelineno-15-64"></a>
</span><span id="__span-15-65"><a id="__codelineno-15-65" name="__codelineno-15-65" href="#__codelineno-15-65"></a><span class="l l-Scalar l-Scalar-Plain">Thanks for using MariaDB!</span>
</span></code></pre></div>
</div>
<p>O script mariadb-secure-installation o guiará por várias etapas importantes:</p>
<ol>
<li>Defina uma senha de root, caso ainda não tenha sido definida.</li>
<li>Remover usuários anônimos.</li>
<li>Não permitir logins de raiz remotos.</li>
<li>Remova o banco de dados de teste.</li>
<li>Recarregue as tabelas de privilégios para garantir que as alterações tenham
   efeito.</li>
</ol>
<p>Depois de concluída, sua instância do MariaDB estará significativamente mais
segura. Agora você está pronto para configurar o banco de dados para o Zabbix.</p>
<hr />
<h3 id="criar-o-banco-de-dados-zabbix">Criar o banco de dados Zabbix</h3>
<p>Com o MariaDB configurado e protegido, podemos prosseguir com a criação do banco
de dados para o Zabbix. Esse banco de dados armazenará todos os dados
necessários relacionados ao seu servidor Zabbix, incluindo informações de
configuração e dados de monitoramento.</p>
<p>Siga estas etapas para criar o banco de dados do Zabbix:</p>
<p>Faça login no shell do MariaDB como usuário root: Será solicitado que você
digite a senha de root que definiu durante o processo de instalação do
mariadb-secure-installation.</p>
<div class="admonition info">
<p class="admonition-title">Entre no Mariadb como usuário root</p>
<p>Red Hat and Ubuntu
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-16-1"><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a><span class="l l-Scalar l-Scalar-Plain">mariadb -uroot -p</span>
</span></code></pre></div></p>
</div>
<p>Quando estiver conectado ao shell do MariaDB, execute o seguinte comando para
criar um banco de dados para o Zabbix:</p>
<div class="admonition info">
<p class="admonition-title">Criar o banco de dados</p>
<p><code>MariaDB [(none)]&gt; CREATE DATABASE zabbix CHARACTER SET utf8mb4 COLLATE utf8mb4_bin;</code></p>
</div>
<details class="nota" open="open">
<summary>Nota</summary>
<p>utf8mb4 is a proper implementation of UTF-8 in MySQL/MariaDB, supporting all
 Unicode characters, including emojis. The older utf8 charset in MySQL/MariaDB
 only supports up to three bytes per character and is not a true UTF-8 implementation,
 which is why utf8mb4 is recommended.</p>
</details>
<p>Esse comando cria um novo banco de dados chamado zabbix com o conjunto de
caracteres UTF-8, que é necessário para o Zabbix.</p>
<p>Crie um usuário dedicado para o Zabbix e conceda os privilégios necessários: Em
seguida, é necessário criar um usuário que o Zabbix usará para acessar o banco
de dados. Substitua a senha por uma senha forte de sua escolha.</p>
<div class="admonition info">
<p class="admonition-title">Criar usuários e conceder privilégios</p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-17-1"><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a><span class="n">MariaDB</span><span class="w"> </span><span class="p">[(</span><span class="k">none</span><span class="p">)]</span><span class="o">&gt;</span><span class="w"> </span><span class="k">CREATE</span><span class="w"> </span><span class="k">USER</span><span class="w"> </span><span class="s1">&#39;zabbix-web&#39;</span><span class="o">@</span><span class="s1">&#39;&lt;zabbix server ip&gt;&#39;</span><span class="w"> </span><span class="n">IDENTIFIED</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="s1">&#39;&lt;password&gt;&#39;</span><span class="p">;</span>
</span><span id="__span-17-2"><a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a><span class="n">MariaDB</span><span class="w"> </span><span class="p">[(</span><span class="k">none</span><span class="p">)]</span><span class="o">&gt;</span><span class="w"> </span><span class="k">CREATE</span><span class="w"> </span><span class="k">USER</span><span class="w"> </span><span class="s1">&#39;zabbix-srv&#39;</span><span class="o">@</span><span class="s1">&#39;&lt;zabbix server ip&gt;&#39;</span><span class="w"> </span><span class="n">IDENTIFIED</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="s1">&#39;&lt;password&gt;&#39;</span><span class="p">;</span>
</span><span id="__span-17-3"><a id="__codelineno-17-3" name="__codelineno-17-3" href="#__codelineno-17-3"></a><span class="n">MariaDB</span><span class="w"> </span><span class="p">[(</span><span class="k">none</span><span class="p">)]</span><span class="o">&gt;</span><span class="w"> </span><span class="k">GRANT</span><span class="w"> </span><span class="k">ALL</span><span class="w"> </span><span class="k">PRIVILEGES</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="n">zabbix</span><span class="p">.</span><span class="o">*</span><span class="w"> </span><span class="k">TO</span><span class="w"> </span><span class="s1">&#39;zabbix-srv&#39;</span><span class="o">@</span><span class="s1">&#39;&lt;zabbix server ip&gt;&#39;</span><span class="p">;</span>
</span><span id="__span-17-4"><a id="__codelineno-17-4" name="__codelineno-17-4" href="#__codelineno-17-4"></a><span class="n">MariaDB</span><span class="w"> </span><span class="p">[(</span><span class="k">none</span><span class="p">)]</span><span class="o">&gt;</span><span class="w"> </span><span class="k">GRANT</span><span class="w"> </span><span class="k">SELECT</span><span class="p">,</span><span class="w"> </span><span class="k">UPDATE</span><span class="p">,</span><span class="w"> </span><span class="k">DELETE</span><span class="p">,</span><span class="w"> </span><span class="k">INSERT</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="n">zabbix</span><span class="p">.</span><span class="o">*</span><span class="w"> </span><span class="k">TO</span><span class="w"> </span><span class="s1">&#39;zabbix-web&#39;</span><span class="o">@</span><span class="s1">&#39;&lt;zabbix server ip&gt;&#39;</span><span class="p">;</span>
</span><span id="__span-17-5"><a id="__codelineno-17-5" name="__codelineno-17-5" href="#__codelineno-17-5"></a><span class="n">MariaDB</span><span class="w"> </span><span class="p">[(</span><span class="k">none</span><span class="p">)]</span><span class="o">&gt;</span><span class="w"> </span><span class="n">FLUSH</span><span class="w"> </span><span class="k">PRIVILEGES</span><span class="p">;</span>
</span></code></pre></div>
</div>
<p>Isso cria novos usuários para o zabbix-web e o zabbix-srv, concede a eles acesso
ao banco de dados do zabbix e garante que os privilégios sejam aplicados
imediatamente.</p>
<p>Em alguns casos, especialmente ao configurar o Zabbix com o MariaDB, você pode
encontrar problemas relacionados a funções armazenadas e gatilhos se o registro
binário estiver ativado. Para resolver isso, você precisa definir a opção
log_bin_trust_function_creators como 1 no arquivo de configuração do MariaDB.
Isso permite que os usuários não raiz criem funções armazenadas e acionadores
sem exigir privilégios SUPER, que são restritos quando o registro em log binário
está ativado.</p>
<div class="admonition info">
<p class="admonition-title">Ativar temporariamente privilégios extras para usuários não root</p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-18-1"><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a><span class="n">MariaDB</span><span class="w"> </span><span class="p">[(</span><span class="k">none</span><span class="p">)]</span><span class="o">&gt;</span><span class="w"> </span><span class="k">SET</span><span class="w"> </span><span class="k">GLOBAL</span><span class="w"> </span><span class="n">log_bin_trust_function_creators</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
</span><span id="__span-18-2"><a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a><span class="n">MariaDB</span><span class="w"> </span><span class="p">[(</span><span class="k">none</span><span class="p">)]</span><span class="o">&gt;</span><span class="w"> </span><span class="n">QUIT</span>
</span></code></pre></div>
</div>
<p>Neste ponto, seu banco de dados Zabbix está pronto e você pode prosseguir com a
configuração do servidor Zabbix para se conectar ao banco de dados.</p>
<details class="aviso" open="open">
<summary>Aviso</summary>
<p>In the Zabbix documentation, it is explicitly stated that deterministic
triggers need to be created during the schema import. On MySQL and MariaDB
systems, this requires setting GLOBAL log_bin_trust_function_creators = 1
if binary logging is enabled, and you lack superuser privileges.</p>
<p>If the log_bin_trust_function_creators option is not set in the MySQL
configuration file, it will block the creation of these triggers during
schema import. This is essential because, without superuser access,
non-root users cannot create triggers or stored functions unless this setting is applied.</p>
<p>To summarize:</p>
<ul>
<li>
<p>Binary logging enabled: If binary logging is enabled and the user does not
  have superuser privileges, the creation of necessary Zabbix triggers will
  fail unless log_bin_trust_function_creators = 1 is set.</p>
</li>
<li>
<p>Solution: Add log_bin_trust_function_creators = 1 to the [mysqld] section
  in your MySQL/MariaDB configuration file or temporarily set it at runtime
  with SET GLOBAL log_bin_trust_function_creators = 1 if you have sufficient
  permissions.</p>
</li>
</ul>
<p>This ensures that Zabbix can successfully create the required triggers during
schema import without encountering privilege-related errors.</p>
</details>
<p>Se quisermos que o servidor Zabbix se conecte ao nosso banco de dados, também
precisaremos abrir a porta do firewall.</p>
<div class="admonition info">
<p class="admonition-title">Adicionar regras de firewall</p>
<p>Red Hat
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-19-1"><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a><span class="l l-Scalar l-Scalar-Plain">firewall-cmd --add-port=3306/tcp --permanent</span>
</span><span id="__span-19-2"><a id="__codelineno-19-2" name="__codelineno-19-2" href="#__codelineno-19-2"></a><span class="l l-Scalar l-Scalar-Plain">firewall-cmd --reload</span>
</span></code></pre></div></p>
<p>Ubuntu
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-20-1"><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a><span class="l l-Scalar l-Scalar-Plain">sudo ufw allow 3306/tcp</span>
</span></code></pre></div></p>
</div>
<hr />
<h3 id="preencher-o-banco-de-dados-do-zabbix-maria">Preencher o banco de dados do Zabbix Maria</h3>
<p>Com os usuários e as permissões configurados corretamente, agora você pode
preencher o banco de dados com o esquema do Zabbix criado e outros elementos
necessários. Siga estas etapas:</p>
<p>Uma das primeiras coisas que precisamos fazer é adicionar o repositório Zabbix à
nossa máquina. Isso pode parecer estranho, mas na verdade faz sentido porque
precisamos preencher nosso banco de dados com os esquemas do Zabbix.</p>
<div class="admonition info">
<p class="admonition-title">Adicionar repositório Zabbix e instalar scripts</p>
<p>Red Hat
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-21-1"><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a><span class="l l-Scalar l-Scalar-Plain">rpm -Uvh https://repo.zabbix.com/zabbix/7.2/release/rocky/9/noarch/zabbix-release-latest-7.2.el9.noarch.rpm</span>
</span><span id="__span-21-2"><a id="__codelineno-21-2" name="__codelineno-21-2" href="#__codelineno-21-2"></a><span class="l l-Scalar l-Scalar-Plain">dnf clean all</span>
</span><span id="__span-21-3"><a id="__codelineno-21-3" name="__codelineno-21-3" href="#__codelineno-21-3"></a><span class="l l-Scalar l-Scalar-Plain">dnf install zabbix-sql-scripts</span>
</span></code></pre></div></p>
<p>Ubuntu
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-22-1"><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a><span class="l l-Scalar l-Scalar-Plain">sudo wget https://repo.zabbix.com/zabbix/7.2/release/ubuntu/pool/main/z/zabbix-release/zabbix-release_latest_7.2+ubuntu24.04_all.deb</span>
</span><span id="__span-22-2"><a id="__codelineno-22-2" name="__codelineno-22-2" href="#__codelineno-22-2"></a><span class="l l-Scalar l-Scalar-Plain">sudo dpkg -i zabbix-release_latest_7.2+ubuntu24.04_all.deb</span>
</span><span id="__span-22-3"><a id="__codelineno-22-3" name="__codelineno-22-3" href="#__codelineno-22-3"></a><span class="l l-Scalar l-Scalar-Plain">sudo apt update</span>
</span><span id="__span-22-4"><a id="__codelineno-22-4" name="__codelineno-22-4" href="#__codelineno-22-4"></a><span class="l l-Scalar l-Scalar-Plain">sudo apt install zabbix-sql-scripts</span>
</span></code></pre></div></p>
</div>
<p>Agora vamos fazer o upload dos dados do zabbix (estrutura do banco de dados,
imagens, usuário, ...) para isso, usamos o usuário <code>zabbix-srv</code> e fazemos o
upload de tudo em nosso banco de dados <code>zabbix</code>.</p>
<p>!!! info "Populate the database" (Preencher o banco de dados)</p>
<div class="language-text highlight"><pre><span></span><code>Red Hat and Ubuntu
``` yaml
sudo zcat /usr/share/zabbix/sql-scripts/mysql/server.sql.gz | mariadb --default-character-set=utf8mb4 -uroot -p zabbix
```
</code></pre></div>
<details class="nota" open="open">
<summary>Nota</summary>
<p>Depending on the speed of your hardware or virtual machine, the process may
take anywhere from a few seconds to several minutes. Please be patient and
avoid cancelling the operation; just wait for the prompt to appear.</p>
</details>
<p>Faça login novamente em seu banco de dados MySQL como root</p>
<div class="admonition info">
<p class="admonition-title">Entre no mariadb como usuário root</p>
<p><code>mariadb -uroot -p</code></p>
</div>
<p>Quando a importação do esquema do Zabbix estiver concluída e você não precisar
mais do parâmetro global log_bin_trust_function_creators, é uma boa prática
removê-lo por motivos de segurança.</p>
<p>Para reverter a alteração e definir o parâmetro global de volta para 0, use o
seguinte comando no shell do MariaDB:</p>
<div class="admonition info">
<p class="admonition-title">Desativar a função log_bin_trust novamente</p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-24-1"><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">SET</span><span class="w"> </span><span class="k">GLOBAL</span><span class="w"> </span><span class="n">log_bin_trust_function_creators</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
</span><span id="__span-24-2"><a id="__codelineno-24-2" name="__codelineno-24-2" href="#__codelineno-24-2"></a><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">001</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span>
</span></code></pre></div>
</div>
<p>Esse comando desativará a configuração, garantindo que a postura de segurança
dos servidores permaneça robusta.</p>
<p>Isso conclui nossa instalação do MariaDB</p>
<hr />
<h2 id="instalacao-do-banco-de-dados-postgresql">Instalação do banco de dados PostgreSQL</h2>
<p>Para nossa configuração de banco de dados com o PostgreSQL, precisamos primeiro
adicionar nosso repositório PostgreSQL ao sistema. Até o momento, o PostgreSQL
13-17 é suportado, mas o melhor é dar uma olhada antes de instalá-lo, pois as
novas versões podem ser suportadas e as mais antigas podem não ser suportadas
tanto pelo Zabbix quanto pelo PostgreSQL. Normalmente, é uma boa ideia usar a
versão mais recente que é suportada pelo Zabbix. O Zabbix também suporta a
extensão TimescaleDB, sobre a qual falaremos mais tarde. Como você verá, a
configuração do PostgreSQL é muito diferente da do MySQL, não apenas na
instalação, mas também na proteção do banco de dados.</p>
<p>A tabela de compatibilidade pode ser encontrada em
<a href="https://docs.timescale.com/self-hosted/latest/upgrades/upgrade-pg/">https://docs.timescale.com/self-hosted/latest/upgrades/upgrade-pg/</a></p>
<hr />
<h3 id="adicionar-o-repositorio-postgresql">Adicionar o repositório PostgreSQL</h3>
<p>Então, vamos começar configurando nosso repositório PostgreSQL com os seguintes
comandos.</p>
<div class="admonition info">
<p class="admonition-title">Adicionar repositório PostgreSQL</p>
<p>Red Hat
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-25-1"><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a><span class="nt">Install the repository RPM</span><span class="p">:</span>
</span><span id="__span-25-2"><a id="__codelineno-25-2" name="__codelineno-25-2" href="#__codelineno-25-2"></a><span class="l l-Scalar l-Scalar-Plain">dnf install https://download.postgresql.org/pub/repos/yum/reporpms/EL-9-x86_64/pgdg-redhat-repo-latest.noarch.rpm</span>
</span><span id="__span-25-3"><a id="__codelineno-25-3" name="__codelineno-25-3" href="#__codelineno-25-3"></a>
</span><span id="__span-25-4"><a id="__codelineno-25-4" name="__codelineno-25-4" href="#__codelineno-25-4"></a><span class="nt">Disable the built-in PostgreSQL module</span><span class="p">:</span>
</span><span id="__span-25-5"><a id="__codelineno-25-5" name="__codelineno-25-5" href="#__codelineno-25-5"></a><span class="l l-Scalar l-Scalar-Plain">dnf -qy module disable postgresql</span>
</span></code></pre></div></p>
<p>Ubuntu
<div class="language-text highlight"><pre><span></span><code><span id="__span-26-1"><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a># Import the repository signing key:
</span><span id="__span-26-2"><a id="__codelineno-26-2" name="__codelineno-26-2" href="#__codelineno-26-2"></a>sudo apt install curl ca-certificates
</span><span id="__span-26-3"><a id="__codelineno-26-3" name="__codelineno-26-3" href="#__codelineno-26-3"></a>sudo install -d /usr/share/postgresql-common/pgdg
</span><span id="__span-26-4"><a id="__codelineno-26-4" name="__codelineno-26-4" href="#__codelineno-26-4"></a>sudo curl -o /usr/share/postgresql-common/pgdg/apt.postgresql.org.asc --fail https://www.postgresql.org/media/keys/ACCC4CF8.asc
</span><span id="__span-26-5"><a id="__codelineno-26-5" name="__codelineno-26-5" href="#__codelineno-26-5"></a>
</span><span id="__span-26-6"><a id="__codelineno-26-6" name="__codelineno-26-6" href="#__codelineno-26-6"></a># Create the repository configuration file:
</span><span id="__span-26-7"><a id="__codelineno-26-7" name="__codelineno-26-7" href="#__codelineno-26-7"></a>sudo sh -c &#39;echo &quot;deb [signed-by=/usr/share/postgresql-common/pgdg/apt.postgresql.org.asc] https://apt.postgresql.org/pub/repos/apt $(lsb_release -cs)-pgdg main&quot; &gt; /etc/apt/sources.list.d/pgdg.list&#39;
</span><span id="__span-26-8"><a id="__codelineno-26-8" name="__codelineno-26-8" href="#__codelineno-26-8"></a>
</span><span id="__span-26-9"><a id="__codelineno-26-9" name="__codelineno-26-9" href="#__codelineno-26-9"></a># Update the package lists:
</span><span id="__span-26-10"><a id="__codelineno-26-10" name="__codelineno-26-10" href="#__codelineno-26-10"></a>sudo apt update
</span></code></pre></div></p>
</div>
<h3 id="instalar-os-bancos-de-dados-postgresql">Instalar os bancos de dados PostgreSQL</h3>
<div class="admonition info">
<p class="admonition-title">Instalar o servidor Postgres</p>
<p>Red Hat
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-27-1"><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a><span class="c1"># Install Postgres server:</span>
</span><span id="__span-27-2"><a id="__codelineno-27-2" name="__codelineno-27-2" href="#__codelineno-27-2"></a><span class="l l-Scalar l-Scalar-Plain">dnf install postgresql17-server</span>
</span><span id="__span-27-3"><a id="__codelineno-27-3" name="__codelineno-27-3" href="#__codelineno-27-3"></a>
</span><span id="__span-27-4"><a id="__codelineno-27-4" name="__codelineno-27-4" href="#__codelineno-27-4"></a><span class="l l-Scalar l-Scalar-Plain"># Initialize the database and enable automatic start</span><span class="p p-Indicator">:</span>
</span><span id="__span-27-5"><a id="__codelineno-27-5" name="__codelineno-27-5" href="#__codelineno-27-5"></a><span class="l l-Scalar l-Scalar-Plain">/usr/pgsql-17/bin/postgresql-17-setup initdb</span>
</span><span id="__span-27-6"><a id="__codelineno-27-6" name="__codelineno-27-6" href="#__codelineno-27-6"></a><span class="l l-Scalar l-Scalar-Plain">systemctl enable postgresql-17 --now</span>
</span></code></pre></div></p>
<p>Ubuntu
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-28-1"><a id="__codelineno-28-1" name="__codelineno-28-1" href="#__codelineno-28-1"></a><span class="l l-Scalar l-Scalar-Plain">sudo apt install postgresql-17</span>
</span></code></pre></div></p>
</div>
<p>Para atualizar seu sistema operacional, execute o seguinte comando:</p>
<div class="admonition info">
<p class="admonition-title">atualizar o sistema operacional</p>
<p>Red Hat
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-29-1"><a id="__codelineno-29-1" name="__codelineno-29-1" href="#__codelineno-29-1"></a><span class="l l-Scalar l-Scalar-Plain">dnf update</span>
</span></code></pre></div></p>
<p>Ubuntu
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-30-1"><a id="__codelineno-30-1" name="__codelineno-30-1" href="#__codelineno-30-1"></a><span class="l l-Scalar l-Scalar-Plain">sudo apt update &amp;&amp; sudo apt upgrade</span>
</span></code></pre></div></p>
</div>
<hr />
<h3 id="protegendo-o-banco-de-dados-postgresql">Protegendo o banco de dados PostgreSQL</h3>
<p>O PostgreSQL lida com as permissões de acesso de forma diferente do MySQL e do
MariaDB. O PostgreSQL depende de um arquivo chamado pg_hba.conf para gerenciar
quem pode acessar o banco de dados, de onde e qual método de criptografia é
usado para autenticação.</p>
<details class="nota" open="open">
<summary>Nota</summary>
<p>Client authentication in PostgreSQL is configured through the pg_hba.conf
file, where "HBA" stands for Host-Based Authentication. This file specifies
which users can access the database, from which hosts, and how they are authenticated.
For further details, you can refer to the official PostgreSQL documentation."
<a href="https://www.postgresql.org/docs/current/auth-pg-hba-conf.html">https://www.postgresql.org/docs/current/auth-pg-hba-conf.html</a></p>
</details>
<p>Adicione as seguintes linhas, a ordem aqui é importante.</p>
<div class="admonition info">
<p class="admonition-title">Editar o arquivo pg_hba</p>
<p>Red hat
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-31-1"><a id="__codelineno-31-1" name="__codelineno-31-1" href="#__codelineno-31-1"></a><span class="l l-Scalar l-Scalar-Plain">vi /var/lib/pgsql/17/data/pg_hba.conf</span>
</span></code></pre></div></p>
<p>Ubuntu
<div class="language-text highlight"><pre><span></span><code><span id="__span-32-1"><a id="__codelineno-32-1" name="__codelineno-32-1" href="#__codelineno-32-1"></a>sudo vi /etc/postgresql/17/main/pg_hba.conf
</span></code></pre></div></p>
</div>
<p>O resultado deve ser semelhante a :</p>
<div class="admonition info">
<p class="admonition-title">exemplo pg_hba</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-33-1"><a id="__codelineno-33-1" name="__codelineno-33-1" href="#__codelineno-33-1"></a><span class="c1"># &quot;local&quot; is for Unix domain socket connections only</span>
</span><span id="__span-33-2"><a id="__codelineno-33-2" name="__codelineno-33-2" href="#__codelineno-33-2"></a><span class="l l-Scalar l-Scalar-Plain">local    zabbix     zabbix-srv                                                              scram-sha-256</span>
</span><span id="__span-33-3"><a id="__codelineno-33-3" name="__codelineno-33-3" href="#__codelineno-33-3"></a><span class="l l-Scalar l-Scalar-Plain">local    all            all                                                                            peer</span>
</span><span id="__span-33-4"><a id="__codelineno-33-4" name="__codelineno-33-4" href="#__codelineno-33-4"></a><span class="l l-Scalar l-Scalar-Plain"># IPv4 local connections</span>
</span><span id="__span-33-5"><a id="__codelineno-33-5" name="__codelineno-33-5" href="#__codelineno-33-5"></a><span class="l l-Scalar l-Scalar-Plain">host     zabbix     zabbix-srv          &lt;ip from zabbix server/24&gt;     scram-sha-256</span>
</span><span id="__span-33-6"><a id="__codelineno-33-6" name="__codelineno-33-6" href="#__codelineno-33-6"></a><span class="l l-Scalar l-Scalar-Plain">host     zabbix     zabbix-web        &lt;ip from zabbix server/24&gt;     scram-sha-256</span>
</span><span id="__span-33-7"><a id="__codelineno-33-7" name="__codelineno-33-7" href="#__codelineno-33-7"></a><span class="l l-Scalar l-Scalar-Plain">host     all            all                         127.0.0.1/32                            scram-sha-256</span>
</span></code></pre></div>
</div>
<p>Depois de alterarmos o arquivo pg_hba, não se esqueça de reiniciar o postgres,
caso contrário as configurações não serão aplicadas. Mas antes de reiniciarmos,
vamos também editar o arquivo postgresql.conf e permitir que nosso banco de
dados escute em nossa interface de rede as conexões de entrada do servidor
zabbix. O Postgresql padrão só permitirá conexões do soquete.</p>
<div class="admonition info">
<p class="admonition-title">Editar arquivo postgresql.conf</p>
<p>Red Hat
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-34-1"><a id="__codelineno-34-1" name="__codelineno-34-1" href="#__codelineno-34-1"></a><span class="l l-Scalar l-Scalar-Plain">vi /var/lib/pgsql/17/data/postgresql.conf</span>
</span></code></pre></div></p>
<p>Ubuntu
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-35-1"><a id="__codelineno-35-1" name="__codelineno-35-1" href="#__codelineno-35-1"></a><span class="l l-Scalar l-Scalar-Plain">sudo vi /etc/postgresql/17/main/postgresql.conf</span>
</span></code></pre></div></p>
</div>
<p>Para configurar o PostgreSQL para escutar em todas as interfaces de rede, você
precisa modificar o arquivo <code>postgresql.conf</code>. Localize a seguinte linha:</p>
<div class="admonition informações">
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-36-1"><a id="__codelineno-36-1" name="__codelineno-36-1" href="#__codelineno-36-1"></a><span class="c1">#listen_addresses = &#39;localhost&#39;</span>
</span></code></pre></div>
</div>
<p>e substituí-la por:</p>
<div class="admonition informações">
<p><code>listen_addresses = '*'</code></p>
</div>
<details class="nota" open="open">
<summary>Nota</summary>
<p>This will enable PostgreSQL to accept connections from any network interface,
not just the local machine. In production it's probably a good idea to limit
who can connect to the DB.</p>
</details>
<p>Depois de fazer essa alteração, reinicie o serviço PostgreSQL para aplicar as
novas configurações:</p>
<p>!!! info "restart the DB server" (reinicie o servidor de banco de dados)</p>
<div class="language-text highlight"><pre><span></span><code>Red Hat
``` yaml
systemctl restart postgresql-17
```

Ubuntu
``` yaml
sudo systemctl restart postgresql
```
</code></pre></div>
<p>Se o serviço não for reiniciado, verifique se há erros de sintaxe no arquivo
pg_hba.conf, pois entradas incorretas podem impedir a inicialização do
PostgreSQL.</p>
<p>Em seguida, para preparar sua instância do PostgreSQL para o Zabbix, você
precisará criar as tabelas de banco de dados necessárias. Comece instalando o
repositório do Zabbix, como você fez para o servidor Zabbix. Em seguida, instale
o pacote Zabbix apropriado que contém as tabelas predefinidas, as imagens, os
ícones e outros elementos de banco de dados necessários para o aplicativo
Zabbix.</p>
<hr />
<h3 id="criar-o-banco-de-dados-do-zabbix-com-o-postgresql">Criar o banco de dados do Zabbix com o PostgreSQL</h3>
<p>Para começar, adicione o repositório Zabbix ao seu sistema executando os
seguintes comandos:</p>
<div class="admonition info">
<p class="admonition-title">Adicionar pacote de repositórios de esquemas do zabbix</p>
<p>Red Hat
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-39-1"><a id="__codelineno-39-1" name="__codelineno-39-1" href="#__codelineno-39-1"></a><span class="l l-Scalar l-Scalar-Plain">dnf install https://repo.zabbix.com/zabbix/7.2/release/rocky/9/noarch/zabbix-release-latest-7.2.el9.noarch.rpm</span>
</span><span id="__span-39-2"><a id="__codelineno-39-2" name="__codelineno-39-2" href="#__codelineno-39-2"></a><span class="l l-Scalar l-Scalar-Plain">dnf install zabbix-sql-scripts</span>
</span></code></pre></div></p>
<p>Ubuntu
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-40-1"><a id="__codelineno-40-1" name="__codelineno-40-1" href="#__codelineno-40-1"></a><span class="l l-Scalar l-Scalar-Plain">sudo wget https://repo.zabbix.com/zabbix/7.2/release/ubuntu/pool/main/z/zabbix-release/zabbix-release_latest_7.2+ubuntu24.04_all.deb</span>
</span><span id="__span-40-2"><a id="__codelineno-40-2" name="__codelineno-40-2" href="#__codelineno-40-2"></a><span class="l l-Scalar l-Scalar-Plain">sudo dpkg -i zabbix-release_latest_7.2+ubuntu24.04_all.deb</span>
</span><span id="__span-40-3"><a id="__codelineno-40-3" name="__codelineno-40-3" href="#__codelineno-40-3"></a><span class="l l-Scalar l-Scalar-Plain">sudo apt update</span>
</span><span id="__span-40-4"><a id="__codelineno-40-4" name="__codelineno-40-4" href="#__codelineno-40-4"></a><span class="l l-Scalar l-Scalar-Plain">sudo apt install zabbix-sql-scripts</span>
</span></code></pre></div></p>
</div>
<p>Com os pacotes necessários instalados, agora você está pronto para criar os
usuários do Zabbix para o servidor e o front-end.</p>
<p>Primeiro, mude para o usuário <code>postgres</code> e crie o usuário do banco de dados do
servidor Zabbix:</p>
<div class="admonition info">
<p class="admonition-title">criar usuários do servidor</p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-41-1"><a id="__codelineno-41-1" name="__codelineno-41-1" href="#__codelineno-41-1"></a><span class="n">sudo</span><span class="w"> </span><span class="n">su</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">postgres</span>
</span><span id="__span-41-2"><a id="__codelineno-41-2" name="__codelineno-41-2" href="#__codelineno-41-2"></a><span class="k">createuser</span><span class="w"> </span><span class="c1">--pwprompt zabbix-srv</span>
</span><span id="__span-41-3"><a id="__codelineno-41-3" name="__codelineno-41-3" href="#__codelineno-41-3"></a><span class="n">Enter</span><span class="w"> </span><span class="n">password</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="k">role</span><span class="p">:</span><span class="w"> </span><span class="o">&lt;</span><span class="n">server</span><span class="o">-</span><span class="n">password</span><span class="o">&gt;</span>
</span><span id="__span-41-4"><a id="__codelineno-41-4" name="__codelineno-41-4" href="#__codelineno-41-4"></a><span class="n">Enter</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">again</span><span class="p">:</span><span class="w"> </span><span class="o">&lt;</span><span class="n">server</span><span class="o">-</span><span class="n">password</span><span class="o">&gt;</span>
</span></code></pre></div>
</div>
<p>Em seguida, crie o usuário front-end do Zabbix, que será usado para se conectar
ao banco de dados:</p>
<div class="admonition info">
<p class="admonition-title">Criar usuário de front-end</p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-42-1"><a id="__codelineno-42-1" name="__codelineno-42-1" href="#__codelineno-42-1"></a><span class="k">createuser</span><span class="w"> </span><span class="c1">--pwprompt zabbix-web</span>
</span><span id="__span-42-2"><a id="__codelineno-42-2" name="__codelineno-42-2" href="#__codelineno-42-2"></a><span class="n">Enter</span><span class="w"> </span><span class="n">password</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="k">role</span><span class="p">:</span><span class="w"> </span><span class="o">&lt;</span><span class="n">frontend</span><span class="o">-</span><span class="n">password</span><span class="o">&gt;</span>
</span><span id="__span-42-3"><a id="__codelineno-42-3" name="__codelineno-42-3" href="#__codelineno-42-3"></a><span class="n">Enter</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">again</span><span class="p">:</span><span class="w"> </span><span class="o">&lt;</span><span class="n">frontend</span><span class="o">-</span><span class="n">password</span><span class="o">&gt;</span>
</span></code></pre></div>
</div>
<p>Depois de criar os usuários, é necessário preparar o esquema do banco de dados.
Como root ou usuário comum, descompacte os arquivos de esquema necessários
executando o seguinte comando:</p>
<div class="admonition info">
<p class="admonition-title">Descompacte o patch do DB</p>
<p>Red Hat
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-43-1"><a id="__codelineno-43-1" name="__codelineno-43-1" href="#__codelineno-43-1"></a><span class="l l-Scalar l-Scalar-Plain">gzip -d /usr/share/zabbix/sql-scripts/postgresql/server.sql.gz</span>
</span></code></pre></div></p>
<p>Ubuntu
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-44-1"><a id="__codelineno-44-1" name="__codelineno-44-1" href="#__codelineno-44-1"></a><span class="l l-Scalar l-Scalar-Plain">sudo gzip -d /usr/share/zabbix/sql-scripts/postgresql/server.sql.gz</span>
</span></code></pre></div></p>
</div>
<details class="nota" open="open">
<summary>Nota</summary>
<p>Zabbix seems to like to change the locations of the script to populate the
DB every version or in between versions. If you encounter an error take a
look at the Zabbix documentation there is a good chance that some location was
changed.</p>
</details>
<p>Isso extrairá o esquema do banco de dados necessário para o servidor Zabbix.</p>
<p>Agora que os usuários foram criados, a próxima etapa é criar o banco de dados do
Zabbix. Primeiro, mude para o usuário <code>postgres</code> e execute o seguinte comando
para criar o banco de dados com o proprietário definido como zabbix-srv:</p>
<div class="admonition info">
<p class="admonition-title">Criar banco de dados</p>
<p>Red Hat
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-45-1"><a id="__codelineno-45-1" name="__codelineno-45-1" href="#__codelineno-45-1"></a><span class="l l-Scalar l-Scalar-Plain">su - postgres</span>
</span><span id="__span-45-2"><a id="__codelineno-45-2" name="__codelineno-45-2" href="#__codelineno-45-2"></a><span class="l l-Scalar l-Scalar-Plain">createdb -E Unicode -O zabbix-srv zabbix</span>
</span><span id="__span-45-3"><a id="__codelineno-45-3" name="__codelineno-45-3" href="#__codelineno-45-3"></a><span class="l l-Scalar l-Scalar-Plain">exit</span>
</span></code></pre></div></p>
<p>Ubuntu
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-46-1"><a id="__codelineno-46-1" name="__codelineno-46-1" href="#__codelineno-46-1"></a><span class="l l-Scalar l-Scalar-Plain">sudo su - postgres</span>
</span><span id="__span-46-2"><a id="__codelineno-46-2" name="__codelineno-46-2" href="#__codelineno-46-2"></a><span class="l l-Scalar l-Scalar-Plain">createdb -E Unicode -O zabbix-srv zabbix</span>
</span><span id="__span-46-3"><a id="__codelineno-46-3" name="__codelineno-46-3" href="#__codelineno-46-3"></a><span class="l l-Scalar l-Scalar-Plain">exit</span>
</span></code></pre></div></p>
</div>
<p>Depois que o banco de dados for criado, verifique a conexão e certifique-se de
que a sessão correta do usuário esteja ativa. Para fazer isso, faça login no
banco de dados zabbix usando o usuário zabbix-srv:</p>
<div class="admonition info">
<p class="admonition-title">Faça login como usuário zabbix-srv</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-47-1"><a id="__codelineno-47-1" name="__codelineno-47-1" href="#__codelineno-47-1"></a><span class="l l-Scalar l-Scalar-Plain">psql -d zabbix -U zabbix-srv</span>
</span></code></pre></div>
</div>
<p>Depois de fazer login, execute a seguinte consulta SQL para confirmar que tanto
o <code>session_user</code> quanto o <code>current_user</code> estão definidos como <code>zabbix-srv</code>:</p>
<div class="admonition informações">
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-48-1"><a id="__codelineno-48-1" name="__codelineno-48-1" href="#__codelineno-48-1"></a><span class="l l-Scalar l-Scalar-Plain">zabbix=&gt; SELECT session_user, current_user;</span>
</span><span id="__span-48-2"><a id="__codelineno-48-2" name="__codelineno-48-2" href="#__codelineno-48-2"></a><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">session_user | current_user</span>
</span><span id="__span-48-3"><a id="__codelineno-48-3" name="__codelineno-48-3" href="#__codelineno-48-3"></a><span class="l l-Scalar l-Scalar-Plain">--------------+--------------</span>
</span><span id="__span-48-4"><a id="__codelineno-48-4" name="__codelineno-48-4" href="#__codelineno-48-4"></a><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">zabbix-srv   | zabbix-srv</span>
</span><span id="__span-48-5"><a id="__codelineno-48-5" name="__codelineno-48-5" href="#__codelineno-48-5"></a><span class="l l-Scalar l-Scalar-Plain">(1 row)</span>
</span></code></pre></div>
</div>
<p>Se a saída corresponder, você se conectou com sucesso ao banco de dados com o
usuário correto.</p>
<p>O PostgreSQL de fato difere significativamente do MySQL ou do MariaDB em vários
aspectos, e um dos principais recursos que o diferencia é o uso de esquemas. Ao
contrário do MySQL, em que os bancos de dados são mais independentes, o sistema
de esquema do PostgreSQL fornece um ambiente estruturado e multiusuário em um
único banco de dados.</p>
<p>Os esquemas funcionam como contêineres lógicos dentro de um banco de dados,
permitindo que vários usuários ou aplicativos acessem e gerenciem dados de forma
independente, sem conflitos. Esse recurso é especialmente valioso em ambientes
em que vários usuários ou aplicativos precisam interagir com o mesmo banco de
dados simultaneamente. Cada usuário ou aplicativo pode ter seu próprio esquema,
evitando interferências acidentais nos dados dos outros.</p>
<details class="nota" open="open">
<summary>Nota</summary>
<p>PostgreSQL comes with a default schema, typically called public, but it's in
general best practice to create custom schemas to better organize and separate
database objects, especially in complex or multi-user environments.</p>
<p>For more in-depth information, I recommend checking out the detailed guide at
this URI, <a href="https://hevodata.com/learn/postgresql-schema/#schema">https://hevodata.com/learn/postgresql-schema/#schema</a>
which explains the benefits and use cases for schemas in PostgreSQL.</p>
</details>
<p>Para finalizar a configuração do banco de dados para o Zabbix, precisamos
configurar as permissões do esquema para os usuários <code>zabbix-srv</code> e
<code>zabbix-web</code>.</p>
<p>Primeiro, criamos um esquema personalizado chamado <code>zabbix_server</code> e atribuímos
a propriedade ao usuário <code>zabbix-srv</code>:</p>
<p>!!! info "create the db schema" (criar o esquema do banco de dados)</p>
<div class="language-text highlight"><pre><span></span><code>```psql
zabbix=&gt; CREATE SCHEMA zabbix_server AUTHORIZATION &quot;zabbix-srv&quot;;
```
</code></pre></div>
<p>Em seguida, definimos o caminho de pesquisa <code>` para</code>zabbix_server` schema para
que seja o padrão da sessão atual:</p>
<div class="admonition info">
<p class="admonition-title">Definir caminho de pesquisa</p>
<div class="language-psql highlight"><pre><span></span><code><span id="__span-50-1"><a id="__codelineno-50-1" name="__codelineno-50-1" href="#__codelineno-50-1"></a><span class="gp">zabbix=&gt;</span><span class="w"> </span><span class="k">SET</span><span class="w"> </span><span class="n">search_path</span><span class="w"> </span><span class="k">TO</span><span class="w"> </span><span class="s s-Name">&quot;zabbix_server&quot;</span><span class="p">;</span>
</span></code></pre></div>
</div>
<p>Para confirmar a configuração do esquema, você pode listar os esquemas
existentes:</p>
<p>!!! info "verify schema access" (verificar acesso ao esquema)</p>
<div class="language-text highlight"><pre><span></span><code>```psql
zabbix=&gt; \dn
          List of schemas
     Name      |       Owner
---------------+-------------------
 public        | pg_database_owner
 zabbix_server | zabbix-srv
(2 rows)
```
</code></pre></div>
<p>Neste ponto, o usuário <code>zabbix-srv</code> tem acesso total ao esquema, mas o usuário
<code>zabbix-web</code> ainda precisa de permissões apropriadas para se conectar e
interagir com o banco de dados. Primeiro, concedemos a <code>USAGE</code> privilégios no
esquema para permitir que <code>zabbix-web</code> se conecte:</p>
<div class="admonition info">
<p class="admonition-title">Conceder acesso ao esquema para o usuário zabbix-web</p>
<div class="language-psql highlight"><pre><span></span><code><span id="__span-52-1"><a id="__codelineno-52-1" name="__codelineno-52-1" href="#__codelineno-52-1"></a><span class="gp">zabbix=#</span><span class="w"> </span><span class="k">GRANT</span><span class="w"> </span><span class="n">USAGE</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="k">SCHEMA</span><span class="w"> </span><span class="n">zabbix_server</span><span class="w"> </span><span class="k">TO</span><span class="w"> </span><span class="s s-Name">&quot;zabbix-web&quot;</span><span class="p">;</span>
</span></code></pre></div>
</div>
<hr />
<h3 id="preencher-o-banco-de-dados-postgresql-do-zabbix">Preencher o banco de dados PostgreSQL do Zabbix</h3>
<p>Agora, o usuário <code>zabbix-web</code> tem acesso adequado para interagir com o esquema,
mantendo a segurança ao limitar as permissões às operações essenciais.</p>
<p>Com os usuários e as permissões configurados corretamente, agora você pode
preencher o banco de dados com o esquema do Zabbix criado e outros elementos
necessários. Siga estas etapas:</p>
<ul>
<li>Execute o arquivo SQL para preencher o banco de dados. Execute o seguinte
  comando no shell <code>psql</code>:</li>
</ul>
<details class="aviso" open="open">
<summary>Aviso</summary>
<p>Make sure you did previous steps carefully so that you have selected the correct
search_path.</p>
</details>
<p>!!! info "upload the DB schema to db zabbix" (carregar o esquema do banco de
dados para o banco de dados zabbix)</p>
<div class="language-text highlight"><pre><span></span><code>```sql
sql zabbix=# \i /usr/share/zabbix/sql-scripts/postgresql/server.sql
```
</code></pre></div>
<details class="aviso" open="open">
<summary>Aviso</summary>
<p>Depending on your hardware or VM performance, this process can take anywhere
from a few seconds to several minutes. Please be patient and avoid cancelling
the operation.</p>
</details>
<ul>
<li>Monitore o progresso à medida que o script é executado. Você verá uma saída
  semelhante a:</li>
</ul>
<div class="admonition info">
<p class="admonition-title">Exemplo de saída</p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-54-1"><a id="__codelineno-54-1" name="__codelineno-54-1" href="#__codelineno-54-1"></a><span class="n">zabbix</span><span class="o">=&gt;</span><span class="w"> </span><span class="err">\</span><span class="n">i</span><span class="w"> </span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="k">share</span><span class="o">/</span><span class="n">zabbix</span><span class="o">/</span><span class="k">sql</span><span class="o">-</span><span class="n">scripts</span><span class="o">/</span><span class="n">postgresql</span><span class="o">/</span><span class="n">server</span><span class="p">.</span><span class="k">sql</span>
</span><span id="__span-54-2"><a id="__codelineno-54-2" name="__codelineno-54-2" href="#__codelineno-54-2"></a><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span>
</span><span id="__span-54-3"><a id="__codelineno-54-3" name="__codelineno-54-3" href="#__codelineno-54-3"></a><span class="k">CREATE</span><span class="w"> </span><span class="k">INDEX</span>
</span><span id="__span-54-4"><a id="__codelineno-54-4" name="__codelineno-54-4" href="#__codelineno-54-4"></a><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span>
</span><span id="__span-54-5"><a id="__codelineno-54-5" name="__codelineno-54-5" href="#__codelineno-54-5"></a><span class="k">CREATE</span><span class="w"> </span><span class="k">INDEX</span>
</span><span id="__span-54-6"><a id="__codelineno-54-6" name="__codelineno-54-6" href="#__codelineno-54-6"></a><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span>
</span><span id="__span-54-7"><a id="__codelineno-54-7" name="__codelineno-54-7" href="#__codelineno-54-7"></a><span class="p">...</span>
</span><span id="__span-54-8"><a id="__codelineno-54-8" name="__codelineno-54-8" href="#__codelineno-54-8"></a><span class="p">...</span>
</span><span id="__span-54-9"><a id="__codelineno-54-9" name="__codelineno-54-9" href="#__codelineno-54-9"></a><span class="p">...</span>
</span><span id="__span-54-10"><a id="__codelineno-54-10" name="__codelineno-54-10" href="#__codelineno-54-10"></a><span class="k">INSERT</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">10444</span>
</span><span id="__span-54-11"><a id="__codelineno-54-11" name="__codelineno-54-11" href="#__codelineno-54-11"></a><span class="k">DELETE</span><span class="w"> </span><span class="mi">90352</span>
</span><span id="__span-54-12"><a id="__codelineno-54-12" name="__codelineno-54-12" href="#__codelineno-54-12"></a><span class="k">COMMIT</span>
</span></code></pre></div>
</div>
<p>Quando o script for concluído e você retornar ao prompt <code>zabbix=#</code>, o banco de
dados deverá ser preenchido com sucesso com todas as tabelas, esquemas, imagens
e outros elementos necessários para o Zabbix.</p>
<p>Entretanto, <code>zabbix-web</code> ainda não pode executar nenhuma operação nas tabelas ou
sequências. Para permitir a interação básica dos dados sem conceder muitos
privilégios, conceda as seguintes permissões:</p>
<ul>
<li>Para tabelas: SELECT, INSERT, UPDATE e DELETE.</li>
<li>Para sequências: SELECT e UPDATE.</li>
</ul>
<p>!!! info "Grant rights on the schema to user zabbix-web" (Conceder direitos
sobre o esquema ao usuário zabbix-web)</p>
<div class="language-text highlight"><pre><span></span><code>```psql
zabbix=# GRANT SELECT, INSERT, UPDATE, DELETE ON ALL TABLES IN SCHEMA zabbix_server
TO &quot;zabbix-web&quot;;
zabbix=# GRANT SELECT, UPDATE ON ALL SEQUENCES IN SCHEMA zabbix_server TO &quot;zabbix-web&quot;;
```
</code></pre></div>
<p>Verifique se os direitos estão corretos no esquema:</p>
<div class="admonition info">
<p class="admonition-title">Exemplo de direitos de esquema</p>
<div class="language-psql highlight"><pre><span></span><code><span id="__span-56-1"><a id="__codelineno-56-1" name="__codelineno-56-1" href="#__codelineno-56-1"></a><span class="gp">zabbix=&gt;</span><span class="w"> </span><span class="kp">\dn+</span>
</span><span id="__span-56-2"><a id="__codelineno-56-2" name="__codelineno-56-2" href="#__codelineno-56-2"></a><span class="go">                                           List of schemas</span>
</span><span id="__span-56-3"><a id="__codelineno-56-3" name="__codelineno-56-3" href="#__codelineno-56-3"></a><span class="go">     Name      |       Owner       |           Access privileges            |      Description</span>
</span><span id="__span-56-4"><a id="__codelineno-56-4" name="__codelineno-56-4" href="#__codelineno-56-4"></a><span class="go">---------------+-------------------+----------------------------------------+------------------------</span>
</span><span id="__span-56-5"><a id="__codelineno-56-5" name="__codelineno-56-5" href="#__codelineno-56-5"></a><span class="go"> public        | pg_database_owner | pg_database_owner=UC/pg_database_owner+| standard public schema</span>
</span><span id="__span-56-6"><a id="__codelineno-56-6" name="__codelineno-56-6" href="#__codelineno-56-6"></a><span class="go">               |                   | =U/pg_database_owner                   |</span>
</span><span id="__span-56-7"><a id="__codelineno-56-7" name="__codelineno-56-7" href="#__codelineno-56-7"></a><span class="go"> zabbix_server | zabbix-srv        | &quot;zabbix-srv&quot;=UC/&quot;zabbix-srv&quot;          +|</span>
</span><span id="__span-56-8"><a id="__codelineno-56-8" name="__codelineno-56-8" href="#__codelineno-56-8"></a><span class="go">               |                   | &quot;zabbix-web&quot;=U/&quot;zabbix-srv&quot;            |</span>
</span></code></pre></div>
</div>
<details class="nota" open="open">
<summary>Nota</summary>
<p>If you encounter the following error during the SQL import:
<code>vbnet psql:/usr/share/zabbix/sql-scripts/postgresql/server.sql:7: ERROR: no
    schema has been selected to create in</code> It indicates that the search_path setting
might not have been correctly applied. This setting is crucial because it specifies
the schema where the tables and other objects should be created. By correctly
setting the search path, you ensure that the SQL script will create tables
and other objects in the intended schema.</p>
</details>
<p>Para garantir que as tabelas do Zabbix foram criadas com êxito e têm as
permissões corretas, você pode verificar a lista de tabelas e sua propriedade
usando o comando <code>psql</code>:</p>
<ul>
<li>Listar as tabelas: Use o seguinte comando para listar todas as tabelas no
  esquema <code>zabbix_server</code>:</li>
</ul>
<div class="admonition info">
<p class="admonition-title">Listar tabelas</p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-57-1"><a id="__codelineno-57-1" name="__codelineno-57-1" href="#__codelineno-57-1"></a><span class="k">sql</span><span class="w"> </span><span class="n">zabbix</span><span class="o">=#</span><span class="w"> </span><span class="err">\</span><span class="n">dt</span>
</span></code></pre></div>
</div>
<p>Você verá uma lista de tabelas com seu esquema, nome, tipo e proprietário. Por
exemplo:</p>
<div class="admonition info">
<p class="admonition-title">Listar tabela com relações</p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-58-1"><a id="__codelineno-58-1" name="__codelineno-58-1" href="#__codelineno-58-1"></a><span class="n">zabbix</span><span class="o">=&gt;</span><span class="w"> </span><span class="err">\</span><span class="n">dt</span>
</span><span id="__span-58-2"><a id="__codelineno-58-2" name="__codelineno-58-2" href="#__codelineno-58-2"></a><span class="w">                        </span><span class="n">List</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">relations</span>
</span><span id="__span-58-3"><a id="__codelineno-58-3" name="__codelineno-58-3" href="#__codelineno-58-3"></a><span class="w">    </span><span class="k">Schema</span><span class="w">     </span><span class="o">|</span><span class="w">            </span><span class="n">Name</span><span class="w">            </span><span class="o">|</span><span class="w"> </span><span class="k">Type</span><span class="w">  </span><span class="o">|</span><span class="w">   </span><span class="k">Owner</span>
</span><span id="__span-58-4"><a id="__codelineno-58-4" name="__codelineno-58-4" href="#__codelineno-58-4"></a><span class="c1">---------------+----------------------------+-------+------------</span>
</span><span id="__span-58-5"><a id="__codelineno-58-5" name="__codelineno-58-5" href="#__codelineno-58-5"></a><span class="w"> </span><span class="n">zabbix_server</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">acknowledges</span><span class="w">               </span><span class="o">|</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">zabbix</span><span class="o">-</span><span class="n">srv</span>
</span><span id="__span-58-6"><a id="__codelineno-58-6" name="__codelineno-58-6" href="#__codelineno-58-6"></a><span class="w"> </span><span class="n">zabbix_server</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">actions</span><span class="w">                    </span><span class="o">|</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">zabbix</span><span class="o">-</span><span class="n">srv</span>
</span><span id="__span-58-7"><a id="__codelineno-58-7" name="__codelineno-58-7" href="#__codelineno-58-7"></a><span class="w"> </span><span class="n">zabbix_server</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">alerts</span><span class="w">                     </span><span class="o">|</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">zabbix</span><span class="o">-</span><span class="n">srv</span>
</span><span id="__span-58-8"><a id="__codelineno-58-8" name="__codelineno-58-8" href="#__codelineno-58-8"></a><span class="w"> </span><span class="n">zabbix_server</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">auditlog</span><span class="w">                   </span><span class="o">|</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">zabbix</span><span class="o">-</span><span class="n">srv</span>
</span><span id="__span-58-9"><a id="__codelineno-58-9" name="__codelineno-58-9" href="#__codelineno-58-9"></a><span class="w"> </span><span class="n">zabbix_server</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">autoreg_host</span><span class="w">               </span><span class="o">|</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">zabbix</span><span class="o">-</span><span class="n">srv</span>
</span><span id="__span-58-10"><a id="__codelineno-58-10" name="__codelineno-58-10" href="#__codelineno-58-10"></a><span class="w"> </span><span class="n">zabbix_server</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">changelog</span><span class="w">                  </span><span class="o">|</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">zabbix</span><span class="o">-</span><span class="n">srv</span>
</span><span id="__span-58-11"><a id="__codelineno-58-11" name="__codelineno-58-11" href="#__codelineno-58-11"></a><span class="w"> </span><span class="n">zabbix_server</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">conditions</span><span class="w">                 </span><span class="o">|</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">zabbix</span><span class="o">-</span><span class="n">srv</span>
</span><span id="__span-58-12"><a id="__codelineno-58-12" name="__codelineno-58-12" href="#__codelineno-58-12"></a><span class="p">...</span>
</span><span id="__span-58-13"><a id="__codelineno-58-13" name="__codelineno-58-13" href="#__codelineno-58-13"></a><span class="p">...</span>
</span><span id="__span-58-14"><a id="__codelineno-58-14" name="__codelineno-58-14" href="#__codelineno-58-14"></a><span class="p">...</span>
</span><span id="__span-58-15"><a id="__codelineno-58-15" name="__codelineno-58-15" href="#__codelineno-58-15"></a><span class="w"> </span><span class="n">zabbix_server</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">valuemap</span><span class="w">                   </span><span class="o">|</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">zabbix</span><span class="o">-</span><span class="n">srv</span>
</span><span id="__span-58-16"><a id="__codelineno-58-16" name="__codelineno-58-16" href="#__codelineno-58-16"></a><span class="w"> </span><span class="n">zabbix_server</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">valuemap_mapping</span><span class="w">           </span><span class="o">|</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">zabbix</span><span class="o">-</span><span class="n">srv</span>
</span><span id="__span-58-17"><a id="__codelineno-58-17" name="__codelineno-58-17" href="#__codelineno-58-17"></a><span class="w"> </span><span class="n">zabbix_server</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">widget</span><span class="w">                     </span><span class="o">|</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">zabbix</span><span class="o">-</span><span class="n">srv</span>
</span><span id="__span-58-18"><a id="__codelineno-58-18" name="__codelineno-58-18" href="#__codelineno-58-18"></a><span class="w"> </span><span class="n">zabbix_server</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">widget_field</span><span class="w">               </span><span class="o">|</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">zabbix</span><span class="o">-</span><span class="n">srv</span>
</span><span id="__span-58-19"><a id="__codelineno-58-19" name="__codelineno-58-19" href="#__codelineno-58-19"></a><span class="p">(</span><span class="mi">203</span><span class="w"> </span><span class="k">rows</span><span class="p">)</span>
</span></code></pre></div>
</div>
<ul>
<li>Verificar permissões: Confirme se o usuário zabbix-srv é o proprietário das
  tabelas e se tem as permissões necessárias. Você pode verificar as permissões
  de tabelas específicas usando o comando \dp:</li>
</ul>
<div class="admonition informações">
<div class="language-sql highlight"><pre><span></span><code><span id="__span-59-1"><a id="__codelineno-59-1" name="__codelineno-59-1" href="#__codelineno-59-1"></a><span class="k">sql</span><span class="w"> </span><span class="n">zabbix</span><span class="o">=#</span><span class="w"> </span><span class="err">\</span><span class="n">dp</span><span class="w"> </span><span class="n">zabbix_server</span><span class="p">.</span><span class="o">*</span>
</span></code></pre></div>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-60-1"><a id="__codelineno-60-1" name="__codelineno-60-1" href="#__codelineno-60-1"></a><span class="w">                                                     </span><span class="k">Access</span><span class="w"> </span><span class="k">privileges</span>
</span><span id="__span-60-2"><a id="__codelineno-60-2" name="__codelineno-60-2" href="#__codelineno-60-2"></a><span class="w">    </span><span class="k">Schema</span><span class="w">     </span><span class="o">|</span><span class="w">            </span><span class="n">Name</span><span class="w">            </span><span class="o">|</span><span class="w">   </span><span class="k">Type</span><span class="w">   </span><span class="o">|</span><span class="w">         </span><span class="k">Access</span><span class="w"> </span><span class="k">privileges</span><span class="w">          </span><span class="o">|</span><span class="w"> </span><span class="k">Column</span><span class="w"> </span><span class="k">privileges</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Policies</span>
</span><span id="__span-60-3"><a id="__codelineno-60-3" name="__codelineno-60-3" href="#__codelineno-60-3"></a><span class="c1">---------------+----------------------------+----------+------------------------------------+-------------------+----------</span>
</span><span id="__span-60-4"><a id="__codelineno-60-4" name="__codelineno-60-4" href="#__codelineno-60-4"></a><span class="w"> </span><span class="n">zabbix_server</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">acknowledges</span><span class="w">               </span><span class="o">|</span><span class="w"> </span><span class="k">table</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="ss">&quot;zabbix-srv&quot;</span><span class="o">=</span><span class="n">arwdDxtm</span><span class="o">/</span><span class="ss">&quot;zabbix-srv&quot;</span><span class="o">+|</span><span class="w">                   </span><span class="o">|</span>
</span><span id="__span-60-5"><a id="__codelineno-60-5" name="__codelineno-60-5" href="#__codelineno-60-5"></a><span class="w">               </span><span class="o">|</span><span class="w">                            </span><span class="o">|</span><span class="w">          </span><span class="o">|</span><span class="w"> </span><span class="ss">&quot;zabbix-web&quot;</span><span class="o">=</span><span class="n">arwd</span><span class="o">/</span><span class="ss">&quot;zabbix-srv&quot;</span><span class="w">     </span><span class="o">|</span><span class="w">                   </span><span class="o">|</span>
</span><span id="__span-60-6"><a id="__codelineno-60-6" name="__codelineno-60-6" href="#__codelineno-60-6"></a><span class="w"> </span><span class="n">zabbix_server</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">actions</span><span class="w">                    </span><span class="o">|</span><span class="w"> </span><span class="k">table</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="ss">&quot;zabbix-srv&quot;</span><span class="o">=</span><span class="n">arwdDxtm</span><span class="o">/</span><span class="ss">&quot;zabbix-srv&quot;</span><span class="o">+|</span><span class="w">                   </span><span class="o">|</span>
</span><span id="__span-60-7"><a id="__codelineno-60-7" name="__codelineno-60-7" href="#__codelineno-60-7"></a><span class="w">               </span><span class="o">|</span><span class="w">                            </span><span class="o">|</span><span class="w">          </span><span class="o">|</span><span class="w"> </span><span class="ss">&quot;zabbix-web&quot;</span><span class="o">=</span><span class="n">arwd</span><span class="o">/</span><span class="ss">&quot;zabbix-srv&quot;</span><span class="w">     </span><span class="o">|</span><span class="w">                   </span><span class="o">|</span>
</span><span id="__span-60-8"><a id="__codelineno-60-8" name="__codelineno-60-8" href="#__codelineno-60-8"></a><span class="w"> </span><span class="n">zabbix_server</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">alerts</span><span class="w">                     </span><span class="o">|</span><span class="w"> </span><span class="k">table</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="ss">&quot;zabbix-srv&quot;</span><span class="o">=</span><span class="n">arwdDxtm</span><span class="o">/</span><span class="ss">&quot;zabbix-srv&quot;</span><span class="o">+|</span><span class="w">                   </span><span class="o">|</span>
</span><span id="__span-60-9"><a id="__codelineno-60-9" name="__codelineno-60-9" href="#__codelineno-60-9"></a><span class="w">               </span><span class="o">|</span><span class="w">                            </span><span class="o">|</span><span class="w">          </span><span class="o">|</span><span class="w"> </span><span class="ss">&quot;zabbix-web&quot;</span><span class="o">=</span><span class="n">arwd</span><span class="o">/</span><span class="ss">&quot;zabbix-srv&quot;</span><span class="w">     </span><span class="o">|</span><span class="w">                   </span><span class="o">|</span>
</span><span id="__span-60-10"><a id="__codelineno-60-10" name="__codelineno-60-10" href="#__codelineno-60-10"></a><span class="w"> </span><span class="n">zabbix_server</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">auditlog</span><span class="w">                   </span><span class="o">|</span><span class="w"> </span><span class="k">table</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="ss">&quot;zabbix-srv&quot;</span><span class="o">=</span><span class="n">arwdDxtm</span><span class="o">/</span><span class="ss">&quot;zabbix-srv&quot;</span><span class="o">+|</span><span class="w">                   </span><span class="o">|</span>
</span></code></pre></div>
</div>
<p>Isso exibirá os privilégios de acesso de todas as tabelas no esquema
<code>zabbix_server</code>. Certifique-se de que <code>zabbix-srv</code> tenha os privilégios
necessários.</p>
<p>Se tudo estiver correto, suas tabelas foram criadas corretamente e o usuário
<code>zabbix-srv</code> tem a propriedade e as permissões adequadas. Se precisar ajustar
alguma permissão, você poderá fazê-lo usando os comandos GRANT, conforme
necessário.</p>
<details class="nota" open="open">
<summary>Nota</summary>
<p>If you prefer not to set the search path manually each time you log in as the
<code>zabbix-srv</code> user, you can configure PostgreSQL to automatically use the desired
search path. Run the following SQL command to set the default search path for
the <code>zabbix-srv</code> role:</p>
<p>sql zabbix=&gt; ALTER ROLE "zabbix-srv" SET search_path = "$user", public, zabbix_server;</p>
<p>This command ensures that every time the <code>zabbix-srv</code> user connects to the
database, the <code>search_path</code> is automatically set to include <code>$user</code>, <code>public</code>, and <code>zabbix_server</code>.</p>
</details>
<p>Se estiver pronto, você poderá sair do banco de dados e retornar como usuário
root.</p>
<div class="admonition info">
<p class="admonition-title">Sair do banco de dados</p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-61-1"><a id="__codelineno-61-1" name="__codelineno-61-1" href="#__codelineno-61-1"></a><span class="n">zabbix</span><span class="o">=&gt;</span><span class="w"> </span><span class="err">\</span><span class="n">q</span>
</span></code></pre></div>
</div>
<p>Se quisermos que o servidor Zabbix possa se conectar ao nosso banco de dados,
também precisaremos abrir a porta do firewall.</p>
<div class="admonition informações">
<p>Red Hat
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-62-1"><a id="__codelineno-62-1" name="__codelineno-62-1" href="#__codelineno-62-1"></a><span class="l l-Scalar l-Scalar-Plain">firewall-cmd --add-port=5432/tcp --permanent</span>
</span><span id="__span-62-2"><a id="__codelineno-62-2" name="__codelineno-62-2" href="#__codelineno-62-2"></a><span class="l l-Scalar l-Scalar-Plain">firewall-cmd --reload</span>
</span></code></pre></div></p>
<p>Ubuntu
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-63-1"><a id="__codelineno-63-1" name="__codelineno-63-1" href="#__codelineno-63-1"></a><span class="l l-Scalar l-Scalar-Plain">sudo ufw allow 5432/tcp</span>
</span></code></pre></div></p>
</div>
<details class="nota" open="open">
<summary>Nota</summary>
<p>Make sure your DB is listening on the correct IP and not on 127.0.0.1.
You could add the following files to your config file. This would allow MariaDB
to listen on all interfaces. Best to limit it only to the needed IP.</p>
<p>/etc/mysql/mariadb.cnf</p>
<p>[mariadb]
log_error=/var/log/mysql/mariadb.err
log_warnings=3
bind-address = 0.0.0.0</p>
</details>
<p>Isso conclui nossa instalação do banco de dados PostgreSQL.</p>
<hr />
<h2 id="instalando-o-servidor-zabbix-para-mariadbmysql">Instalando o servidor Zabbix para MariaDB/Mysql</h2>
<p>Antes de prosseguir com a instalação do servidor Zabbix, certifique-se de que o
servidor esteja configurado corretamente, conforme descrito na seção anterior
<a href="../../ch00-getting-started/Requirements/">Requisitos do sistema</a></p>
<p>Outro passo crítico nesta etapa, se você usa sistemas baseados no Red Hat, é
desabilitar o SELinux, que pode interferir na instalação e operação do Zabbix.
Voltaremos a falar sobre o SELinux no final deste capítulo, quando nossa
instalação estiver concluída.</p>
<p>Para verificar o status atual do SELinux, você pode usar o seguinte comando:
`sestatus``</p>
<div class="admonition info">
<p class="admonition-title">Status do Selinux</p>
<p><div class="language-yaml highlight"><pre><span></span><code><span id="__span-64-1"><a id="__codelineno-64-1" name="__codelineno-64-1" href="#__codelineno-64-1"></a><span class="l l-Scalar l-Scalar-Plain">sestatus</span>
</span></code></pre></div>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-65-1"><a id="__codelineno-65-1" name="__codelineno-65-1" href="#__codelineno-65-1"></a><span class="nt">SELinux status</span><span class="p">:</span><span class="w">                 </span><span class="l l-Scalar l-Scalar-Plain">enabled</span>
</span><span id="__span-65-2"><a id="__codelineno-65-2" name="__codelineno-65-2" href="#__codelineno-65-2"></a><span class="nt">SELinuxfs mount</span><span class="p">:</span><span class="w">                </span><span class="l l-Scalar l-Scalar-Plain">/sys/fs/selinux</span>
</span><span id="__span-65-3"><a id="__codelineno-65-3" name="__codelineno-65-3" href="#__codelineno-65-3"></a><span class="nt">SELinux root directory</span><span class="p">:</span><span class="w">         </span><span class="l l-Scalar l-Scalar-Plain">/etc/selinux</span>
</span><span id="__span-65-4"><a id="__codelineno-65-4" name="__codelineno-65-4" href="#__codelineno-65-4"></a><span class="nt">Loaded policy name</span><span class="p">:</span><span class="w">             </span><span class="l l-Scalar l-Scalar-Plain">targeted</span>
</span><span id="__span-65-5"><a id="__codelineno-65-5" name="__codelineno-65-5" href="#__codelineno-65-5"></a><span class="nt">Current mode</span><span class="p">:</span><span class="w">                   </span><span class="l l-Scalar l-Scalar-Plain">enforcing</span>
</span><span id="__span-65-6"><a id="__codelineno-65-6" name="__codelineno-65-6" href="#__codelineno-65-6"></a><span class="nt">Mode from config file</span><span class="p">:</span><span class="w">          </span><span class="l l-Scalar l-Scalar-Plain">enforcing</span>
</span><span id="__span-65-7"><a id="__codelineno-65-7" name="__codelineno-65-7" href="#__codelineno-65-7"></a><span class="nt">Policy MLS status</span><span class="p">:</span><span class="w">              </span><span class="l l-Scalar l-Scalar-Plain">enabled</span>
</span><span id="__span-65-8"><a id="__codelineno-65-8" name="__codelineno-65-8" href="#__codelineno-65-8"></a><span class="nt">Policy deny_unknown status</span><span class="p">:</span><span class="w">     </span><span class="l l-Scalar l-Scalar-Plain">allowed</span>
</span><span id="__span-65-9"><a id="__codelineno-65-9" name="__codelineno-65-9" href="#__codelineno-65-9"></a><span class="nt">Memory protection checking</span><span class="p">:</span><span class="w">     </span><span class="l l-Scalar l-Scalar-Plain">actual (secure)</span>
</span><span id="__span-65-10"><a id="__codelineno-65-10" name="__codelineno-65-10" href="#__codelineno-65-10"></a><span class="nt">Max kernel policy version</span><span class="p">:</span><span class="w">      </span><span class="l l-Scalar l-Scalar-Plain">33</span>
</span></code></pre></div></p>
</div>
<p>Conforme mostrado, o sistema está atualmente no modo de aplicação. Para
desativar temporariamente o SELinux, você pode executar o seguinte comando:
<code>setenforce 0</code></p>
<div class="admonition info">
<p class="admonition-title">Desativar o SeLinux</p>
<p><div class="language-yaml highlight"><pre><span></span><code><span id="__span-66-1"><a id="__codelineno-66-1" name="__codelineno-66-1" href="#__codelineno-66-1"></a><span class="l l-Scalar l-Scalar-Plain">setenforce 0</span>
</span><span id="__span-66-2"><a id="__codelineno-66-2" name="__codelineno-66-2" href="#__codelineno-66-2"></a><span class="l l-Scalar l-Scalar-Plain">sestatus</span>
</span></code></pre></div>
<div class="language-text highlight"><pre><span></span><code><span id="__span-67-1"><a id="__codelineno-67-1" name="__codelineno-67-1" href="#__codelineno-67-1"></a>SELinux status:                 enabled
</span><span id="__span-67-2"><a id="__codelineno-67-2" name="__codelineno-67-2" href="#__codelineno-67-2"></a>SELinuxfs mount:                /sys/fs/selinux
</span><span id="__span-67-3"><a id="__codelineno-67-3" name="__codelineno-67-3" href="#__codelineno-67-3"></a>SELinux root directory:         /etc/selinux
</span><span id="__span-67-4"><a id="__codelineno-67-4" name="__codelineno-67-4" href="#__codelineno-67-4"></a>Loaded policy name:             targeted
</span><span id="__span-67-5"><a id="__codelineno-67-5" name="__codelineno-67-5" href="#__codelineno-67-5"></a>Current mode:                   permissive
</span><span id="__span-67-6"><a id="__codelineno-67-6" name="__codelineno-67-6" href="#__codelineno-67-6"></a>Mode from config file:          enforcing
</span><span id="__span-67-7"><a id="__codelineno-67-7" name="__codelineno-67-7" href="#__codelineno-67-7"></a>Policy MLS status:              enabled
</span><span id="__span-67-8"><a id="__codelineno-67-8" name="__codelineno-67-8" href="#__codelineno-67-8"></a>Policy deny_unknown status:     allowed
</span><span id="__span-67-9"><a id="__codelineno-67-9" name="__codelineno-67-9" href="#__codelineno-67-9"></a>Memory protection checking:     actual (secure)
</span><span id="__span-67-10"><a id="__codelineno-67-10" name="__codelineno-67-10" href="#__codelineno-67-10"></a>Max kernel policy version:      33
</span></code></pre></div></p>
</div>
<p>Agora, como você pode ver, o modo foi alterado para permissivo. No entanto, essa
alteração não é persistente nas reinicializações. Para torná-la permanente, você
precisa modificar o arquivo de configuração do SELinux localizado em
<code>/etc/selinux/config</code>. Abra o arquivo e substitua enforcing por <code>permissive</code>.</p>
<p>Como alternativa, você pode obter o mesmo resultado mais facilmente executando o
seguinte comando:</p>
<div class="admonition info">
<p class="admonition-title">Desativar o SeLinux permanentemente</p>
<p>Red Hat
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-68-1"><a id="__codelineno-68-1" name="__codelineno-68-1" href="#__codelineno-68-1"></a><span class="l l-Scalar l-Scalar-Plain">sed -i &#39;s/SELINUX=enforcing/SELINUX=permissive/g&#39; /etc/selinux/config</span>
</span></code></pre></div></p>
</div>
<p>Essa linha alterará o arquivo de configuração para você. Portanto, quando
executarmos <code>sestatus</code> novamente, veremos que estamos no modo <code>permissivo</code> e que
nosso arquivo de configuração também está no modo permissivo.</p>
<div class="admonition info">
<p class="admonition-title">Verificar novamente o status do selinux</p>
<p><div class="language-yaml highlight"><pre><span></span><code><span id="__span-69-1"><a id="__codelineno-69-1" name="__codelineno-69-1" href="#__codelineno-69-1"></a><span class="l l-Scalar l-Scalar-Plain">sestatus</span>
</span></code></pre></div>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-70-1"><a id="__codelineno-70-1" name="__codelineno-70-1" href="#__codelineno-70-1"></a><span class="nt">SELinux status</span><span class="p">:</span><span class="w">                 </span><span class="l l-Scalar l-Scalar-Plain">enabled</span>
</span><span id="__span-70-2"><a id="__codelineno-70-2" name="__codelineno-70-2" href="#__codelineno-70-2"></a><span class="nt">SELinuxfs mount</span><span class="p">:</span><span class="w">                </span><span class="l l-Scalar l-Scalar-Plain">/sys/fs/selinux</span>
</span><span id="__span-70-3"><a id="__codelineno-70-3" name="__codelineno-70-3" href="#__codelineno-70-3"></a><span class="nt">SELinux root directory</span><span class="p">:</span><span class="w">         </span><span class="l l-Scalar l-Scalar-Plain">/etc/selinux</span>
</span><span id="__span-70-4"><a id="__codelineno-70-4" name="__codelineno-70-4" href="#__codelineno-70-4"></a><span class="nt">Loaded policy name</span><span class="p">:</span><span class="w">             </span><span class="l l-Scalar l-Scalar-Plain">targeted</span>
</span><span id="__span-70-5"><a id="__codelineno-70-5" name="__codelineno-70-5" href="#__codelineno-70-5"></a><span class="nt">Current mode</span><span class="p">:</span><span class="w">                   </span><span class="l l-Scalar l-Scalar-Plain">permissive</span>
</span><span id="__span-70-6"><a id="__codelineno-70-6" name="__codelineno-70-6" href="#__codelineno-70-6"></a><span class="nt">Mode from config file</span><span class="p">:</span><span class="w">          </span><span class="l l-Scalar l-Scalar-Plain">permissive</span>
</span><span id="__span-70-7"><a id="__codelineno-70-7" name="__codelineno-70-7" href="#__codelineno-70-7"></a><span class="nt">Policy MLS status</span><span class="p">:</span><span class="w">              </span><span class="l l-Scalar l-Scalar-Plain">enabled</span>
</span><span id="__span-70-8"><a id="__codelineno-70-8" name="__codelineno-70-8" href="#__codelineno-70-8"></a><span class="nt">Policy deny_unknown status</span><span class="p">:</span><span class="w">     </span><span class="l l-Scalar l-Scalar-Plain">allowed</span>
</span><span id="__span-70-9"><a id="__codelineno-70-9" name="__codelineno-70-9" href="#__codelineno-70-9"></a><span class="nt">Memory protection checking</span><span class="p">:</span><span class="w">     </span><span class="l l-Scalar l-Scalar-Plain">actual (secure)</span>
</span><span id="__span-70-10"><a id="__codelineno-70-10" name="__codelineno-70-10" href="#__codelineno-70-10"></a><span class="nt">Max kernel policy version</span><span class="p">:</span><span class="w">      </span><span class="l l-Scalar l-Scalar-Plain">33</span>
</span></code></pre></div></p>
</div>
<hr />
<h3 id="adicionando-o-repositorio-zabbix">Adicionando o repositório Zabbix</h3>
<p>Na página de download do Zabbix
<a href="https://www.zabbix.com/download">https://www.zabbix.com/download</a>, selecione a
versão apropriada do Zabbix que você deseja instalar. Neste caso, usaremos o
Zabbix 8.0 LTS. Além disso, certifique-se de escolher a distribuição de sistema
operacional correta para seu ambiente, que será o Rocky Linux 9 ou o Ubuntu
24.04 em nosso caso.</p>
<p>Instalaremos o Zabbix Server juntamente com o NGINX como o servidor Web para o
front-end. Certifique-se de fazer o download dos pacotes relevantes para a
configuração escolhida.</p>
<p><img alt="Download do
Zabbix" src="../../../ch01-zabbix-components/basic-installation/ch01-basic-installation-zabbixdownload.png" /></p>
<p><em>1.2 Download do Zabbix</em></p>
<p>Se você usa um sistema baseado no RHEL, como o Rocky, a primeira etapa é
desativar os pacotes Zabbix fornecidos pelo repositório EPEL, se ele estiver
instalado em seu sistema. Para fazer isso, edite o arquivo
<code>/etc/yum.repos.d/epel.repo</code> e adicione a seguinte instrução para desativar o
repositório EPEL por padrão:</p>
<div class="admonition info">
<p class="admonition-title">excluir pacotes</p>
<p>Red Hat
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-71-1"><a id="__codelineno-71-1" name="__codelineno-71-1" href="#__codelineno-71-1"></a><span class="p p-Indicator">[</span><span class="nv">epel</span><span class="p p-Indicator">]</span>
</span><span id="__span-71-2"><a id="__codelineno-71-2" name="__codelineno-71-2" href="#__codelineno-71-2"></a><span class="nn">...</span>
</span><span id="__span-71-3"><a id="__codelineno-71-3" name="__codelineno-71-3" href="#__codelineno-71-3"></a><span class="l l-Scalar l-Scalar-Plain">excludepkgs=zabbix*</span>
</span></code></pre></div></p>
</div>
<details class="dica" open="open">
<summary>Dica</summary>
<p>It's considered bad practice to keep the EPEL repository enabled all the time,
as it may cause conflicts by unintentionally overwriting or installing unwanted
packages. Instead, it's safer to enable the repository only when needed, by using
the following command during installations: dnf install --enablerepo=epel <package-name>
This ensures that EPEL is only enabled when explicitly required.</p>
</details>
<p>Em seguida, instalaremos o repositório Zabbix em nosso sistema operacional.
Depois de adicionar o repositório do Zabbix, é recomendável executar uma limpeza
do repositório para remover arquivos de cache antigos e garantir que os
metadados do repositório estejam atualizados. Você pode fazer isso executando:</p>
<div class="admonition info">
<p class="admonition-title">Adicionar o repositório zabbix</p>
<p>Red Hat
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-72-1"><a id="__codelineno-72-1" name="__codelineno-72-1" href="#__codelineno-72-1"></a><span class="l l-Scalar l-Scalar-Plain">rpm -Uvh https://repo.zabbix.com/zabbix/7.2/release/rocky/9/noarch/zabbix-release-latest-7.2.el9.noarch.rpm</span>
</span><span id="__span-72-2"><a id="__codelineno-72-2" name="__codelineno-72-2" href="#__codelineno-72-2"></a><span class="l l-Scalar l-Scalar-Plain">dnf clean all</span>
</span></code></pre></div></p>
<p>Ubuntu
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-73-1"><a id="__codelineno-73-1" name="__codelineno-73-1" href="#__codelineno-73-1"></a><span class="l l-Scalar l-Scalar-Plain">sudo wget https://repo.zabbix.com/zabbix/7.2/release/ubuntu/pool/main/z/zabbix-release/zabbix-release_latest_7.2+ubuntu24.04_all.deb</span>
</span><span id="__span-73-2"><a id="__codelineno-73-2" name="__codelineno-73-2" href="#__codelineno-73-2"></a><span class="l l-Scalar l-Scalar-Plain">sudo dpkg -i zabbix-release_latest_7.2+ubuntu24.04_all.deb</span>
</span><span id="__span-73-3"><a id="__codelineno-73-3" name="__codelineno-73-3" href="#__codelineno-73-3"></a><span class="l l-Scalar l-Scalar-Plain">sudo apt update</span>
</span></code></pre></div></p>
</div>
<p>Isso atualizará os metadados do repositório e preparará o sistema para a
instalação do Zabbix.</p>
<details class="nota" open="open">
<summary>Nota</summary>
<p>A repository in Linux is a configuration that allows you to access and install
software packages. You can think of it like an "app store" where you find and
download software from a trusted source, in this case, the Zabbix repository.
Many repositories are available, but it's important to only add those you trust.
The safest practice is to stick to the repositories provided by your operating
system and only add additional ones when you're sure they are both trusted and necessary.</p>
<p>For our installation, the Zabbix repository is provided by the vendor itself,
making it a trusted source. Another popular and safe repository for
Red Hat-based systems is EPEL (Extra Packages for Enterprise Linux), which is
commonly used in enterprise environments.
However, always exercise caution when adding new repositories to ensure
system security and stability.</p>
</details>
<hr />
<h3 id="configuracao-do-servidor-zabbix-para-mysqlmariadb">Configuração do servidor Zabbix para MySQL/MariaDB</h3>
<p>Agora que adicionamos o repositório Zabbix com o software necessário, estamos
prontos para instalar o servidor Zabbix e o servidor Web. Lembre-se de que o
servidor Web não precisa ser instalado na mesma máquina que o servidor Zabbix;
eles podem ser hospedados em sistemas separados, se desejado.</p>
<p>Para instalar o servidor Zabbix e os componentes do servidor Web para
MySQL/MariaDB, execute o seguinte comando:</p>
<div class="admonition info">
<p class="admonition-title">Instalar o servidor zabbix</p>
<p>Red Hat
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-74-1"><a id="__codelineno-74-1" name="__codelineno-74-1" href="#__codelineno-74-1"></a><span class="l l-Scalar l-Scalar-Plain">dnf install zabbix-server-mysql</span>
</span></code></pre></div></p>
<p>Ubuntu
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-75-1"><a id="__codelineno-75-1" name="__codelineno-75-1" href="#__codelineno-75-1"></a><span class="l l-Scalar l-Scalar-Plain">sudo apt install zabbix-server-mysql</span>
</span></code></pre></div></p>
</div>
<p>Depois de instalar com sucesso os pacotes do Zabbix Server e do front-end,
precisamos configurar o Zabbix Server para se conectar ao banco de dados. Para
isso, é necessário modificar o arquivo de configuração do servidor Zabbix. Abra
o arquivo <code>/etc/zabbix/zabbix_server.conf</code> e atualize as seguintes linhas para
que correspondam à configuração do seu banco de dados:</p>
<div class="admonition info">
<p class="admonition-title">Editar configuração do servidor zabbix</p>
<p>Red Hat and Ubuntu
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-76-1"><a id="__codelineno-76-1" name="__codelineno-76-1" href="#__codelineno-76-1"></a><span class="l l-Scalar l-Scalar-Plain">sudo vi /etc/zabbix/zabbix_server.conf</span>
</span></code></pre></div>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-77-1"><a id="__codelineno-77-1" name="__codelineno-77-1" href="#__codelineno-77-1"></a><span class="l l-Scalar l-Scalar-Plain">DBHost=&lt;database-host&gt;</span>
</span><span id="__span-77-2"><a id="__codelineno-77-2" name="__codelineno-77-2" href="#__codelineno-77-2"></a><span class="l l-Scalar l-Scalar-Plain">DBName=&lt;database-name&gt;</span>
</span><span id="__span-77-3"><a id="__codelineno-77-3" name="__codelineno-77-3" href="#__codelineno-77-3"></a><span class="l l-Scalar l-Scalar-Plain">DBUser=&lt;database-user&gt;</span>
</span><span id="__span-77-4"><a id="__codelineno-77-4" name="__codelineno-77-4" href="#__codelineno-77-4"></a><span class="l l-Scalar l-Scalar-Plain">DBPassword=&lt;database-password&gt;</span>
</span></code></pre></div></p>
</div>
<p>Substitua <code>&lt;database-host&gt;</code>, <code>&lt;database-name&gt;</code>, <code>&lt;database-user&gt;</code> e
<code>&lt;database-password&gt;</code> pelos valores apropriados para sua configuração. Isso
garante que o servidor Zabbix possa se comunicar com seu banco de dados.</p>
<p>Certifique-se de que não há nenhum # (símbolo de comentário) na frente dos
parâmetros de configuração, pois o Zabbix tratará as linhas que começam com #
como comentários, ignorando-as durante a execução. Além disso, verifique se há
linhas de configuração duplicadas; se houver várias linhas com o mesmo
parâmetro, o Zabbix usará o valor da última ocorrência.</p>
<p>Para nossa instalação, a configuração será semelhante a esta:</p>
<div class="admonition info">
<p class="admonition-title">Exemplo de configuração</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-78-1"><a id="__codelineno-78-1" name="__codelineno-78-1" href="#__codelineno-78-1"></a><span class="l l-Scalar l-Scalar-Plain">DBHost=&lt;ip or dns of your MariaDB server&gt;</span>
</span><span id="__span-78-2"><a id="__codelineno-78-2" name="__codelineno-78-2" href="#__codelineno-78-2"></a><span class="l l-Scalar l-Scalar-Plain">DBName=zabbix</span>
</span><span id="__span-78-3"><a id="__codelineno-78-3" name="__codelineno-78-3" href="#__codelineno-78-3"></a><span class="l l-Scalar l-Scalar-Plain">DBUser=zabbix-srv</span>
</span><span id="__span-78-4"><a id="__codelineno-78-4" name="__codelineno-78-4" href="#__codelineno-78-4"></a><span class="l l-Scalar l-Scalar-Plain">DBPassword=&lt;your super secret password&gt;</span>
</span><span id="__span-78-5"><a id="__codelineno-78-5" name="__codelineno-78-5" href="#__codelineno-78-5"></a><span class="l l-Scalar l-Scalar-Plain">DBPort=3306</span>
</span></code></pre></div>
</div>
<p>Neste exemplo:</p>
<ul>
<li>DBHost refere-se ao host em que seu banco de dados está sendo executado (use
  localhost se estiver na mesma máquina).</li>
<li>DBName é o nome do banco de dados do Zabbix.</li>
<li>DBUser é o usuário do banco de dados.</li>
<li>DBPassword é a senha do usuário do banco de dados.</li>
</ul>
<p>Certifique-se de que as configurações reflitam a configuração do banco de dados
de seu ambiente.</p>
<details class="nota" open="open">
<summary>Nota</summary>
<p>The Zabbix server configuration file offers an option to include additional
configuration files for custom parameters. For a production environment, it's
often best to avoid altering the original configuration file directly. Instead,
you can create and include a separate configuration file for any additional or
modified parameters. This approach ensures that your original configuration
file remains untouched, which is particularly useful when performing upgrades
or managing configurations with tools like Ansible, Puppet, or SaltStack.</p>
</details>
<p>Para ativar esse recurso, remova o # da linha:</p>
<div class="admonition informações">
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-79-1"><a id="__codelineno-79-1" name="__codelineno-79-1" href="#__codelineno-79-1"></a><span class="c1"># Include=/usr/local/etc/zabbix_server.conf.d/*.conf</span>
</span></code></pre></div>
</div>
<p>Certifique-se de que o caminho <code>/usr/local/etc/zabbix_server.conf.d/</code> exista e
crie um arquivo de configuração personalizado nesse diretório. Esse arquivo deve
poder ser lido pelo usuário <code>zabbix</code>. Ao fazer isso, você pode adicionar ou
modificar parâmetros sem modificar o arquivo de configuração padrão, o que
facilita o gerenciamento e as atualizações do sistema.</p>
<p>Com a configuração do servidor Zabbix atualizada para se conectar ao seu banco
de dados, agora você pode iniciar e ativar o serviço do servidor Zabbix. Execute
o seguinte comando para ativar o servidor Zabbix e garantir que ele seja
iniciado automaticamente na inicialização:</p>
<details class="nota" open="open">
<summary>Nota</summary>
<p>Before restarting the Zabbix server after modifying its configuration, it is
considered best practice to validate the configuration to prevent potential
issues. Running a configuration check ensures that any errors are detected
beforehand, avoiding downtime caused by an invalid configuration. This can
be accomplished using the following command: <code>zabbix-server -T</code></p>
</details>
<div class="admonition info">
<p class="admonition-title">ativar e iniciar o serviço zabbix-server</p>
<p>Red Hat and Ubuntu
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-80-1"><a id="__codelineno-80-1" name="__codelineno-80-1" href="#__codelineno-80-1"></a><span class="l l-Scalar l-Scalar-Plain">sudo systemctl enable zabbix-server --now</span>
</span></code></pre></div></p>
</div>
<p>Esse comando iniciará o serviço do servidor Zabbix imediatamente e o configurará
para ser iniciado na inicialização do sistema. Para verificar se o servidor
Zabbix está funcionando corretamente, verifique se há mensagens no arquivo de
registro. É possível visualizar as entradas mais recentes no arquivo de registro
<code>Zabbix server</code> usando:</p>
<div class="admonition info">
<p class="admonition-title">Verifique o arquivo de registro</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-81-1"><a id="__codelineno-81-1" name="__codelineno-81-1" href="#__codelineno-81-1"></a><span class="l l-Scalar l-Scalar-Plain">tail /var/log/zabbix/zabbix_server.log</span>
</span></code></pre></div>
</div>
<p>Procure mensagens que indiquem que o servidor foi iniciado com êxito. Se houver
algum problema, o arquivo de registro fornecerá detalhes para ajudar na solução
de problemas.</p>
<div class="admonition info">
<p class="admonition-title">Exemplo de saída</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-82-1"><a id="__codelineno-82-1" name="__codelineno-82-1" href="#__codelineno-82-1"></a><span class="l l-Scalar l-Scalar-Plain">12074:20250225:145333.529 Starting Zabbix Server. Zabbix 7.2.4 (revision c34078a4563).</span>
</span><span id="__span-82-2"><a id="__codelineno-82-2" name="__codelineno-82-2" href="#__codelineno-82-2"></a><span class="l l-Scalar l-Scalar-Plain">12074:20250225:145333.530 ****** Enabled features ******</span>
</span><span id="__span-82-3"><a id="__codelineno-82-3" name="__codelineno-82-3" href="#__codelineno-82-3"></a><span class="l l-Scalar l-Scalar-Plain">12074:20250225:145333.530 SNMP monitoring</span><span class="p p-Indicator">:</span><span class="w">           </span><span class="l l-Scalar l-Scalar-Plain">YES</span>
</span><span id="__span-82-4"><a id="__codelineno-82-4" name="__codelineno-82-4" href="#__codelineno-82-4"></a><span class="nt">12074:20250225:145333.530 IPMI monitoring</span><span class="p">:</span><span class="w">           </span><span class="l l-Scalar l-Scalar-Plain">YES</span>
</span><span id="__span-82-5"><a id="__codelineno-82-5" name="__codelineno-82-5" href="#__codelineno-82-5"></a><span class="nt">12074:20250225:145333.530 Web monitoring</span><span class="p">:</span><span class="w">            </span><span class="l l-Scalar l-Scalar-Plain">YES</span>
</span><span id="__span-82-6"><a id="__codelineno-82-6" name="__codelineno-82-6" href="#__codelineno-82-6"></a><span class="nt">12074:20250225:145333.530 VMware monitoring</span><span class="p">:</span><span class="w">         </span><span class="l l-Scalar l-Scalar-Plain">YES</span>
</span><span id="__span-82-7"><a id="__codelineno-82-7" name="__codelineno-82-7" href="#__codelineno-82-7"></a><span class="nt">12074:20250225:145333.530 SMTP authentication</span><span class="p">:</span><span class="w">       </span><span class="l l-Scalar l-Scalar-Plain">YES</span>
</span><span id="__span-82-8"><a id="__codelineno-82-8" name="__codelineno-82-8" href="#__codelineno-82-8"></a><span class="nt">12074:20250225:145333.530 ODBC</span><span class="p">:</span><span class="w">                      </span><span class="l l-Scalar l-Scalar-Plain">YES</span>
</span><span id="__span-82-9"><a id="__codelineno-82-9" name="__codelineno-82-9" href="#__codelineno-82-9"></a><span class="nt">12074:20250225:145333.530 SSH support</span><span class="p">:</span><span class="w">               </span><span class="l l-Scalar l-Scalar-Plain">YES</span>
</span><span id="__span-82-10"><a id="__codelineno-82-10" name="__codelineno-82-10" href="#__codelineno-82-10"></a><span class="nt">12074:20250225:145333.530 IPv6 support</span><span class="p">:</span><span class="w">              </span><span class="l l-Scalar l-Scalar-Plain">YES</span>
</span><span id="__span-82-11"><a id="__codelineno-82-11" name="__codelineno-82-11" href="#__codelineno-82-11"></a><span class="nt">12074:20250225:145333.530 TLS support</span><span class="p">:</span><span class="w">               </span><span class="l l-Scalar l-Scalar-Plain">YES</span>
</span><span id="__span-82-12"><a id="__codelineno-82-12" name="__codelineno-82-12" href="#__codelineno-82-12"></a><span class="l l-Scalar l-Scalar-Plain">12074:20250225:145333.530 ******************************</span>
</span><span id="__span-82-13"><a id="__codelineno-82-13" name="__codelineno-82-13" href="#__codelineno-82-13"></a><span class="nt">12074:20250225:145333.530 using configuration file</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/etc/zabbix/zabbix_server.conf</span>
</span><span id="__span-82-14"><a id="__codelineno-82-14" name="__codelineno-82-14" href="#__codelineno-82-14"></a><span class="nt">12074:20250225:145333.545 current database version (mandatory/optional)</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">07020000/07020000</span>
</span><span id="__span-82-15"><a id="__codelineno-82-15" name="__codelineno-82-15" href="#__codelineno-82-15"></a><span class="nt">12074:20250225:145333.545 required mandatory version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">07020000</span>
</span><span id="__span-82-16"><a id="__codelineno-82-16" name="__codelineno-82-16" href="#__codelineno-82-16"></a><span class="l l-Scalar l-Scalar-Plain">12075:20250225:145333.557 starting HA manager</span>
</span><span id="__span-82-17"><a id="__codelineno-82-17" name="__codelineno-82-17" href="#__codelineno-82-17"></a><span class="l l-Scalar l-Scalar-Plain">12075:20250225:145333.566 HA manager started in active mode</span>
</span><span id="__span-82-18"><a id="__codelineno-82-18" name="__codelineno-82-18" href="#__codelineno-82-18"></a><span class="l l-Scalar l-Scalar-Plain">12074:20250225:145333.567 server</span><span class="w"> </span><span class="c1">#0 started [main process]</span>
</span><span id="__span-82-19"><a id="__codelineno-82-19" name="__codelineno-82-19" href="#__codelineno-82-19"></a><span class="l l-Scalar l-Scalar-Plain">12076:20250225:145333.567 server</span><span class="w"> </span><span class="c1">#1 started [service manager #1]</span>
</span><span id="__span-82-20"><a id="__codelineno-82-20" name="__codelineno-82-20" href="#__codelineno-82-20"></a><span class="l l-Scalar l-Scalar-Plain">12077:20250225:145333.567 server</span><span class="w"> </span><span class="c1">#2 started [configuration syncer #1]</span>
</span><span id="__span-82-21"><a id="__codelineno-82-21" name="__codelineno-82-21" href="#__codelineno-82-21"></a><span class="l l-Scalar l-Scalar-Plain">12078:20250225:145333.718 server</span><span class="w"> </span><span class="c1">#3 started [alert manager #1]</span>
</span><span id="__span-82-22"><a id="__codelineno-82-22" name="__codelineno-82-22" href="#__codelineno-82-22"></a><span class="l l-Scalar l-Scalar-Plain">12079:20250225:145333.719 server</span><span class="w"> </span><span class="c1">#4 started [alerter #1]</span>
</span><span id="__span-82-23"><a id="__codelineno-82-23" name="__codelineno-82-23" href="#__codelineno-82-23"></a><span class="l l-Scalar l-Scalar-Plain">12080:20250225:145333.719 server</span><span class="w"> </span><span class="c1">#5 started [alerter #2]</span>
</span><span id="__span-82-24"><a id="__codelineno-82-24" name="__codelineno-82-24" href="#__codelineno-82-24"></a><span class="l l-Scalar l-Scalar-Plain">12081:20250225:145333.719 server</span><span class="w"> </span><span class="c1">#6 started [alerter #3]</span>
</span><span id="__span-82-25"><a id="__codelineno-82-25" name="__codelineno-82-25" href="#__codelineno-82-25"></a><span class="l l-Scalar l-Scalar-Plain">12082:20250225:145333.719 server</span><span class="w"> </span><span class="c1">#7 started [preprocessing manager #1]</span>
</span><span id="__span-82-26"><a id="__codelineno-82-26" name="__codelineno-82-26" href="#__codelineno-82-26"></a><span class="l l-Scalar l-Scalar-Plain">12083:20250225:145333.719 server</span><span class="w"> </span><span class="c1">#8 started [lld manager #1]</span>
</span></code></pre></div>
</div>
<p>Se houvesse um erro e o servidor não conseguisse se conectar ao banco de dados,
você veria algo assim no arquivo de registro do servidor:</p>
<div class="admonition info">
<p class="admonition-title">Exemplo de registro com erros</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-83-1"><a id="__codelineno-83-1" name="__codelineno-83-1" href="#__codelineno-83-1"></a><span class="l l-Scalar l-Scalar-Plain">12068:20250225:145309.018 Starting Zabbix Server. Zabbix 7.2.4 (revision c34078a4563).</span>
</span><span id="__span-83-2"><a id="__codelineno-83-2" name="__codelineno-83-2" href="#__codelineno-83-2"></a><span class="l l-Scalar l-Scalar-Plain">12068:20250225:145309.018 ****** Enabled features ******</span>
</span><span id="__span-83-3"><a id="__codelineno-83-3" name="__codelineno-83-3" href="#__codelineno-83-3"></a><span class="l l-Scalar l-Scalar-Plain">12068:20250225:145309.018 SNMP monitoring</span><span class="p p-Indicator">:</span><span class="w">           </span><span class="l l-Scalar l-Scalar-Plain">YES</span>
</span><span id="__span-83-4"><a id="__codelineno-83-4" name="__codelineno-83-4" href="#__codelineno-83-4"></a><span class="nt">12068:20250225:145309.018 IPMI monitoring</span><span class="p">:</span><span class="w">           </span><span class="l l-Scalar l-Scalar-Plain">YES</span>
</span><span id="__span-83-5"><a id="__codelineno-83-5" name="__codelineno-83-5" href="#__codelineno-83-5"></a><span class="nt">12068:20250225:145309.018 Web monitoring</span><span class="p">:</span><span class="w">            </span><span class="l l-Scalar l-Scalar-Plain">YES</span>
</span><span id="__span-83-6"><a id="__codelineno-83-6" name="__codelineno-83-6" href="#__codelineno-83-6"></a><span class="nt">12068:20250225:145309.018 VMware monitoring</span><span class="p">:</span><span class="w">         </span><span class="l l-Scalar l-Scalar-Plain">YES</span>
</span><span id="__span-83-7"><a id="__codelineno-83-7" name="__codelineno-83-7" href="#__codelineno-83-7"></a><span class="nt">12068:20250225:145309.018 SMTP authentication</span><span class="p">:</span><span class="w">       </span><span class="l l-Scalar l-Scalar-Plain">YES</span>
</span><span id="__span-83-8"><a id="__codelineno-83-8" name="__codelineno-83-8" href="#__codelineno-83-8"></a><span class="nt">12068:20250225:145309.018 ODBC</span><span class="p">:</span><span class="w">                      </span><span class="l l-Scalar l-Scalar-Plain">YES</span>
</span><span id="__span-83-9"><a id="__codelineno-83-9" name="__codelineno-83-9" href="#__codelineno-83-9"></a><span class="nt">12068:20250225:145309.018 SSH support</span><span class="p">:</span><span class="w">               </span><span class="l l-Scalar l-Scalar-Plain">YES</span>
</span><span id="__span-83-10"><a id="__codelineno-83-10" name="__codelineno-83-10" href="#__codelineno-83-10"></a><span class="nt">12068:20250225:145309.018 IPv6 support</span><span class="p">:</span><span class="w">              </span><span class="l l-Scalar l-Scalar-Plain">YES</span>
</span><span id="__span-83-11"><a id="__codelineno-83-11" name="__codelineno-83-11" href="#__codelineno-83-11"></a><span class="nt">12068:20250225:145309.018 TLS support</span><span class="p">:</span><span class="w">               </span><span class="l l-Scalar l-Scalar-Plain">YES</span>
</span><span id="__span-83-12"><a id="__codelineno-83-12" name="__codelineno-83-12" href="#__codelineno-83-12"></a><span class="l l-Scalar l-Scalar-Plain">12068:20250225:145309.018 ******************************</span>
</span><span id="__span-83-13"><a id="__codelineno-83-13" name="__codelineno-83-13" href="#__codelineno-83-13"></a><span class="nt">12068:20250225:145309.018 using configuration file</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/etc/zabbix/zabbix_server.conf</span>
</span><span id="__span-83-14"><a id="__codelineno-83-14" name="__codelineno-83-14" href="#__codelineno-83-14"></a><span class="l l-Scalar l-Scalar-Plain">12068:20250225:145309.027 [Z3005] query failed</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">1146</span><span class="p p-Indicator">]</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Table &#39;zabbix.users&#39; doesn&#39;t exist [select userid from users limit 1]</span>
</span><span id="__span-83-15"><a id="__codelineno-83-15" name="__codelineno-83-15" href="#__codelineno-83-15"></a><span class="l l-Scalar l-Scalar-Plain">12068:20250225:145309.027 cannot use database &quot;zabbix&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">database is not a Zabbix database</span>
</span></code></pre></div>
</div>
<p>Vamos verificar o serviço do servidor Zabbix para ver se ele está ativado de
modo a sobreviver a uma reinicialização</p>
<div class="admonition info">
<p class="admonition-title">verificar o status do serviço zabbix-server</p>
<p><div class="language-yaml highlight"><pre><span></span><code><span id="__span-84-1"><a id="__codelineno-84-1" name="__codelineno-84-1" href="#__codelineno-84-1"></a><span class="l l-Scalar l-Scalar-Plain">systemctl status zabbix-server</span>
</span></code></pre></div>
<div class="language-text highlight"><pre><span></span><code><span id="__span-85-1"><a id="__codelineno-85-1" name="__codelineno-85-1" href="#__codelineno-85-1"></a>zabbix-server.service - Zabbix Server
</span><span id="__span-85-2"><a id="__codelineno-85-2" name="__codelineno-85-2" href="#__codelineno-85-2"></a>Loaded: loaded (/usr/lib/systemd/system/zabbix-server.service; enabled; preset: disabled)
</span><span id="__span-85-3"><a id="__codelineno-85-3" name="__codelineno-85-3" href="#__codelineno-85-3"></a>Active: active (running) since Tue 2025-02-25 14:53:33 CET; 26min ago
</span><span id="__span-85-4"><a id="__codelineno-85-4" name="__codelineno-85-4" href="#__codelineno-85-4"></a>Main PID: 12074 (zabbix_server)
</span><span id="__span-85-5"><a id="__codelineno-85-5" name="__codelineno-85-5" href="#__codelineno-85-5"></a>Tasks: 77 (limit: 24744)
</span><span id="__span-85-6"><a id="__codelineno-85-6" name="__codelineno-85-6" href="#__codelineno-85-6"></a>Memory: 71.5M
</span><span id="__span-85-7"><a id="__codelineno-85-7" name="__codelineno-85-7" href="#__codelineno-85-7"></a>CPU: 18.535s
</span><span id="__span-85-8"><a id="__codelineno-85-8" name="__codelineno-85-8" href="#__codelineno-85-8"></a>CGroup: /system.slice/zabbix-server.service
</span><span id="__span-85-9"><a id="__codelineno-85-9" name="__codelineno-85-9" href="#__codelineno-85-9"></a>├─12074 /usr/sbin/zabbix_server -c /etc/zabbix/zabbix_server.conf
</span><span id="__span-85-10"><a id="__codelineno-85-10" name="__codelineno-85-10" href="#__codelineno-85-10"></a>├─12075 &quot;/usr/sbin/zabbix_server: ha manager&quot;
</span><span id="__span-85-11"><a id="__codelineno-85-11" name="__codelineno-85-11" href="#__codelineno-85-11"></a>├─12076 &quot;/usr/sbin/zabbix_server: service manager #1 [processed 0 events, updated 0 event tags, deleted 0 problems, synced 0 service updates, idle 5.027667 sec during 5.042628 sec]&quot;
</span><span id="__span-85-12"><a id="__codelineno-85-12" name="__codelineno-85-12" href="#__codelineno-85-12"></a>├─12077 &quot;/usr/sbin/zabbix_server: configuration syncer [synced configuration in 0.051345 sec, idle 10 sec]&quot;
</span><span id="__span-85-13"><a id="__codelineno-85-13" name="__codelineno-85-13" href="#__codelineno-85-13"></a>├─12078 &quot;/usr/sbin/zabbix_server: alert manager #1 [sent 0, failed 0 alerts, idle 5.030391 sec during 5.031944 sec]&quot;
</span><span id="__span-85-14"><a id="__codelineno-85-14" name="__codelineno-85-14" href="#__codelineno-85-14"></a>├─12079 &quot;/usr/sbin/zabbix_server: alerter #1 started&quot;
</span><span id="__span-85-15"><a id="__codelineno-85-15" name="__codelineno-85-15" href="#__codelineno-85-15"></a>├─12080 &quot;/usr/sbin/zabbix_server: alerter #2 started&quot;
</span><span id="__span-85-16"><a id="__codelineno-85-16" name="__codelineno-85-16" href="#__codelineno-85-16"></a>├─12081 &quot;/usr/sbin/zabbix_server: alerter #3 started&quot;
</span><span id="__span-85-17"><a id="__codelineno-85-17" name="__codelineno-85-17" href="#__codelineno-85-17"></a>├─12082 &quot;/usr/sbin/zabbix_server: preprocessing manager #1 [queued 0, processed 0 values, idle 5.023818 sec during 5.024830 sec]&quot;
</span><span id="__span-85-18"><a id="__codelineno-85-18" name="__codelineno-85-18" href="#__codelineno-85-18"></a>├─12083 &quot;/usr/sbin/zabbix_server: lld manager #1 [processed 0 LLD rules, idle 5.017278sec during 5.017574 sec]&quot;
</span><span id="__span-85-19"><a id="__codelineno-85-19" name="__codelineno-85-19" href="#__codelineno-85-19"></a>├─12084 &quot;/usr/sbin/zabbix_server: lld worker #1 [processed 1 LLD rules, idle 21.031209 sec during 21.063879 sec]&quot;
</span><span id="__span-85-20"><a id="__codelineno-85-20" name="__codelineno-85-20" href="#__codelineno-85-20"></a>├─12085 &quot;/usr/sbin/zabbix_server: lld worker #2 [processed 1 LLD rules, idle 43.195541 sec during 43.227934 sec]&quot;
</span><span id="__span-85-21"><a id="__codelineno-85-21" name="__codelineno-85-21" href="#__codelineno-85-21"></a>├─12086 &quot;/usr/sbin/zabbix_server: housekeeper [startup idle for 30 minutes]&quot;
</span><span id="__span-85-22"><a id="__codelineno-85-22" name="__codelineno-85-22" href="#__codelineno-85-22"></a>├─12087 &quot;/usr/sbin/zabbix_server: timer #1 [updated 0 hosts, suppressed 0 events in 0.017595 sec, idle 59 sec]&quot;
</span><span id="__span-85-23"><a id="__codelineno-85-23" name="__codelineno-85-23" href="#__codelineno-85-23"></a>├─12088 &quot;/usr/sbin/zabbix_server: http poller #1 [got 0 values in 0.000071 sec, idle 5 sec]&quot;
</span><span id="__span-85-24"><a id="__codelineno-85-24" name="__codelineno-85-24" href="#__codelineno-85-24"></a>├─12089 &quot;/usr/sbin/zabbix_server: browser poller #1 [got 0 values in 0.000066 sec, idle 5 sec]&quot;
</span><span id="__span-85-25"><a id="__codelineno-85-25" name="__codelineno-85-25" href="#__codelineno-85-25"></a>├─12090 &quot;/usr/sbin/zabbix_server: discovery manager #1 [processing 0 rules, 0 unsaved checks]&quot;
</span><span id="__span-85-26"><a id="__codelineno-85-26" name="__codelineno-85-26" href="#__codelineno-85-26"></a>├─12091 &quot;/usr/sbin/zabbix_server: history syncer #1 [processed 4 values, 3 triggers in 0.027382 sec, idle 1 sec]&quot;
</span><span id="__span-85-27"><a id="__codelineno-85-27" name="__codelineno-85-27" href="#__codelineno-85-27"></a>├─12092 &quot;/usr/sbin/zabbix_server: history syncer #2 [processed 0 values, 0 triggers in 0.000077 sec, idle 1 sec]&quot;
</span><span id="__span-85-28"><a id="__codelineno-85-28" name="__codelineno-85-28" href="#__codelineno-85-28"></a>├─12093 &quot;/usr/sbin/zabbix_server: history syncer #3 [processed 0 values, 0 triggers in 0.000076 sec, idle 1 sec]&quot;
</span><span id="__span-85-29"><a id="__codelineno-85-29" name="__codelineno-85-29" href="#__codelineno-85-29"></a>├─12094 &quot;/usr/sbin/zabbix_server: history syncer #4 [processed 0 values, 0 triggers in 0.000020 sec, idle 1 sec]&quot;
</span><span id="__span-85-30"><a id="__codelineno-85-30" name="__codelineno-85-30" href="#__codelineno-85-30"></a>├─12095 &quot;/usr/sbin/zabbix_server: escalator #1 [processed 0 escalations in 0.011627 sec, idle 3 sec]&quot;
</span><span id="__span-85-31"><a id="__codelineno-85-31" name="__codelineno-85-31" href="#__codelineno-85-31"></a>├─12096 &quot;/usr/sbin/zabbix_server: proxy poller #1 [exchanged data with 0 proxies in 0.000081 sec, idle 5 sec]&quot;
</span><span id="__span-85-32"><a id="__codelineno-85-32" name="__codelineno-85-32" href="#__codelineno-85-32"></a>├─12097 &quot;/usr/sbin/zabbix_server: self-monitoring [processed data in 0.000068 sec, idle 1 sec]&quot;
</span></code></pre></div></p>
</div>
<p>Isso conclui nosso capítulo sobre a instalação e a configuração do servidor
Zabbix com o Mariadb.</p>
<hr />
<h2 id="instalando-o-servidor-zabbix-para-postgresql">Instalando o servidor Zabbix para PostgreSQL</h2>
<p>Antes de prosseguir com a instalação do servidor Zabbix, certifique-se de que o
servidor esteja configurado corretamente, conforme descrito na seção anterior
<a href="../../ch00-getting-started/Requirements/">Requisitos do sistema</a></p>
<p>Outro passo crítico nesta etapa, se você usa sistemas baseados no Red Hat, é
desabilitar o SELinux, que pode interferir na instalação e operação do Zabbix.
Voltaremos a falar sobre o SELinux no final deste capítulo, quando nossa
instalação estiver concluída.</p>
<p>Para verificar o status atual do SELinux, você pode usar o seguinte comando:
`sestatus``</p>
<div class="admonition info">
<p class="admonition-title">verifique o status do selinux</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-86-1"><a id="__codelineno-86-1" name="__codelineno-86-1" href="#__codelineno-86-1"></a><span class="l l-Scalar l-Scalar-Plain">sestatus</span>
</span><span id="__span-86-2"><a id="__codelineno-86-2" name="__codelineno-86-2" href="#__codelineno-86-2"></a>
</span><span id="__span-86-3"><a id="__codelineno-86-3" name="__codelineno-86-3" href="#__codelineno-86-3"></a><span class="l l-Scalar l-Scalar-Plain">SELinux status</span><span class="p p-Indicator">:</span><span class="w">                 </span><span class="l l-Scalar l-Scalar-Plain">enabled</span>
</span><span id="__span-86-4"><a id="__codelineno-86-4" name="__codelineno-86-4" href="#__codelineno-86-4"></a><span class="nt">SELinuxfs mount</span><span class="p">:</span><span class="w">                </span><span class="l l-Scalar l-Scalar-Plain">/sys/fs/selinux</span>
</span><span id="__span-86-5"><a id="__codelineno-86-5" name="__codelineno-86-5" href="#__codelineno-86-5"></a><span class="nt">SELinux root directory</span><span class="p">:</span><span class="w">         </span><span class="l l-Scalar l-Scalar-Plain">/etc/selinux</span>
</span><span id="__span-86-6"><a id="__codelineno-86-6" name="__codelineno-86-6" href="#__codelineno-86-6"></a><span class="nt">Loaded policy name</span><span class="p">:</span><span class="w">             </span><span class="l l-Scalar l-Scalar-Plain">targeted</span>
</span><span id="__span-86-7"><a id="__codelineno-86-7" name="__codelineno-86-7" href="#__codelineno-86-7"></a><span class="nt">Current mode</span><span class="p">:</span><span class="w">                   </span><span class="l l-Scalar l-Scalar-Plain">enforcing</span>
</span><span id="__span-86-8"><a id="__codelineno-86-8" name="__codelineno-86-8" href="#__codelineno-86-8"></a><span class="nt">Mode from config file</span><span class="p">:</span><span class="w">          </span><span class="l l-Scalar l-Scalar-Plain">enforcing</span>
</span><span id="__span-86-9"><a id="__codelineno-86-9" name="__codelineno-86-9" href="#__codelineno-86-9"></a><span class="nt">Policy MLS status</span><span class="p">:</span><span class="w">              </span><span class="l l-Scalar l-Scalar-Plain">enabled</span>
</span><span id="__span-86-10"><a id="__codelineno-86-10" name="__codelineno-86-10" href="#__codelineno-86-10"></a><span class="nt">Policy deny_unknown status</span><span class="p">:</span><span class="w">     </span><span class="l l-Scalar l-Scalar-Plain">allowed</span>
</span><span id="__span-86-11"><a id="__codelineno-86-11" name="__codelineno-86-11" href="#__codelineno-86-11"></a><span class="nt">Memory protection checking</span><span class="p">:</span><span class="w">     </span><span class="l l-Scalar l-Scalar-Plain">actual (secure)</span>
</span><span id="__span-86-12"><a id="__codelineno-86-12" name="__codelineno-86-12" href="#__codelineno-86-12"></a><span class="nt">Max kernel policy version</span><span class="p">:</span><span class="w">      </span><span class="l l-Scalar l-Scalar-Plain">33</span>
</span></code></pre></div>
</div>
<p>Conforme mostrado, o sistema está atualmente no modo de aplicação. Para
desativar temporariamente o SELinux, você pode executar o seguinte comando:
<code>setenforce 0</code></p>
<div class="admonition info">
<p class="admonition-title">mudar selinux para permissivo</p>
<p><div class="language-yaml highlight"><pre><span></span><code><span id="__span-87-1"><a id="__codelineno-87-1" name="__codelineno-87-1" href="#__codelineno-87-1"></a><span class="l l-Scalar l-Scalar-Plain">setenforce 0</span>
</span><span id="__span-87-2"><a id="__codelineno-87-2" name="__codelineno-87-2" href="#__codelineno-87-2"></a><span class="l l-Scalar l-Scalar-Plain">sestatus</span>
</span></code></pre></div>
<div class="language-text highlight"><pre><span></span><code><span id="__span-88-1"><a id="__codelineno-88-1" name="__codelineno-88-1" href="#__codelineno-88-1"></a>SELinux status:                 enabled
</span><span id="__span-88-2"><a id="__codelineno-88-2" name="__codelineno-88-2" href="#__codelineno-88-2"></a>SELinuxfs mount:                /sys/fs/selinux
</span><span id="__span-88-3"><a id="__codelineno-88-3" name="__codelineno-88-3" href="#__codelineno-88-3"></a>SELinux root directory:         /etc/selinux
</span><span id="__span-88-4"><a id="__codelineno-88-4" name="__codelineno-88-4" href="#__codelineno-88-4"></a>Loaded policy name:             targeted
</span><span id="__span-88-5"><a id="__codelineno-88-5" name="__codelineno-88-5" href="#__codelineno-88-5"></a>Current mode:                   permissive
</span><span id="__span-88-6"><a id="__codelineno-88-6" name="__codelineno-88-6" href="#__codelineno-88-6"></a>Mode from config file:          enforcing
</span><span id="__span-88-7"><a id="__codelineno-88-7" name="__codelineno-88-7" href="#__codelineno-88-7"></a>Policy MLS status:              enabled
</span><span id="__span-88-8"><a id="__codelineno-88-8" name="__codelineno-88-8" href="#__codelineno-88-8"></a>Policy deny_unknown status:     allowed
</span><span id="__span-88-9"><a id="__codelineno-88-9" name="__codelineno-88-9" href="#__codelineno-88-9"></a>Memory protection checking:     actual (secure)
</span><span id="__span-88-10"><a id="__codelineno-88-10" name="__codelineno-88-10" href="#__codelineno-88-10"></a>Max kernel policy version:      33
</span></code></pre></div></p>
</div>
<p>Agora, como você pode ver, o modo foi alterado para permissivo. No entanto, essa
alteração não é persistente nas reinicializações. Para torná-la permanente, você
precisa modificar o arquivo de configuração do SELinux localizado em
<code>/etc/selinux/config</code>. Abra o arquivo e substitua enforcing por <code>permissive</code>.</p>
<p>Como alternativa, você pode obter o mesmo resultado mais facilmente executando o
seguinte comando:</p>
<div class="admonition info">
<p class="admonition-title">Adaptar a configuração do selinux permanentemente</p>
<p>Red Hat
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-89-1"><a id="__codelineno-89-1" name="__codelineno-89-1" href="#__codelineno-89-1"></a><span class="l l-Scalar l-Scalar-Plain">sed -i &#39;s/SELINUX=enforcing/SELINUX=permissive/g&#39; /etc/selinux/config</span>
</span></code></pre></div></p>
</div>
<p>Essa linha alterará o arquivo de configuração para você. Portanto, quando
executarmos <code>sestatus</code> novamente, veremos que estamos no modo <code>permissivo</code> e que
nosso arquivo de configuração também está no modo permissivo.</p>
<div class="admonition info">
<p class="admonition-title">verifique se tudo está desativado</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-90-1"><a id="__codelineno-90-1" name="__codelineno-90-1" href="#__codelineno-90-1"></a><span class="l l-Scalar l-Scalar-Plain">sestatus</span>
</span><span id="__span-90-2"><a id="__codelineno-90-2" name="__codelineno-90-2" href="#__codelineno-90-2"></a>
</span><span id="__span-90-3"><a id="__codelineno-90-3" name="__codelineno-90-3" href="#__codelineno-90-3"></a><span class="l l-Scalar l-Scalar-Plain">SELinux status</span><span class="p p-Indicator">:</span><span class="w">                 </span><span class="l l-Scalar l-Scalar-Plain">enabled</span>
</span><span id="__span-90-4"><a id="__codelineno-90-4" name="__codelineno-90-4" href="#__codelineno-90-4"></a><span class="nt">SELinuxfs mount</span><span class="p">:</span><span class="w">                </span><span class="l l-Scalar l-Scalar-Plain">/sys/fs/selinux</span>
</span><span id="__span-90-5"><a id="__codelineno-90-5" name="__codelineno-90-5" href="#__codelineno-90-5"></a><span class="nt">SELinux root directory</span><span class="p">:</span><span class="w">         </span><span class="l l-Scalar l-Scalar-Plain">/etc/selinux</span>
</span><span id="__span-90-6"><a id="__codelineno-90-6" name="__codelineno-90-6" href="#__codelineno-90-6"></a><span class="nt">Loaded policy name</span><span class="p">:</span><span class="w">             </span><span class="l l-Scalar l-Scalar-Plain">targeted</span>
</span><span id="__span-90-7"><a id="__codelineno-90-7" name="__codelineno-90-7" href="#__codelineno-90-7"></a><span class="nt">Current mode</span><span class="p">:</span><span class="w">                   </span><span class="l l-Scalar l-Scalar-Plain">permissive</span>
</span><span id="__span-90-8"><a id="__codelineno-90-8" name="__codelineno-90-8" href="#__codelineno-90-8"></a><span class="nt">Mode from config file</span><span class="p">:</span><span class="w">          </span><span class="l l-Scalar l-Scalar-Plain">permissive</span>
</span><span id="__span-90-9"><a id="__codelineno-90-9" name="__codelineno-90-9" href="#__codelineno-90-9"></a><span class="nt">Policy MLS status</span><span class="p">:</span><span class="w">              </span><span class="l l-Scalar l-Scalar-Plain">enabled</span>
</span><span id="__span-90-10"><a id="__codelineno-90-10" name="__codelineno-90-10" href="#__codelineno-90-10"></a><span class="nt">Policy deny_unknown status</span><span class="p">:</span><span class="w">     </span><span class="l l-Scalar l-Scalar-Plain">allowed</span>
</span><span id="__span-90-11"><a id="__codelineno-90-11" name="__codelineno-90-11" href="#__codelineno-90-11"></a><span class="nt">Memory protection checking</span><span class="p">:</span><span class="w">     </span><span class="l l-Scalar l-Scalar-Plain">actual (secure)</span>
</span><span id="__span-90-12"><a id="__codelineno-90-12" name="__codelineno-90-12" href="#__codelineno-90-12"></a><span class="nt">Max kernel policy version</span><span class="p">:</span><span class="w">      </span><span class="l l-Scalar l-Scalar-Plain">33</span>
</span></code></pre></div>
</div>
<hr />
<h3 id="adicionando-o-repositorio-zabbix_1">Adicionando o repositório Zabbix</h3>
<p>Na página de download do Zabbix
<a href="https://www.zabbix.com/download">https://www.zabbix.com/download</a>, selecione a
versão apropriada do Zabbix que você deseja instalar. Neste caso, usaremos o
Zabbix 8.0 LTS. Além disso, certifique-se de escolher a distribuição de sistema
operacional correta para seu ambiente, que será o Rocky Linux 9 ou o Ubuntu
24.04 em nosso caso.</p>
<p>Instalaremos o Zabbix Server juntamente com o NGINX como o servidor Web para o
front-end. Certifique-se de fazer o download dos pacotes relevantes para a
configuração escolhida.</p>
<p><img alt="zabbix-download" src="../../../ch01-zabbix-components/basic-installation/ch01-basic-installation-zabbixdownload.png" /></p>
<p><em>1.3 Download do Zabbix</em></p>
<p>Se você usa um sistema baseado no RHEL, como o Rocky, a primeira etapa é
desativar os pacotes Zabbix fornecidos pelo repositório EPEL, se ele estiver
instalado em seu sistema. Para fazer isso, edite o arquivo
<code>/etc/yum.repos.d/epel.repo</code> e adicione a seguinte instrução para desativar o
repositório EPEL por padrão:</p>
<div class="admonition info">
<p class="admonition-title">Adicionar exclusão ao epelrepo para o zabbix</p>
<p>Red Hat
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-91-1"><a id="__codelineno-91-1" name="__codelineno-91-1" href="#__codelineno-91-1"></a><span class="p p-Indicator">[</span><span class="nv">epel</span><span class="p p-Indicator">]</span>
</span><span id="__span-91-2"><a id="__codelineno-91-2" name="__codelineno-91-2" href="#__codelineno-91-2"></a><span class="nn">...</span>
</span><span id="__span-91-3"><a id="__codelineno-91-3" name="__codelineno-91-3" href="#__codelineno-91-3"></a><span class="l l-Scalar l-Scalar-Plain">excludepkgs=zabbix*</span>
</span></code></pre></div></p>
</div>
<details class="dica" open="open">
<summary>Dica</summary>
<p>It's considered bad practice to keep the EPEL repository enabled all the time,
as it may cause conflicts by unintentionally overwriting or installing unwanted
packages. Instead, it's safer to enable the repository only when needed, by using
the following command during installations: dnf install --enablerepo=epel <package-name>
This ensures that EPEL is only enabled when explicitly required.</p>
</details>
<p>Em seguida, instalaremos o repositório Zabbix em nosso sistema operacional.
Depois de adicionar o repositório do Zabbix, é recomendável executar uma limpeza
do repositório para remover arquivos de cache antigos e garantir que os
metadados do repositório estejam atualizados. Você pode fazer isso executando:</p>
<div class="admonition info">
<p class="admonition-title">adicionar o repositório</p>
<p>Red Hat
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-92-1"><a id="__codelineno-92-1" name="__codelineno-92-1" href="#__codelineno-92-1"></a><span class="l l-Scalar l-Scalar-Plain">rpm -Uvh https://repo.zabbix.com/zabbix/7.2/release/rocky/9/noarch/zabbix-release-latest-7.2.el9.noarch.rpm</span>
</span><span id="__span-92-2"><a id="__codelineno-92-2" name="__codelineno-92-2" href="#__codelineno-92-2"></a><span class="l l-Scalar l-Scalar-Plain">dnf clean all</span>
</span></code></pre></div></p>
<p>Ubuntu
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-93-1"><a id="__codelineno-93-1" name="__codelineno-93-1" href="#__codelineno-93-1"></a><span class="l l-Scalar l-Scalar-Plain">sudo wget https://repo.zabbix.com/zabbix/7.2/release/ubuntu/pool/main/z/zabbix-release/zabbix-release_latest_7.2+ubuntu24.04_all.deb</span>
</span><span id="__span-93-2"><a id="__codelineno-93-2" name="__codelineno-93-2" href="#__codelineno-93-2"></a><span class="l l-Scalar l-Scalar-Plain">sudo dpkg -i zabbix-release_latest_7.2+ubuntu24.04_all.deb</span>
</span><span id="__span-93-3"><a id="__codelineno-93-3" name="__codelineno-93-3" href="#__codelineno-93-3"></a><span class="l l-Scalar l-Scalar-Plain">sudo apt update</span>
</span></code></pre></div></p>
</div>
<p>Isso atualizará os metadados do repositório e preparará o sistema para a
instalação do Zabbix.</p>
<details class="nota" open="open">
<summary>Nota</summary>
<p>A repository in Linux is a configuration that allows you to access and install
software packages. You can think of it like an "app store" where you find and
download software from a trusted source, in this case, the Zabbix repository.
Many repositories are available, but it's important to only add those you trust.
The safest practice is to stick to the repositories provided by your operating
system and only add additional ones when you're sure they are both trusted and
necessary.</p>
<p>For our installation, the Zabbix repository is provided by the vendor itself,
making it a trusted source. Another popular and safe repository for
Red Hat-based systems is EPEL (Extra Packages for Enterprise Linux), which is
commonly used in enterprise environments.
However, always exercise caution when adding new repositories to ensure
system security and stability.</p>
</details>
<hr />
<h3 id="configuracao-do-servidor-zabbix-para-postgresql">Configuração do servidor Zabbix para PostgreSQL</h3>
<p>Estamos prontos para instalar o servidor Zabbix e o servidor Web. Lembre-se de
que o servidor Web não precisa ser instalado na mesma máquina que o servidor
Zabbix; eles podem ser hospedados em sistemas separados, se desejado.</p>
<p>Para instalar o servidor Zabbix e os componentes do servidor Web para o
PostgreSQL, execute o seguinte comando:</p>
<div class="admonition info">
<p class="admonition-title">instalar servidor zabbix</p>
<p>Red Hat</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-94-1"><a id="__codelineno-94-1" name="__codelineno-94-1" href="#__codelineno-94-1"></a><span class="l l-Scalar l-Scalar-Plain">dnf install zabbix-server-pgsql</span>
</span></code></pre></div>
<p>Ubuntu</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-95-1"><a id="__codelineno-95-1" name="__codelineno-95-1" href="#__codelineno-95-1"></a><span class="l l-Scalar l-Scalar-Plain">sudo apt install zabbix-server-pgsql</span>
</span></code></pre></div>
</div>
<p>Depois de instalar com sucesso os pacotes do Zabbix Server, precisamos
configurar o Zabbix Server para se conectar ao banco de dados. Para isso, é
necessário modificar o arquivo de configuração do Zabbix Server. Abra o arquivo
<code>/etc/zabbix/zabbix_server.conf</code> e atualize as seguintes linhas para que
correspondam à configuração do seu banco de dados:</p>
<div class="admonition info">
<p class="admonition-title">Editar configuração do servidor zabbix</p>
<p>Red Hat and Ubuntu
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-96-1"><a id="__codelineno-96-1" name="__codelineno-96-1" href="#__codelineno-96-1"></a><span class="c1">#sudo vi /etc/zabbix/zabbix_server.conf</span>
</span></code></pre></div></p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-97-1"><a id="__codelineno-97-1" name="__codelineno-97-1" href="#__codelineno-97-1"></a><span class="l l-Scalar l-Scalar-Plain">DBHost=&lt;database-host&gt;</span>
</span><span id="__span-97-2"><a id="__codelineno-97-2" name="__codelineno-97-2" href="#__codelineno-97-2"></a><span class="l l-Scalar l-Scalar-Plain">DBName=&lt;database-name&gt;</span>
</span><span id="__span-97-3"><a id="__codelineno-97-3" name="__codelineno-97-3" href="#__codelineno-97-3"></a><span class="l l-Scalar l-Scalar-Plain">DBSchema=&lt;database-schema&gt;</span>
</span><span id="__span-97-4"><a id="__codelineno-97-4" name="__codelineno-97-4" href="#__codelineno-97-4"></a><span class="l l-Scalar l-Scalar-Plain">DBUser=&lt;database-user&gt;</span>
</span><span id="__span-97-5"><a id="__codelineno-97-5" name="__codelineno-97-5" href="#__codelineno-97-5"></a><span class="l l-Scalar l-Scalar-Plain">DBPassword=&lt;database-password&gt;</span>
</span></code></pre></div>
</div>
<p>Substitua <code>database-host</code>, <code>database-name</code>, <code>database-user</code>,<code>database-schema</code> e
<code>database-password</code> pelos valores apropriados para sua configuração. Isso
garante que o servidor Zabbix possa se comunicar com seu banco de dados.</p>
<p>Certifique-se de que não há nenhum # (símbolo de comentário) na frente dos
parâmetros de configuração, pois o Zabbix tratará as linhas que começam com #
como comentários, ignorando-as durante a execução. Além disso, verifique se há
linhas de configuração duplicadas; se houver várias linhas com o mesmo
parâmetro, o Zabbix usará o valor da última ocorrência.</p>
<p>Para nossa instalação, a configuração será semelhante a esta:</p>
<div class="admonition info">
<p class="admonition-title">Exemplo de configuração</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-98-1"><a id="__codelineno-98-1" name="__codelineno-98-1" href="#__codelineno-98-1"></a><span class="l l-Scalar l-Scalar-Plain">DBHost=&lt;ip or dns of your PostgreSQL server&gt;</span>
</span><span id="__span-98-2"><a id="__codelineno-98-2" name="__codelineno-98-2" href="#__codelineno-98-2"></a><span class="l l-Scalar l-Scalar-Plain">DBName=zabbix</span>
</span><span id="__span-98-3"><a id="__codelineno-98-3" name="__codelineno-98-3" href="#__codelineno-98-3"></a><span class="l l-Scalar l-Scalar-Plain">DBSchema=zabbix_server</span>
</span><span id="__span-98-4"><a id="__codelineno-98-4" name="__codelineno-98-4" href="#__codelineno-98-4"></a><span class="l l-Scalar l-Scalar-Plain">DBUser=zabbix-srv</span>
</span><span id="__span-98-5"><a id="__codelineno-98-5" name="__codelineno-98-5" href="#__codelineno-98-5"></a><span class="l l-Scalar l-Scalar-Plain">DBPassword=&lt;your super secret password&gt;</span>
</span><span id="__span-98-6"><a id="__codelineno-98-6" name="__codelineno-98-6" href="#__codelineno-98-6"></a><span class="l l-Scalar l-Scalar-Plain">DBPort=5432</span>
</span></code></pre></div>
</div>
<p>Neste exemplo:</p>
<ul>
<li>DBHost refere-se ao host em que seu banco de dados está sendo executado (use
  localhost se estiver na mesma máquina).</li>
<li>DBName é o nome do banco de dados do Zabbix.</li>
<li>DBUser é o usuário do banco de dados.</li>
<li>DBPassword é a senha do usuário do banco de dados.</li>
</ul>
<p>Certifique-se de que as configurações reflitam a configuração do banco de dados
de seu ambiente.</p>
<details class="nota" open="open">
<summary>Nota</summary>
<p>The Zabbix server configuration file offers an option to include additional
configuration files for custom parameters. For a production environment, it's
often best to avoid altering the original configuration file directly. Instead,
you can create and include a separate configuration file for any additional or
modified parameters. This approach ensures that your original configuration
file remains untouched, which is particularly useful when performing upgrades
or managing configurations with tools like Ansible, Puppet, or SaltStack.</p>
</details>
<p>Para ativar esse recurso, remova o # da linha:</p>
<div class="admonition informações">
<p><code># Include=/usr/local/etc/zabbix_server.conf.d/*.conf</code></p>
</div>
<p>Certifique-se de que o caminho <code>/usr/local/etc/zabbix_server.conf.d/</code> exista e
crie um arquivo de configuração personalizado nesse diretório. Esse arquivo deve
poder ser lido pelo usuário <code>zabbix</code>. Ao fazer isso, você pode adicionar ou
modificar parâmetros sem modificar o arquivo de configuração padrão, o que
facilita o gerenciamento e as atualizações do sistema.</p>
<p>Com a configuração do servidor Zabbix atualizada para se conectar ao seu banco
de dados, agora você pode iniciar e ativar o serviço do servidor Zabbix. Execute
o seguinte comando para ativar o servidor Zabbix e garantir que ele seja
iniciado automaticamente na inicialização:</p>
<div class="admonition info">
<p class="admonition-title">ativar o serviço do servidor zabbix e iniciar</p>
<p>Red Hat
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-99-1"><a id="__codelineno-99-1" name="__codelineno-99-1" href="#__codelineno-99-1"></a><span class="l l-Scalar l-Scalar-Plain">systemctl enable zabbix-server --now</span>
</span></code></pre></div></p>
<p>Ubuntu
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-100-1"><a id="__codelineno-100-1" name="__codelineno-100-1" href="#__codelineno-100-1"></a><span class="l l-Scalar l-Scalar-Plain">sudo systemctl enable zabbix-server --now</span>
</span></code></pre></div></p>
</div>
<p>Esse comando iniciará o serviço do servidor Zabbix imediatamente e o configurará
para ser iniciado na inicialização do sistema. Para verificar se o servidor
Zabbix está funcionando corretamente, verifique se há mensagens no arquivo de
registro. É possível visualizar as entradas mais recentes no arquivo de registro
<code>Zabbix server</code> usando:</p>
<div class="admonition info">
<p class="admonition-title">verifique o arquivo de registro do zabbix</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-101-1"><a id="__codelineno-101-1" name="__codelineno-101-1" href="#__codelineno-101-1"></a><span class="l l-Scalar l-Scalar-Plain">tail /var/log/zabbix/zabbix_server.log</span>
</span></code></pre></div>
</div>
<p>Procure mensagens que indiquem que o servidor foi iniciado com êxito. Se houver
algum problema, o arquivo de registro fornecerá detalhes para ajudar na solução
de problemas.</p>
<div class="admonition info">
<p class="admonition-title">Exemplo de saída de registro</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-102-1"><a id="__codelineno-102-1" name="__codelineno-102-1" href="#__codelineno-102-1"></a><span class="l l-Scalar l-Scalar-Plain">12074:20250225:145333.529 Starting Zabbix Server. Zabbix 7.2.4 (revision c34078a4563).</span>
</span><span id="__span-102-2"><a id="__codelineno-102-2" name="__codelineno-102-2" href="#__codelineno-102-2"></a><span class="l l-Scalar l-Scalar-Plain">12074:20250225:145333.530 ****** Enabled features ******</span>
</span><span id="__span-102-3"><a id="__codelineno-102-3" name="__codelineno-102-3" href="#__codelineno-102-3"></a><span class="l l-Scalar l-Scalar-Plain">12074:20250225:145333.530 SNMP monitoring</span><span class="p p-Indicator">:</span><span class="w">           </span><span class="l l-Scalar l-Scalar-Plain">YES</span>
</span><span id="__span-102-4"><a id="__codelineno-102-4" name="__codelineno-102-4" href="#__codelineno-102-4"></a><span class="nt">12074:20250225:145333.530 IPMI monitoring</span><span class="p">:</span><span class="w">           </span><span class="l l-Scalar l-Scalar-Plain">YES</span>
</span><span id="__span-102-5"><a id="__codelineno-102-5" name="__codelineno-102-5" href="#__codelineno-102-5"></a><span class="nt">12074:20250225:145333.530 Web monitoring</span><span class="p">:</span><span class="w">            </span><span class="l l-Scalar l-Scalar-Plain">YES</span>
</span><span id="__span-102-6"><a id="__codelineno-102-6" name="__codelineno-102-6" href="#__codelineno-102-6"></a><span class="nt">12074:20250225:145333.530 VMware monitoring</span><span class="p">:</span><span class="w">         </span><span class="l l-Scalar l-Scalar-Plain">YES</span>
</span><span id="__span-102-7"><a id="__codelineno-102-7" name="__codelineno-102-7" href="#__codelineno-102-7"></a><span class="nt">12074:20250225:145333.530 SMTP authentication</span><span class="p">:</span><span class="w">       </span><span class="l l-Scalar l-Scalar-Plain">YES</span>
</span><span id="__span-102-8"><a id="__codelineno-102-8" name="__codelineno-102-8" href="#__codelineno-102-8"></a><span class="nt">12074:20250225:145333.530 ODBC</span><span class="p">:</span><span class="w">                      </span><span class="l l-Scalar l-Scalar-Plain">YES</span>
</span><span id="__span-102-9"><a id="__codelineno-102-9" name="__codelineno-102-9" href="#__codelineno-102-9"></a><span class="nt">12074:20250225:145333.530 SSH support</span><span class="p">:</span><span class="w">               </span><span class="l l-Scalar l-Scalar-Plain">YES</span>
</span><span id="__span-102-10"><a id="__codelineno-102-10" name="__codelineno-102-10" href="#__codelineno-102-10"></a><span class="nt">12074:20250225:145333.530 IPv6 support</span><span class="p">:</span><span class="w">              </span><span class="l l-Scalar l-Scalar-Plain">YES</span>
</span><span id="__span-102-11"><a id="__codelineno-102-11" name="__codelineno-102-11" href="#__codelineno-102-11"></a><span class="nt">12074:20250225:145333.530 TLS support</span><span class="p">:</span><span class="w">               </span><span class="l l-Scalar l-Scalar-Plain">YES</span>
</span><span id="__span-102-12"><a id="__codelineno-102-12" name="__codelineno-102-12" href="#__codelineno-102-12"></a><span class="l l-Scalar l-Scalar-Plain">12074:20250225:145333.530 ******************************</span>
</span><span id="__span-102-13"><a id="__codelineno-102-13" name="__codelineno-102-13" href="#__codelineno-102-13"></a><span class="nt">12074:20250225:145333.530 using configuration file</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/etc/zabbix/zabbix_server.conf</span>
</span><span id="__span-102-14"><a id="__codelineno-102-14" name="__codelineno-102-14" href="#__codelineno-102-14"></a><span class="nt">12074:20250225:145333.545 current database version (mandatory/optional)</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">07020000/07020000</span>
</span><span id="__span-102-15"><a id="__codelineno-102-15" name="__codelineno-102-15" href="#__codelineno-102-15"></a><span class="nt">12074:20250225:145333.545 required mandatory version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">07020000</span>
</span><span id="__span-102-16"><a id="__codelineno-102-16" name="__codelineno-102-16" href="#__codelineno-102-16"></a><span class="l l-Scalar l-Scalar-Plain">12075:20250225:145333.557 starting HA manager</span>
</span><span id="__span-102-17"><a id="__codelineno-102-17" name="__codelineno-102-17" href="#__codelineno-102-17"></a><span class="l l-Scalar l-Scalar-Plain">12075:20250225:145333.566 HA manager started in active mode</span>
</span><span id="__span-102-18"><a id="__codelineno-102-18" name="__codelineno-102-18" href="#__codelineno-102-18"></a><span class="l l-Scalar l-Scalar-Plain">12074:20250225:145333.567 server</span><span class="w"> </span><span class="c1">#0 started [main process]</span>
</span><span id="__span-102-19"><a id="__codelineno-102-19" name="__codelineno-102-19" href="#__codelineno-102-19"></a><span class="l l-Scalar l-Scalar-Plain">12076:20250225:145333.567 server</span><span class="w"> </span><span class="c1">#1 started [service manager #1]</span>
</span><span id="__span-102-20"><a id="__codelineno-102-20" name="__codelineno-102-20" href="#__codelineno-102-20"></a><span class="l l-Scalar l-Scalar-Plain">12077:20250225:145333.567 server</span><span class="w"> </span><span class="c1">#2 started [configuration syncer #1]</span>
</span><span id="__span-102-21"><a id="__codelineno-102-21" name="__codelineno-102-21" href="#__codelineno-102-21"></a><span class="l l-Scalar l-Scalar-Plain">12078:20250225:145333.718 server</span><span class="w"> </span><span class="c1">#3 started [alert manager #1]</span>
</span><span id="__span-102-22"><a id="__codelineno-102-22" name="__codelineno-102-22" href="#__codelineno-102-22"></a><span class="l l-Scalar l-Scalar-Plain">12079:20250225:145333.719 server</span><span class="w"> </span><span class="c1">#4 started [alerter #1]</span>
</span><span id="__span-102-23"><a id="__codelineno-102-23" name="__codelineno-102-23" href="#__codelineno-102-23"></a><span class="l l-Scalar l-Scalar-Plain">12080:20250225:145333.719 server</span><span class="w"> </span><span class="c1">#5 started [alerter #2]</span>
</span><span id="__span-102-24"><a id="__codelineno-102-24" name="__codelineno-102-24" href="#__codelineno-102-24"></a><span class="l l-Scalar l-Scalar-Plain">12081:20250225:145333.719 server</span><span class="w"> </span><span class="c1">#6 started [alerter #3]</span>
</span><span id="__span-102-25"><a id="__codelineno-102-25" name="__codelineno-102-25" href="#__codelineno-102-25"></a><span class="l l-Scalar l-Scalar-Plain">12082:20250225:145333.719 server</span><span class="w"> </span><span class="c1">#7 started [preprocessing manager #1]</span>
</span><span id="__span-102-26"><a id="__codelineno-102-26" name="__codelineno-102-26" href="#__codelineno-102-26"></a><span class="l l-Scalar l-Scalar-Plain">12083:20250225:145333.719 server</span><span class="w"> </span><span class="c1">#8 started [lld manager #1]</span>
</span></code></pre></div>
</div>
<p>Se houvesse um erro e o servidor não conseguisse se conectar ao banco de dados,
você veria algo assim no arquivo de registro do servidor:</p>
<div class="admonition info">
<p class="admonition-title">Exemplo de um erro no registro</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-103-1"><a id="__codelineno-103-1" name="__codelineno-103-1" href="#__codelineno-103-1"></a><span class="l l-Scalar l-Scalar-Plain">12068:20250225:145309.018 Starting Zabbix Server. Zabbix 7.2.4 (revision c34078a4563).</span>
</span><span id="__span-103-2"><a id="__codelineno-103-2" name="__codelineno-103-2" href="#__codelineno-103-2"></a><span class="l l-Scalar l-Scalar-Plain">12068:20250225:145309.018 ****** Enabled features ******</span>
</span><span id="__span-103-3"><a id="__codelineno-103-3" name="__codelineno-103-3" href="#__codelineno-103-3"></a><span class="l l-Scalar l-Scalar-Plain">12068:20250225:145309.018 SNMP monitoring</span><span class="p p-Indicator">:</span><span class="w">           </span><span class="l l-Scalar l-Scalar-Plain">YES</span>
</span><span id="__span-103-4"><a id="__codelineno-103-4" name="__codelineno-103-4" href="#__codelineno-103-4"></a><span class="nt">12068:20250225:145309.018 IPMI monitoring</span><span class="p">:</span><span class="w">           </span><span class="l l-Scalar l-Scalar-Plain">YES</span>
</span><span id="__span-103-5"><a id="__codelineno-103-5" name="__codelineno-103-5" href="#__codelineno-103-5"></a><span class="nt">12068:20250225:145309.018 Web monitoring</span><span class="p">:</span><span class="w">            </span><span class="l l-Scalar l-Scalar-Plain">YES</span>
</span><span id="__span-103-6"><a id="__codelineno-103-6" name="__codelineno-103-6" href="#__codelineno-103-6"></a><span class="nt">12068:20250225:145309.018 VMware monitoring</span><span class="p">:</span><span class="w">         </span><span class="l l-Scalar l-Scalar-Plain">YES</span>
</span><span id="__span-103-7"><a id="__codelineno-103-7" name="__codelineno-103-7" href="#__codelineno-103-7"></a><span class="nt">12068:20250225:145309.018 SMTP authentication</span><span class="p">:</span><span class="w">       </span><span class="l l-Scalar l-Scalar-Plain">YES</span>
</span><span id="__span-103-8"><a id="__codelineno-103-8" name="__codelineno-103-8" href="#__codelineno-103-8"></a><span class="nt">12068:20250225:145309.018 ODBC</span><span class="p">:</span><span class="w">                      </span><span class="l l-Scalar l-Scalar-Plain">YES</span>
</span><span id="__span-103-9"><a id="__codelineno-103-9" name="__codelineno-103-9" href="#__codelineno-103-9"></a><span class="nt">12068:20250225:145309.018 SSH support</span><span class="p">:</span><span class="w">               </span><span class="l l-Scalar l-Scalar-Plain">YES</span>
</span><span id="__span-103-10"><a id="__codelineno-103-10" name="__codelineno-103-10" href="#__codelineno-103-10"></a><span class="nt">12068:20250225:145309.018 IPv6 support</span><span class="p">:</span><span class="w">              </span><span class="l l-Scalar l-Scalar-Plain">YES</span>
</span><span id="__span-103-11"><a id="__codelineno-103-11" name="__codelineno-103-11" href="#__codelineno-103-11"></a><span class="nt">12068:20250225:145309.018 TLS support</span><span class="p">:</span><span class="w">               </span><span class="l l-Scalar l-Scalar-Plain">YES</span>
</span><span id="__span-103-12"><a id="__codelineno-103-12" name="__codelineno-103-12" href="#__codelineno-103-12"></a><span class="l l-Scalar l-Scalar-Plain">12068:20250225:145309.018 ******************************</span>
</span><span id="__span-103-13"><a id="__codelineno-103-13" name="__codelineno-103-13" href="#__codelineno-103-13"></a><span class="nt">12068:20250225:145309.018 using configuration file</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/etc/zabbix/zabbix_server.conf</span>
</span><span id="__span-103-14"><a id="__codelineno-103-14" name="__codelineno-103-14" href="#__codelineno-103-14"></a><span class="l l-Scalar l-Scalar-Plain">12068:20250225:145309.027 [Z3005] query failed</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">1146</span><span class="p p-Indicator">]</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Table &#39;zabbix.users&#39; doesn&#39;t exist [select userid from users limit 1]</span>
</span><span id="__span-103-15"><a id="__codelineno-103-15" name="__codelineno-103-15" href="#__codelineno-103-15"></a><span class="l l-Scalar l-Scalar-Plain">12068:20250225:145309.027 cannot use database &quot;zabbix&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">database is not a Zabbix database</span>
</span></code></pre></div>
</div>
<p>Vamos verificar o serviço do servidor Zabbix para ver se ele está ativado de
modo a sobreviver a uma reinicialização</p>
<div class="admonition info">
<p class="admonition-title">verificar status do servidor</p>
<p><div class="language-yaml highlight"><pre><span></span><code><span id="__span-104-1"><a id="__codelineno-104-1" name="__codelineno-104-1" href="#__codelineno-104-1"></a><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">systemctl status zabbix-server</span>
</span></code></pre></div>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-105-1"><a id="__codelineno-105-1" name="__codelineno-105-1" href="#__codelineno-105-1"></a><span class="l l-Scalar l-Scalar-Plain">● zabbix-server.service - Zabbix Server</span>
</span><span id="__span-105-2"><a id="__codelineno-105-2" name="__codelineno-105-2" href="#__codelineno-105-2"></a><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Loaded</span><span class="nt">: loaded (/usr/lib/systemd/system/zabbix-server.service; enabled; preset</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">disabled)</span>
</span><span id="__span-105-3"><a id="__codelineno-105-3" name="__codelineno-105-3" href="#__codelineno-105-3"></a><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Active</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">active (running) since Tue 2025-02-25 14:53:33 CET; 26min ago</span>
</span><span id="__span-105-4"><a id="__codelineno-105-4" name="__codelineno-105-4" href="#__codelineno-105-4"></a><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Main PID</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">12074 (zabbix_server)</span>
</span><span id="__span-105-5"><a id="__codelineno-105-5" name="__codelineno-105-5" href="#__codelineno-105-5"></a><span class="w">      </span><span class="l l-Scalar l-Scalar-Plain">Tasks</span><span class="nt">: 77 (limit</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">24744)</span>
</span><span id="__span-105-6"><a id="__codelineno-105-6" name="__codelineno-105-6" href="#__codelineno-105-6"></a><span class="w">      </span><span class="l l-Scalar l-Scalar-Plain">Memory</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">71.5M</span>
</span><span id="__span-105-7"><a id="__codelineno-105-7" name="__codelineno-105-7" href="#__codelineno-105-7"></a><span class="w">         </span><span class="l l-Scalar l-Scalar-Plain">CPU</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">18.535s</span>
</span><span id="__span-105-8"><a id="__codelineno-105-8" name="__codelineno-105-8" href="#__codelineno-105-8"></a><span class="w">      </span><span class="l l-Scalar l-Scalar-Plain">CGroup</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/system.slice/zabbix-server.service</span>
</span><span id="__span-105-9"><a id="__codelineno-105-9" name="__codelineno-105-9" href="#__codelineno-105-9"></a><span class="w">              </span><span class="l l-Scalar l-Scalar-Plain">├─12074 /usr/sbin/zabbix_server -c /etc/zabbix/zabbix_server.conf</span>
</span><span id="__span-105-10"><a id="__codelineno-105-10" name="__codelineno-105-10" href="#__codelineno-105-10"></a><span class="w">              </span><span class="l l-Scalar l-Scalar-Plain">├─12075 &quot;/usr/sbin/zabbix_server</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ha manager&quot;</span>
</span><span id="__span-105-11"><a id="__codelineno-105-11" name="__codelineno-105-11" href="#__codelineno-105-11"></a><span class="w">              </span><span class="l l-Scalar l-Scalar-Plain">├─12076 &quot;/usr/sbin/zabbix_server</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">service manager</span><span class="w"> </span><span class="c1">#1 [processed 0 events, updated 0 event tags, deleted 0 problems, synced 0 service updates, idle 5.027667 sec during 5.042628 sec]&quot;</span>
</span><span id="__span-105-12"><a id="__codelineno-105-12" name="__codelineno-105-12" href="#__codelineno-105-12"></a><span class="w">              </span><span class="l l-Scalar l-Scalar-Plain">├─12077 &quot;/usr/sbin/zabbix_server</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">configuration syncer [synced configuration in 0.051345 sec, idle 10 sec]&quot;</span>
</span><span id="__span-105-13"><a id="__codelineno-105-13" name="__codelineno-105-13" href="#__codelineno-105-13"></a><span class="w">              </span><span class="l l-Scalar l-Scalar-Plain">├─12078 &quot;/usr/sbin/zabbix_server</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">alert manager</span><span class="w"> </span><span class="c1">#1 [sent 0, failed 0 alerts, idle 5.030391 sec during 5.031944 sec]&quot;</span>
</span><span id="__span-105-14"><a id="__codelineno-105-14" name="__codelineno-105-14" href="#__codelineno-105-14"></a><span class="w">              </span><span class="l l-Scalar l-Scalar-Plain">├─12079 &quot;/usr/sbin/zabbix_server</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">alerter</span><span class="w"> </span><span class="c1">#1 started&quot;</span>
</span><span id="__span-105-15"><a id="__codelineno-105-15" name="__codelineno-105-15" href="#__codelineno-105-15"></a><span class="w">              </span><span class="l l-Scalar l-Scalar-Plain">├─12080 &quot;/usr/sbin/zabbix_server</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">alerter</span><span class="w"> </span><span class="c1">#2 started&quot;</span>
</span><span id="__span-105-16"><a id="__codelineno-105-16" name="__codelineno-105-16" href="#__codelineno-105-16"></a><span class="w">              </span><span class="l l-Scalar l-Scalar-Plain">├─12081 &quot;/usr/sbin/zabbix_server</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">alerter</span><span class="w"> </span><span class="c1">#3 started&quot;</span>
</span><span id="__span-105-17"><a id="__codelineno-105-17" name="__codelineno-105-17" href="#__codelineno-105-17"></a><span class="w">              </span><span class="l l-Scalar l-Scalar-Plain">├─12082 &quot;/usr/sbin/zabbix_server</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">preprocessing manager</span><span class="w"> </span><span class="c1">#1 [queued 0, processed 0 values, idle 5.023818 sec during 5.024830 sec]&quot;</span>
</span><span id="__span-105-18"><a id="__codelineno-105-18" name="__codelineno-105-18" href="#__codelineno-105-18"></a><span class="w">              </span><span class="l l-Scalar l-Scalar-Plain">├─12083 &quot;/usr/sbin/zabbix_server</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">lld manager</span><span class="w"> </span><span class="c1">#1 [processed 0 LLD rules, idle 5.017278sec during 5.017574 sec]&quot;</span>
</span><span id="__span-105-19"><a id="__codelineno-105-19" name="__codelineno-105-19" href="#__codelineno-105-19"></a><span class="w">              </span><span class="l l-Scalar l-Scalar-Plain">├─12084 &quot;/usr/sbin/zabbix_server</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">lld worker</span><span class="w"> </span><span class="c1">#1 [processed 1 LLD rules, idle 21.031209 sec during 21.063879 sec]&quot;</span>
</span><span id="__span-105-20"><a id="__codelineno-105-20" name="__codelineno-105-20" href="#__codelineno-105-20"></a><span class="w">              </span><span class="l l-Scalar l-Scalar-Plain">├─12085 &quot;/usr/sbin/zabbix_server</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">lld worker</span><span class="w"> </span><span class="c1">#2 [processed 1 LLD rules, idle 43.195541 sec during 43.227934 sec]&quot;</span>
</span><span id="__span-105-21"><a id="__codelineno-105-21" name="__codelineno-105-21" href="#__codelineno-105-21"></a><span class="w">              </span><span class="l l-Scalar l-Scalar-Plain">├─12086 &quot;/usr/sbin/zabbix_server</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">housekeeper [startup idle for 30 minutes]&quot;</span>
</span><span id="__span-105-22"><a id="__codelineno-105-22" name="__codelineno-105-22" href="#__codelineno-105-22"></a><span class="w">              </span><span class="l l-Scalar l-Scalar-Plain">├─12087 &quot;/usr/sbin/zabbix_server</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">timer</span><span class="w"> </span><span class="c1">#1 [updated 0 hosts, suppressed 0 events in 0.017595 sec, idle 59 sec]&quot;</span>
</span><span id="__span-105-23"><a id="__codelineno-105-23" name="__codelineno-105-23" href="#__codelineno-105-23"></a><span class="w">              </span><span class="l l-Scalar l-Scalar-Plain">├─12088 &quot;/usr/sbin/zabbix_server</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">http poller</span><span class="w"> </span><span class="c1">#1 [got 0 values in 0.000071 sec, idle 5 sec]&quot;</span>
</span><span id="__span-105-24"><a id="__codelineno-105-24" name="__codelineno-105-24" href="#__codelineno-105-24"></a><span class="w">              </span><span class="l l-Scalar l-Scalar-Plain">├─12089 &quot;/usr/sbin/zabbix_server</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">browser poller</span><span class="w"> </span><span class="c1">#1 [got 0 values in 0.000066 sec, idle 5 sec]&quot;</span>
</span><span id="__span-105-25"><a id="__codelineno-105-25" name="__codelineno-105-25" href="#__codelineno-105-25"></a><span class="w">              </span><span class="l l-Scalar l-Scalar-Plain">├─12090 &quot;/usr/sbin/zabbix_server</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">discovery manager</span><span class="w"> </span><span class="c1">#1 [processing 0 rules, 0 unsaved checks]&quot;</span>
</span><span id="__span-105-26"><a id="__codelineno-105-26" name="__codelineno-105-26" href="#__codelineno-105-26"></a><span class="w">              </span><span class="l l-Scalar l-Scalar-Plain">├─12091 &quot;/usr/sbin/zabbix_server</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">history syncer</span><span class="w"> </span><span class="c1">#1 [processed 4 values, 3 triggers in 0.027382 sec, idle 1 sec]&quot;</span>
</span><span id="__span-105-27"><a id="__codelineno-105-27" name="__codelineno-105-27" href="#__codelineno-105-27"></a><span class="w">              </span><span class="l l-Scalar l-Scalar-Plain">├─12092 &quot;/usr/sbin/zabbix_server</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">history syncer</span><span class="w"> </span><span class="c1">#2 [processed 0 values, 0 triggers in 0.000077 sec, idle 1 sec]&quot;</span>
</span><span id="__span-105-28"><a id="__codelineno-105-28" name="__codelineno-105-28" href="#__codelineno-105-28"></a><span class="w">              </span><span class="l l-Scalar l-Scalar-Plain">├─12093 &quot;/usr/sbin/zabbix_server</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">history syncer</span><span class="w"> </span><span class="c1">#3 [processed 0 values, 0 triggers in 0.000076 sec, idle 1 sec]&quot;</span>
</span><span id="__span-105-29"><a id="__codelineno-105-29" name="__codelineno-105-29" href="#__codelineno-105-29"></a><span class="w">              </span><span class="l l-Scalar l-Scalar-Plain">├─12094 &quot;/usr/sbin/zabbix_server</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">history syncer</span><span class="w"> </span><span class="c1">#4 [processed 0 values, 0 triggers in 0.000020 sec, idle 1 sec]&quot;</span>
</span><span id="__span-105-30"><a id="__codelineno-105-30" name="__codelineno-105-30" href="#__codelineno-105-30"></a><span class="w">              </span><span class="l l-Scalar l-Scalar-Plain">├─12095 &quot;/usr/sbin/zabbix_server</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">escalator</span><span class="w"> </span><span class="c1">#1 [processed 0 escalations in 0.011627 sec, idle 3 sec]&quot;</span>
</span><span id="__span-105-31"><a id="__codelineno-105-31" name="__codelineno-105-31" href="#__codelineno-105-31"></a><span class="w">              </span><span class="l l-Scalar l-Scalar-Plain">├─12096 &quot;/usr/sbin/zabbix_server</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">proxy poller</span><span class="w"> </span><span class="c1">#1 [exchanged data with 0 proxies in 0.000081 sec, idle 5 sec]&quot;</span>
</span><span id="__span-105-32"><a id="__codelineno-105-32" name="__codelineno-105-32" href="#__codelineno-105-32"></a><span class="w">              </span><span class="l l-Scalar l-Scalar-Plain">├─12097 &quot;/usr/sbin/zabbix_server</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">self-monitoring [processed data in 0.000068 sec, idle 1 sec]&quot;</span>
</span></code></pre></div></p>
</div>
<p>Isso conclui nosso capítulo sobre a instalação e a configuração do servidor
Zabbix com o PostgreSQL.</p>
<hr />
<h2 id="instalando-o-front-end">Instalando o front-end</h2>
<p>Antes de configurar o front-end, você precisa instalar os pacotes necessários.
Se o front-end do Zabbix estiver hospedado no mesmo servidor que o servidor
Zabbix, você poderá instalar os pacotes no mesmo servidor, como no nosso caso.
Também é perfeitamente possível instalar o front-end em outro servidor. Nesse
caso, você só precisa especificar os endereços IP corretos e abrir as portas
corretas do firewall.</p>
<hr />
<h3 id="instalando-o-front-end-com-o-nginx">Instalando o front-end com o NGINX</h3>
<div class="admonition info">
<p class="admonition-title">instalar pacotes de front-end</p>
<p>Red Hat
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-106-1"><a id="__codelineno-106-1" name="__codelineno-106-1" href="#__codelineno-106-1"></a><span class="c1"># dnf install zabbix-nginx-conf zabbix-web-mysql</span>
</span><span id="__span-106-2"><a id="__codelineno-106-2" name="__codelineno-106-2" href="#__codelineno-106-2"></a><span class="l l-Scalar l-Scalar-Plain">or if you used PostgreSQL</span>
</span><span id="__span-106-3"><a id="__codelineno-106-3" name="__codelineno-106-3" href="#__codelineno-106-3"></a><span class="l l-Scalar l-Scalar-Plain"># dnf install zabbix-nginx-conf zabbix-web-pgsql</span>
</span></code></pre></div></p>
<p>Ubuntu
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-107-1"><a id="__codelineno-107-1" name="__codelineno-107-1" href="#__codelineno-107-1"></a><span class="c1"># sudo apt install zabbix-frontend-php php8.3-mysql zabbix-nginx-conf</span>
</span><span id="__span-107-2"><a id="__codelineno-107-2" name="__codelineno-107-2" href="#__codelineno-107-2"></a><span class="l l-Scalar l-Scalar-Plain">or if you use PostgreSQL</span>
</span><span id="__span-107-3"><a id="__codelineno-107-3" name="__codelineno-107-3" href="#__codelineno-107-3"></a><span class="l l-Scalar l-Scalar-Plain"># sudo apt install zabbix-frontend-php php8.3-pgsql zabbix-nginx-conf</span>
</span></code></pre></div></p>
</div>
<p>Esse comando instalará os pacotes de front-end juntamente com as dependências
necessárias para o Nginx. Se estiver instalando o front-end em um servidor
diferente, certifique-se de executar esse comando nessa máquina específica.</p>
<p>Se não se lembrar de como adicionar o repositório, dê uma olhada no tópico
<a href="#adding-the-zabbix-repository">Adding the zabbix repository</a></p>
<p>A primeira coisa que precisamos fazer é alterar o arquivo de configuração do
Nginx para que não usemos a configuração padrão.</p>
<div class="admonition info">
<p class="admonition-title">editar configuração do nginx para Red Hat</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-108-1"><a id="__codelineno-108-1" name="__codelineno-108-1" href="#__codelineno-108-1"></a><span class="l l-Scalar l-Scalar-Plain">vi /etc/nginx/nginx.conf</span>
</span></code></pre></div>
</div>
<p>Nesse arquivo de configuração, procure o seguinte bloco que começa com :</p>
<div class="admonition info">
<p class="admonition-title">configuração original</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-109-1"><a id="__codelineno-109-1" name="__codelineno-109-1" href="#__codelineno-109-1"></a><span class="l l-Scalar l-Scalar-Plain">server {</span>
</span><span id="__span-109-2"><a id="__codelineno-109-2" name="__codelineno-109-2" href="#__codelineno-109-2"></a><span class="l l-Scalar l-Scalar-Plain">listen 80;</span>
</span><span id="__span-109-3"><a id="__codelineno-109-3" name="__codelineno-109-3" href="#__codelineno-109-3"></a><span class="l l-Scalar l-Scalar-Plain">listen [::]:80;</span>
</span><span id="__span-109-4"><a id="__codelineno-109-4" name="__codelineno-109-4" href="#__codelineno-109-4"></a><span class="l l-Scalar l-Scalar-Plain">server*name *;</span>
</span><span id="__span-109-5"><a id="__codelineno-109-5" name="__codelineno-109-5" href="#__codelineno-109-5"></a><span class="l l-Scalar l-Scalar-Plain">root /usr/share/nginx/html;</span>
</span><span id="__span-109-6"><a id="__codelineno-109-6" name="__codelineno-109-6" href="#__codelineno-109-6"></a>
</span><span id="__span-109-7"><a id="__codelineno-109-7" name="__codelineno-109-7" href="#__codelineno-109-7"></a><span class="w">         </span><span class="l l-Scalar l-Scalar-Plain"># Load configuration files for the default server block.</span>
</span><span id="__span-109-8"><a id="__codelineno-109-8" name="__codelineno-109-8" href="#__codelineno-109-8"></a><span class="w">         </span><span class="l l-Scalar l-Scalar-Plain">include /etc/nginx/default.d/*.conf;</span>
</span></code></pre></div>
</div>
<p>Em seguida, comente o seguinte bloco de servidor no arquivo de configuração:</p>
<div class="admonition info">
<p class="admonition-title">configuração após edição</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-110-1"><a id="__codelineno-110-1" name="__codelineno-110-1" href="#__codelineno-110-1"></a><span class="l l-Scalar l-Scalar-Plain">server {</span>
</span><span id="__span-110-2"><a id="__codelineno-110-2" name="__codelineno-110-2" href="#__codelineno-110-2"></a><span class="l l-Scalar l-Scalar-Plain"># listen 80;</span>
</span><span id="__span-110-3"><a id="__codelineno-110-3" name="__codelineno-110-3" href="#__codelineno-110-3"></a><span class="l l-Scalar l-Scalar-Plain"># listen [::]:80;</span>
</span><span id="__span-110-4"><a id="__codelineno-110-4" name="__codelineno-110-4" href="#__codelineno-110-4"></a><span class="l l-Scalar l-Scalar-Plain"># server*name *;</span>
</span><span id="__span-110-5"><a id="__codelineno-110-5" name="__codelineno-110-5" href="#__codelineno-110-5"></a><span class="l l-Scalar l-Scalar-Plain"># root /usr/share/nginx/html;</span>
</span></code></pre></div>
</div>
<p>Agora, o arquivo de configuração do Zabbix deve ser modificado para refletir o
ambiente atual. Abra o arquivo a seguir para edição:</p>
<div class="admonition info">
<p class="admonition-title">editar configuração do zabbix para nginx</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-111-1"><a id="__codelineno-111-1" name="__codelineno-111-1" href="#__codelineno-111-1"></a><span class="l l-Scalar l-Scalar-Plain">vi /etc/nginx/conf.d/zabbix.conf</span>
</span></code></pre></div>
</div>
<p>E altere as seguintes linhas:</p>
<div class="admonition info">
<p class="admonition-title">configuração original</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-112-1"><a id="__codelineno-112-1" name="__codelineno-112-1" href="#__codelineno-112-1"></a><span class="l l-Scalar l-Scalar-Plain">server {</span>
</span><span id="__span-112-2"><a id="__codelineno-112-2" name="__codelineno-112-2" href="#__codelineno-112-2"></a><span class="l l-Scalar l-Scalar-Plain">listen 8080;</span>
</span><span id="__span-112-3"><a id="__codelineno-112-3" name="__codelineno-112-3" href="#__codelineno-112-3"></a><span class="l l-Scalar l-Scalar-Plain">server_name example.com;</span>
</span><span id="__span-112-4"><a id="__codelineno-112-4" name="__codelineno-112-4" href="#__codelineno-112-4"></a>
</span><span id="__span-112-5"><a id="__codelineno-112-5" name="__codelineno-112-5" href="#__codelineno-112-5"></a><span class="l l-Scalar l-Scalar-Plain">root    /usr/share/zabbix;</span>
</span><span id="__span-112-6"><a id="__codelineno-112-6" name="__codelineno-112-6" href="#__codelineno-112-6"></a>
</span><span id="__span-112-7"><a id="__codelineno-112-7" name="__codelineno-112-7" href="#__codelineno-112-7"></a><span class="l l-Scalar l-Scalar-Plain">index   index.php;</span>
</span></code></pre></div>
</div>
<p>Substitua as duas primeiras linhas pela porta e pelo domínio corretos do seu
front-end. Caso não tenha um domínio, você pode substituir <code>servername</code> por
<code>_;</code>, como no exemplo abaixo:</p>
<div class="admonition info">
<p class="admonition-title">configuração após a edição</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-113-1"><a id="__codelineno-113-1" name="__codelineno-113-1" href="#__codelineno-113-1"></a><span class="l l-Scalar l-Scalar-Plain">server {</span><span class="w"> </span><span class="c1"># listen 8080; # server*name example.com;</span>
</span><span id="__span-113-2"><a id="__codelineno-113-2" name="__codelineno-113-2" href="#__codelineno-113-2"></a><span class="l l-Scalar l-Scalar-Plain">listen 80;</span>
</span><span id="__span-113-3"><a id="__codelineno-113-3" name="__codelineno-113-3" href="#__codelineno-113-3"></a><span class="l l-Scalar l-Scalar-Plain">server_name *;</span>
</span><span id="__span-113-4"><a id="__codelineno-113-4" name="__codelineno-113-4" href="#__codelineno-113-4"></a>
</span><span id="__span-113-5"><a id="__codelineno-113-5" name="__codelineno-113-5" href="#__codelineno-113-5"></a><span class="w">         </span><span class="l l-Scalar l-Scalar-Plain">root    /usr/share/zabbix;</span>
</span><span id="__span-113-6"><a id="__codelineno-113-6" name="__codelineno-113-6" href="#__codelineno-113-6"></a>
</span><span id="__span-113-7"><a id="__codelineno-113-7" name="__codelineno-113-7" href="#__codelineno-113-7"></a><span class="w">         </span><span class="l l-Scalar l-Scalar-Plain">index   index.php;</span>
</span></code></pre></div>
</div>
<p>O servidor Web e o serviço PHP-FPM agora estão prontos para ativação e
inicialização persistente. Execute os comandos a seguir para ativá-los e
iniciá-los imediatamente:</p>
<div class="admonition info">
<p class="admonition-title">editar configuração do nginx para o ubuntu</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-114-1"><a id="__codelineno-114-1" name="__codelineno-114-1" href="#__codelineno-114-1"></a><span class="l l-Scalar l-Scalar-Plain">sudo vi /etc/zabbix/nginx.conf</span>
</span></code></pre></div>
</div>
<p>Substitua as seguintes linhas:</p>
<div class="admonition info">
<p class="admonition-title">configuração original</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-115-1"><a id="__codelineno-115-1" name="__codelineno-115-1" href="#__codelineno-115-1"></a><span class="l l-Scalar l-Scalar-Plain">server {</span>
</span><span id="__span-115-2"><a id="__codelineno-115-2" name="__codelineno-115-2" href="#__codelineno-115-2"></a><span class="l l-Scalar l-Scalar-Plain">#        listen          8080;</span>
</span><span id="__span-115-3"><a id="__codelineno-115-3" name="__codelineno-115-3" href="#__codelineno-115-3"></a><span class="l l-Scalar l-Scalar-Plain">#        server_name     example.com;</span>
</span></code></pre></div>
</div>
<p>com :</p>
<div class="admonition info">
<p class="admonition-title">configuração após edição</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-116-1"><a id="__codelineno-116-1" name="__codelineno-116-1" href="#__codelineno-116-1"></a><span class="l l-Scalar l-Scalar-Plain">server {</span>
</span><span id="__span-116-2"><a id="__codelineno-116-2" name="__codelineno-116-2" href="#__codelineno-116-2"></a><span class="l l-Scalar l-Scalar-Plain">listen xxx.xxx.xxx.xxx:80;</span>
</span><span id="__span-116-3"><a id="__codelineno-116-3" name="__codelineno-116-3" href="#__codelineno-116-3"></a><span class="l l-Scalar l-Scalar-Plain">server_name &quot;&quot;;</span>
</span></code></pre></div>
</div>
<p>em que xxx.xxx.xxx.xxx é seu IP ou nome DNS.</p>
<details class="nota" open="open">
<summary>Nota</summary>
<p>server_name is normally replaced with the fqdn name of your machine. If you
have no fqdn you can keep it open like in this example.</p>
</details>
<div class="admonition info">
<p class="admonition-title">reinicie os serviços de front-end</p>
<p>Red Hat
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-117-1"><a id="__codelineno-117-1" name="__codelineno-117-1" href="#__codelineno-117-1"></a><span class="l l-Scalar l-Scalar-Plain">systemctl enable php-fpm --now</span>
</span><span id="__span-117-2"><a id="__codelineno-117-2" name="__codelineno-117-2" href="#__codelineno-117-2"></a><span class="l l-Scalar l-Scalar-Plain">systemctl enable nginx --now</span>
</span></code></pre></div></p>
<p>Ubuntu
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-118-1"><a id="__codelineno-118-1" name="__codelineno-118-1" href="#__codelineno-118-1"></a><span class="l l-Scalar l-Scalar-Plain">sudo systemctl enable nginx php8.3-fpm</span>
</span><span id="__span-118-2"><a id="__codelineno-118-2" name="__codelineno-118-2" href="#__codelineno-118-2"></a><span class="l l-Scalar l-Scalar-Plain">sudo systemctl restart nginx php8.3-fpm</span>
</span></code></pre></div></p>
</div>
<p>Vamos verificar se o serviço foi iniciado e ativado corretamente para que ele
sobreviva à nossa reinicialização na próxima vez.</p>
<div class="admonition info">
<p class="admonition-title">verifique se o serviço está em execução</p>
<p><div class="language-yaml highlight"><pre><span></span><code><span id="__span-119-1"><a id="__codelineno-119-1" name="__codelineno-119-1" href="#__codelineno-119-1"></a><span class="l l-Scalar l-Scalar-Plain">systemctl status nginx</span>
</span></code></pre></div>
<div class="language-text highlight"><pre><span></span><code><span id="__span-120-1"><a id="__codelineno-120-1" name="__codelineno-120-1" href="#__codelineno-120-1"></a>● nginx.service - The nginx HTTP and reverse proxy server
</span><span id="__span-120-2"><a id="__codelineno-120-2" name="__codelineno-120-2" href="#__codelineno-120-2"></a>      Loaded: loaded (/usr/lib/systemd/system/nginx.service; enabled; preset: disabled)
</span><span id="__span-120-3"><a id="__codelineno-120-3" name="__codelineno-120-3" href="#__codelineno-120-3"></a>     Drop-In: /usr/lib/systemd/system/nginx.service.d
</span><span id="__span-120-4"><a id="__codelineno-120-4" name="__codelineno-120-4" href="#__codelineno-120-4"></a>              └─php-fpm.conf
</span><span id="__span-120-5"><a id="__codelineno-120-5" name="__codelineno-120-5" href="#__codelineno-120-5"></a>      Active: active (running) since Mon 2023-11-20 11:42:18 CET; 30min ago
</span><span id="__span-120-6"><a id="__codelineno-120-6" name="__codelineno-120-6" href="#__codelineno-120-6"></a>    Main PID: 1206 (nginx)
</span><span id="__span-120-7"><a id="__codelineno-120-7" name="__codelineno-120-7" href="#__codelineno-120-7"></a>       Tasks: 2 (limit: 12344)
</span><span id="__span-120-8"><a id="__codelineno-120-8" name="__codelineno-120-8" href="#__codelineno-120-8"></a>      Memory: 4.8M
</span><span id="__span-120-9"><a id="__codelineno-120-9" name="__codelineno-120-9" href="#__codelineno-120-9"></a>         CPU: 38ms
</span><span id="__span-120-10"><a id="__codelineno-120-10" name="__codelineno-120-10" href="#__codelineno-120-10"></a>      CGroup: /system.slice/nginx.service
</span><span id="__span-120-11"><a id="__codelineno-120-11" name="__codelineno-120-11" href="#__codelineno-120-11"></a>              ├─1206 &quot;nginx: master process /usr/sbin/nginx&quot;
</span><span id="__span-120-12"><a id="__codelineno-120-12" name="__codelineno-120-12" href="#__codelineno-120-12"></a>              └─1207 &quot;nginx: worker process&quot;
</span><span id="__span-120-13"><a id="__codelineno-120-13" name="__codelineno-120-13" href="#__codelineno-120-13"></a>
</span><span id="__span-120-14"><a id="__codelineno-120-14" name="__codelineno-120-14" href="#__codelineno-120-14"></a>Nov 20 11:42:18 zabbix-srv systemd[1]: Starting The nginx HTTP and reverse proxy server...
</span><span id="__span-120-15"><a id="__codelineno-120-15" name="__codelineno-120-15" href="#__codelineno-120-15"></a>Nov 20 11:42:18 zabbix-srv nginx[1204]: nginx: the configuration file /etc/nginx/nginx.conf syntax is ok
</span><span id="__span-120-16"><a id="__codelineno-120-16" name="__codelineno-120-16" href="#__codelineno-120-16"></a>Nov 20 11:42:18 zabbix-srv nginx[1204]: nginx: configuration file /etc/nginx/nginx.conf test is successful
</span><span id="__span-120-17"><a id="__codelineno-120-17" name="__codelineno-120-17" href="#__codelineno-120-17"></a>Nov 20 11:42:18 zabbix-srv systemd[1]: Started The nginx HTTP and reverse proxy server.
</span></code></pre></div></p>
</div>
<p>Com o serviço operacional e configurado para inicialização automática, a etapa
preparatória final envolve o ajuste do firewall para permitir o tráfego HTTP de
entrada. Execute os seguintes comandos:</p>
<div class="admonition info">
<p class="admonition-title">configurar o firewall</p>
<p>Red Hat</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-121-1"><a id="__codelineno-121-1" name="__codelineno-121-1" href="#__codelineno-121-1"></a><span class="l l-Scalar l-Scalar-Plain">firewall-cmd --add-service=http --permanent</span>
</span><span id="__span-121-2"><a id="__codelineno-121-2" name="__codelineno-121-2" href="#__codelineno-121-2"></a><span class="l l-Scalar l-Scalar-Plain">firewall-cmd --reload</span>
</span></code></pre></div>
<p>Ubuntu
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-122-1"><a id="__codelineno-122-1" name="__codelineno-122-1" href="#__codelineno-122-1"></a><span class="l l-Scalar l-Scalar-Plain">sudo ufw allow 80/tcp</span>
</span></code></pre></div></p>
</div>
<p>Abra seu navegador e acesse a url ou o ip de seu front-end:</p>
<div class="admonition info">
<p class="admonition-title">configuração de front-end</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-123-1"><a id="__codelineno-123-1" name="__codelineno-123-1" href="#__codelineno-123-1"></a><span class="l l-Scalar l-Scalar-Plain">http://&lt;ip or dns of the zabbix frontend server&gt;/</span>
</span></code></pre></div>
</div>
<p>Se tudo correr bem, você deverá ser recebido com uma página de boas-vindas do
Zabbix. Caso ocorra algum erro, verifique novamente a configuração ou dê uma
olhada no arquivo de log do nginx:</p>
<div class="admonition informações">
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-124-1"><a id="__codelineno-124-1" name="__codelineno-124-1" href="#__codelineno-124-1"></a><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/var/log/nginx/error.log</span>
</span></code></pre></div>
</div>
<p>ou execute o seguinte comando :</p>
<div class="admonition informações">
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-125-1"><a id="__codelineno-125-1" name="__codelineno-125-1" href="#__codelineno-125-1"></a><span class="l l-Scalar l-Scalar-Plain">journalctl -xe</span>
</span></code></pre></div>
</div>
<p>Isso deve ajudá-lo a localizar os erros que você cometeu.</p>
<p>Ao acessar o URL apropriado, deverá aparecer uma página semelhante à ilustrada
abaixo:</p>
<p><img align="left" alt="overview" src="../../../ch01-zabbix-components/basic-installation/ch01-basic-installation-setup.png" /></p>
<p><em>1.4 Boas-vindas ao Zabbix</em></p>
<p>O front-end do Zabbix apresenta um conjunto limitado de localizações
disponíveis, conforme mostrado.</p>
<p><img align="left" alt="overview language" src="../../../ch01-zabbix-components/basic-installation/ch01-basic-installation-setuplanguage.png" /></p>
<p><em>!.5 Zabbix welcome language choice</em></p>
<p>What if we want to install Chinese as language or another language from the
list? Run the next command to get a list of all locales available for your OS.</p>
<div class="admonition info">
<p class="admonition-title">install language packs</p>
<p>Red Hat
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-126-1"><a id="__codelineno-126-1" name="__codelineno-126-1" href="#__codelineno-126-1"></a><span class="l l-Scalar l-Scalar-Plain">dnf list glibc-langpack-*</span>
</span></code></pre></div></p>
<p>Ubuntu
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-127-1"><a id="__codelineno-127-1" name="__codelineno-127-1" href="#__codelineno-127-1"></a><span class="l l-Scalar l-Scalar-Plain">apt-cache search language-pack</span>
</span></code></pre></div></p>
</div>
<p>Users on Ubuntu will probably notice following error `"Locale for language
"en_US" is not found on the web server."``</p>
<div class="admonition info">
<p class="admonition-title">This can be solved easy with the following commands.</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-128-1"><a id="__codelineno-128-1" name="__codelineno-128-1" href="#__codelineno-128-1"></a>sudo locale-gen en_US.UTF-8
</span><span id="__span-128-2"><a id="__codelineno-128-2" name="__codelineno-128-2" href="#__codelineno-128-2"></a>sudo update-locale
</span><span id="__span-128-3"><a id="__codelineno-128-3" name="__codelineno-128-3" href="#__codelineno-128-3"></a>sudo systemctl restart nginx php8.3-fpm
</span></code></pre></div>
</div>
<p>This will give you on Red Hat based systems a list like:</p>
<div class="admonition informações">
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-129-1"><a id="__codelineno-129-1" name="__codelineno-129-1" href="#__codelineno-129-1"></a><span class="l l-Scalar l-Scalar-Plain">Installed Packages</span>
</span><span id="__span-129-2"><a id="__codelineno-129-2" name="__codelineno-129-2" href="#__codelineno-129-2"></a><span class="l l-Scalar l-Scalar-Plain">glibc-langpack-en.x86_64</span>
</span><span id="__span-129-3"><a id="__codelineno-129-3" name="__codelineno-129-3" href="#__codelineno-129-3"></a><span class="l l-Scalar l-Scalar-Plain">Available Packages</span>
</span><span id="__span-129-4"><a id="__codelineno-129-4" name="__codelineno-129-4" href="#__codelineno-129-4"></a><span class="l l-Scalar l-Scalar-Plain">glibc-langpack-aa.x86_64</span>
</span><span id="__span-129-5"><a id="__codelineno-129-5" name="__codelineno-129-5" href="#__codelineno-129-5"></a><span class="nn">---</span>
</span><span id="__span-129-6"><a id="__codelineno-129-6" name="__codelineno-129-6" href="#__codelineno-129-6"></a><span class="l l-Scalar l-Scalar-Plain">glibc-langpack-zu.x86_64</span>
</span></code></pre></div>
</div>
<div class="admonition info">
<p class="admonition-title">on Ubuntu it will look like :</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-130-1"><a id="__codelineno-130-1" name="__codelineno-130-1" href="#__codelineno-130-1"></a><span class="l l-Scalar l-Scalar-Plain">language-pack-kab - translation updates for language Kabyle</span>
</span><span id="__span-130-2"><a id="__codelineno-130-2" name="__codelineno-130-2" href="#__codelineno-130-2"></a><span class="l l-Scalar l-Scalar-Plain">language-pack-kab-base - translations for language Kabyle</span>
</span><span id="__span-130-3"><a id="__codelineno-130-3" name="__codelineno-130-3" href="#__codelineno-130-3"></a><span class="l l-Scalar l-Scalar-Plain">language-pack-kn - translation updates for language Kannada</span>
</span><span id="__span-130-4"><a id="__codelineno-130-4" name="__codelineno-130-4" href="#__codelineno-130-4"></a><span class="l l-Scalar l-Scalar-Plain">language-pack-kn-base - translations for language Kannada</span>
</span><span id="__span-130-5"><a id="__codelineno-130-5" name="__codelineno-130-5" href="#__codelineno-130-5"></a><span class="nn">---</span>
</span><span id="__span-130-6"><a id="__codelineno-130-6" name="__codelineno-130-6" href="#__codelineno-130-6"></a><span class="l l-Scalar l-Scalar-Plain">language-pack-ko - translation updates for language Korean</span>
</span><span id="__span-130-7"><a id="__codelineno-130-7" name="__codelineno-130-7" href="#__codelineno-130-7"></a><span class="l l-Scalar l-Scalar-Plain">language-pack-ko-base - translations for language Korean</span>
</span><span id="__span-130-8"><a id="__codelineno-130-8" name="__codelineno-130-8" href="#__codelineno-130-8"></a><span class="l l-Scalar l-Scalar-Plain">language-pack-ku - translation updates for language Kurdish</span>
</span><span id="__span-130-9"><a id="__codelineno-130-9" name="__codelineno-130-9" href="#__codelineno-130-9"></a><span class="l l-Scalar l-Scalar-Plain">language-pack-ku-base - translations for language Kurdish</span>
</span><span id="__span-130-10"><a id="__codelineno-130-10" name="__codelineno-130-10" href="#__codelineno-130-10"></a><span class="l l-Scalar l-Scalar-Plain">language-pack-lt - translation updates for language Lithuanian</span>
</span></code></pre></div>
</div>
<p>Let's search for our Chinese locale to see if it is available. As you can see
the code starts with zh.</p>
<div class="admonition info">
<p class="admonition-title">search for language pack</p>
<p>Red Hat
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-131-1"><a id="__codelineno-131-1" name="__codelineno-131-1" href="#__codelineno-131-1"></a><span class="l l-Scalar l-Scalar-Plain">dnf list glibc-langpack-* | grep zh</span>
</span></code></pre></div></p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-132-1"><a id="__codelineno-132-1" name="__codelineno-132-1" href="#__codelineno-132-1"></a>glibc-langpack-zh.x86_64
</span><span id="__span-132-2"><a id="__codelineno-132-2" name="__codelineno-132-2" href="#__codelineno-132-2"></a>glibc-langpack-lzh.x86_64
</span></code></pre></div>
<p>Ubuntu
<div class="language-text highlight"><pre><span></span><code><span id="__span-133-1"><a id="__codelineno-133-1" name="__codelineno-133-1" href="#__codelineno-133-1"></a>sudo apt-cache search language-pack | grep -i zh
</span></code></pre></div></p>
</div>
<p>The command outputs two lines; however, given the identified language code,
'zh_CN,' only the first package requires installation.</p>
<div class="admonition info">
<p class="admonition-title">install the package</p>
<p>Red Hat
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-134-1"><a id="__codelineno-134-1" name="__codelineno-134-1" href="#__codelineno-134-1"></a><span class="l l-Scalar l-Scalar-Plain">dnf install glibc-langpack-zh.x86_64</span>
</span></code></pre></div></p>
<p>Ubuntu
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-135-1"><a id="__codelineno-135-1" name="__codelineno-135-1" href="#__codelineno-135-1"></a><span class="l l-Scalar l-Scalar-Plain">sudo apt install language-pack-zh-hans</span>
</span><span id="__span-135-2"><a id="__codelineno-135-2" name="__codelineno-135-2" href="#__codelineno-135-2"></a><span class="l l-Scalar l-Scalar-Plain">sudo systemctl restart nginx php8.3-fpm</span>
</span></code></pre></div></p>
</div>
<p>When we return now to our front-end we are able to select the Chinese language,
after a reload of our browser.</p>
<p><img align="left" alt="select language" src="../../../ch01-zabbix-components/basic-installation/ch01-basic-installation-selectlanguage.png" /></p>
<p><em>1.6 Zabbix select language</em></p>
<details class="nota" open="open">
<summary>Nota</summary>
<p>If your preferred language is not available in the Zabbix front-end, don't
worry it simply means that the translation is either incomplete or not yet
available. Zabbix is an open-source project that relies on community contributions
for translations, so you can help improve it by contributing your own translations.</p>
</details>
<p>Visit the translation page at
<a href="https://translate.zabbix.com/">https://translate.zabbix.com/</a> to assist with
the translation efforts. Once your translation is complete and reviewed, it will
be included in the next minor patch version of Zabbix. Your contributions help
make Zabbix more accessible and improve the overall user experience for
everyone.</p>
<p>When you're satisfied with the available translations, click <code>Next</code>. You will
then be taken to a screen to verify that all prerequisites are satisfied. If any
prerequisites are not fulfilled, address those issues first. However, if
everything is in order, you should be able to proceed by clicking <code>Next</code>.</p>
<p><img align="left" alt="pre-requisites" src="../../../ch01-zabbix-components/basic-installation/ch01-basic-installation-prerequisites.png" /></p>
<p><em>1.7 Zabbix pre-requisites</em></p>
<p>On the next page, you'll configure the database connection parameters:</p>
<ol>
<li><code>Select the Database Type</code>: Choose either MySQL or PostgreSQL depending on
   your setup.</li>
<li><code>Enter the Database Host</code>: Provide the IP address or DNS name of your
   database server. Use port 3306 for MariaDB/MySQL or 5432 for PostgreSQL.</li>
<li><code>Enter the Database Name</code>: Specify the name of your database. In our case, it
   is zabbix. If you are using PostgreSQL, you will also need to provide the
   schema name, which is zabbix_server in our case.</li>
<li><code>Enter the Database User</code>: Input the database user created for the web
   front-end, remember in our basic installation guide we created 2 users
   zabbix-web and zabbix-srv. One for the frontend and the other one for our
   zabbix server so here we will use the user <code>zabbix-web</code>. Enter the
   corresponding password for this user.</li>
</ol>
<p>Ensure that the <code>Database TLS encryption</code> option is not selected, and then click
<code>Next step</code> to proceed.</p>
<p><img align="left" alt="dbconnection" src="../../../ch01-zabbix-components/basic-installation/ch01-basic-installation-dbconnection.png" /></p>
<p><em>1.8 Zabbix connections</em></p>
<p>You're almost finished with the setup! The final steps involve:</p>
<ol>
<li><code>Assigning an Instance Name</code>: Choose a descriptive name for your Zabbix
   instance.</li>
<li><code>Selecting the Timezone</code>: Choose the timezone that matches your location or
   your preferred time zone for the Zabbix interface.</li>
<li><code>Setting the Default Time Format</code>: Select the default time format you prefer
   to use.</li>
<li><strong>Encrypt connections from Web interface</strong>: I marked this box but you should
   not. This box is to encrypt communications between Zabbix frontend and your
   browser. We will cover this later. Once these settings are configured, you
   can complete the setup and proceed with any final configuration steps as
   needed.</li>
</ol>
<details class="nota" open="open">
<summary>Nota</summary>
<p>It's a good practice to set your Zabbix server to the UTC timezone, especially
when managing systems across multiple timezones. Using UTC helps ensure consistency
in time-sensitive actions and events, as the server’s timezone is often used for
calculating and displaying time-related information.</p>
</details>
<p><img align="left" alt="settings" src="../../../ch01-zabbix-components/basic-installation/ch01-basic-installation-settings.png" /></p>
<p><em>1.9 Zabbix summary</em></p>
<p>After clicking <code>Next step</code> again, you'll be taken to a page confirming that the
configuration was successful. Click <code>Finish</code> to complete the setup process.</p>
<p><img align="left" alt="settings" src="../../../ch01-zabbix-components/basic-installation/ch01-basic-installation-final.png" /></p>
<p><em>1.10 Zabbix install</em></p>
<p>We are now ready to login :</p>
<p><img alt="settings" src="../../../ch01-zabbix-components/basic-installation/ch01-basic-installation-login.png" /></p>
<p><em>1.11 Zabbix login</em></p>
<ul>
<li>Login : Admin</li>
<li>Password : zabbix</li>
</ul>
<p>This concludes our topic on setting up the Zabbix server. If you're interested
in securing your front-end, I recommend checking out the topic Securing Zabbix
for additional guidance and best practices.</p>
<details class="nota" open="open">
<summary>Nota</summary>
<p>If you are not able to safe your configuration at the end make sure SeLinux
is disabled. It is possible that it will block access to certain files or even
the database.</p>
</details>
<h2 id="conclusao">Conclusão</h2>
<p>With this, we conclude our journey through setting up Zabbix and configuring it
with MySQL or PostgreSQL on RHEL-based systems and Ubuntu. We have walked
through the essential steps of preparing the environment, installing the
necessary components, and ensuring a fully functional Zabbix server. From
database selection to web frontend configuration with Nginx, each decision has
been aimed at creating a robust and efficient monitoring solution.</p>
<p>At this stage, your Zabbix instance is operational, providing the foundation for
advanced monitoring and alerting. In the upcoming chapters, we will delve into
fine-tuning Zabbix, optimizing performance, and exploring key features that
transform it into a powerful observability platform.</p>
<p>Now that your Zabbix environment is up and running, let’s take it to the next
level.</p>
<h2 id="perguntas">Perguntas</h2>
<ol>
<li>Should I choose MySQL or PostgreSQL as the database back-end? Why?</li>
<li>What version of Zabbix should I install for compatibility and stability?</li>
<li>What port does my DB use ?</li>
<li>What Zabbix logs should I check for troubleshooting common issues?</li>
</ol>
<h2 id="urls-uteis">URLs úteis</h2>
<ul>
<li><a href="https://www.postgresql.org/docs/current/ddl-priv.html">https://www.postgresql.org/docs/current/ddl-priv.html</a></li>
<li><a href="https://www.zabbix.com/download">https://www.zabbix.com/download</a></li>
<li><a href="https://www.zabbix.com/documentation/current/en/manual">https://www.zabbix.com/documentation/current/en/manual</a></li>
<li><a href="https://www.zabbix.com/documentation/current/en/manual/installation/requirements">https://www.zabbix.com/documentation/current/en/manual/installation/requirements</a></li>
<li><a href="https://www.zabbix.com/documentation/current/en/manual/installation/install_from_packages">https://www.zabbix.com/documentation/current/en/manual/installation/install_from_packages</a></li>
</ul>







  
  






                

              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Voltar para o topo
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2025 Stichting The Monitoring Penmasters
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../../..", "features": ["content.tags", "navigation.expand", "navigation.prune", "navigation.path", "navigation.indexes", "navigation.top", "search.suggest", "search.highlight", "search.share", "content.code.copy", "content.action.view", "content.tags"], "search": "../../../assets/javascripts/workers/search.2c215733.min.js", "tags": {"index": "tags.md"}, "translations": {"clipboard.copied": "Copiado para \u00e1rea de transfer\u00eancia", "clipboard.copy": "Copiar para \u00e1rea de transfer\u00eancia", "search.result.more.one": "mais 1 nesta p\u00e1gina", "search.result.more.other": "# mais nesta p\u00e1gina", "search.result.none": "Nenhum documento encontrado", "search.result.one": "1 documento encontrado", "search.result.other": "# documentos encontrados", "search.result.placeholder": "Digite para iniciar a busca", "search.result.term.missing": "Ausente", "select.version": "Selecione a vers\u00e3o"}, "version": null}</script>
    
    
    
    
      <script src="../../../assets/javascripts/bundle.79ae519e.min.js"></script>
      
        <script src="../../../js/print-site.js"></script>
      
        <script src="../../../js/print-site.js"></script>
      
        <script src="../../../js/print-site.js"></script>
      
        <script src="../../../js/print-site.js"></script>
      
        <script src="../../../assets/external/cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
        <script src="../../../javascripts/tags-data-attr.js"></script>
      
    
    
        
		
		
    

  </body>
</html>